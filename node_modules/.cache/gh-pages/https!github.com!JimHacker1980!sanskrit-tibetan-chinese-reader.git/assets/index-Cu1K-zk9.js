var kM=Object.defineProperty;var y1=h=>{throw TypeError(h)};var PM=(h,t,e)=>t in h?kM(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var et=(h,t,e)=>PM(h,typeof t!="symbol"?t+"":t,e),l0=(h,t,e)=>t.has(h)||y1("Cannot "+e);var u=(h,t,e)=>(l0(h,t,"read from private field"),e?e.call(h):t.get(h)),x=(h,t,e)=>t.has(h)?y1("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,e),S=(h,t,e,n)=>(l0(h,t,"write to private field"),n?n.call(h,e):t.set(h,e),e),C=(h,t,e)=>(l0(h,t,"access private method"),e);var Ai=(h,t,e,n)=>({set _(a){S(h,t,a,e)},get _(){return u(h,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();var o0={exports:{}},jh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b1;function BM(){if(b1)return jh;b1=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,l){var o=null;if(l!==void 0&&(o=""+l),a.key!==void 0&&(o=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:h,type:n,key:o,ref:a!==void 0?a:null,props:l}}return jh.Fragment=t,jh.jsx=e,jh.jsxs=e,jh}var v1;function zM(){return v1||(v1=1,o0.exports=BM()),o0.exports}var gt=zM(),c0={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A1;function HM(){if(A1)return Rt;A1=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),o=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.iterator;function v(P){return P===null||typeof P!="object"?null:(P=b&&P[b]||P["@@iterator"],typeof P=="function"?P:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,w={};function T(P,Q,it){this.props=P,this.context=Q,this.refs=w,this.updater=it||A}T.prototype.isReactComponent={},T.prototype.setState=function(P,Q){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,Q,"setState")},T.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function R(){}R.prototype=T.prototype;function O(P,Q,it){this.props=P,this.context=Q,this.refs=w,this.updater=it||A}var D=O.prototype=new R;D.constructor=O,E(D,T.prototype),D.isPureReactComponent=!0;var k=Array.isArray,L={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function F(P,Q,it,tt,ft,Ct){return it=Ct.ref,{$$typeof:h,type:P,key:Q,ref:it!==void 0?it:null,props:Ct}}function W(P,Q){return F(P.type,Q,void 0,void 0,void 0,P.props)}function J(P){return typeof P=="object"&&P!==null&&P.$$typeof===h}function nt(P){var Q={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(it){return Q[it]})}var st=/\/+/g;function St(P,Q){return typeof P=="object"&&P!==null&&P.key!=null?nt(""+P.key):Q.toString(36)}function zt(){}function Et(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(zt,zt):(P.status="pending",P.then(function(Q){P.status==="pending"&&(P.status="fulfilled",P.value=Q)},function(Q){P.status==="pending"&&(P.status="rejected",P.reason=Q)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Gt(P,Q,it,tt,ft){var Ct=typeof P;(Ct==="undefined"||Ct==="boolean")&&(P=null);var mt=!1;if(P===null)mt=!0;else switch(Ct){case"bigint":case"string":case"number":mt=!0;break;case"object":switch(P.$$typeof){case h:case t:mt=!0;break;case m:return mt=P._init,Gt(mt(P._payload),Q,it,tt,ft)}}if(mt)return ft=ft(P),mt=tt===""?"."+St(P,0):tt,k(ft)?(it="",mt!=null&&(it=mt.replace(st,"$&/")+"/"),Gt(ft,Q,it,"",function(is){return is})):ft!=null&&(J(ft)&&(ft=W(ft,it+(ft.key==null||P&&P.key===ft.key?"":(""+ft.key).replace(st,"$&/")+"/")+mt)),Q.push(ft)),1;mt=0;var Ht=tt===""?".":tt+":";if(k(P))for(var Yt=0;Yt<P.length;Yt++)tt=P[Yt],Ct=Ht+St(tt,Yt),mt+=Gt(tt,Q,it,Ct,ft);else if(Yt=v(P),typeof Yt=="function")for(P=Yt.call(P),Yt=0;!(tt=P.next()).done;)tt=tt.value,Ct=Ht+St(tt,Yt++),mt+=Gt(tt,Q,it,Ct,ft);else if(Ct==="object"){if(typeof P.then=="function")return Gt(Et(P),Q,it,tt,ft);throw Q=String(P),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return mt}function z(P,Q,it){if(P==null)return P;var tt=[],ft=0;return Gt(P,tt,"","",function(Ct){return Q.call(it,Ct,ft++)}),tt}function X(P){if(P._status===-1){var Q=P._result;Q=Q(),Q.then(function(it){(P._status===0||P._status===-1)&&(P._status=1,P._result=it)},function(it){(P._status===0||P._status===-1)&&(P._status=2,P._result=it)}),P._status===-1&&(P._status=0,P._result=Q)}if(P._status===1)return P._result.default;throw P._result}var ut=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function Nt(){}return Rt.Children={map:z,forEach:function(P,Q,it){z(P,function(){Q.apply(this,arguments)},it)},count:function(P){var Q=0;return z(P,function(){Q++}),Q},toArray:function(P){return z(P,function(Q){return Q})||[]},only:function(P){if(!J(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Rt.Component=T,Rt.Fragment=e,Rt.Profiler=a,Rt.PureComponent=O,Rt.StrictMode=n,Rt.Suspense=f,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(P){return L.H.useMemoCache(P)}},Rt.cache=function(P){return function(){return P.apply(null,arguments)}},Rt.cloneElement=function(P,Q,it){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var tt=E({},P.props),ft=P.key,Ct=void 0;if(Q!=null)for(mt in Q.ref!==void 0&&(Ct=void 0),Q.key!==void 0&&(ft=""+Q.key),Q)!U.call(Q,mt)||mt==="key"||mt==="__self"||mt==="__source"||mt==="ref"&&Q.ref===void 0||(tt[mt]=Q[mt]);var mt=arguments.length-2;if(mt===1)tt.children=it;else if(1<mt){for(var Ht=Array(mt),Yt=0;Yt<mt;Yt++)Ht[Yt]=arguments[Yt+2];tt.children=Ht}return F(P.type,ft,void 0,void 0,Ct,tt)},Rt.createContext=function(P){return P={$$typeof:o,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},Rt.createElement=function(P,Q,it){var tt,ft={},Ct=null;if(Q!=null)for(tt in Q.key!==void 0&&(Ct=""+Q.key),Q)U.call(Q,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(ft[tt]=Q[tt]);var mt=arguments.length-2;if(mt===1)ft.children=it;else if(1<mt){for(var Ht=Array(mt),Yt=0;Yt<mt;Yt++)Ht[Yt]=arguments[Yt+2];ft.children=Ht}if(P&&P.defaultProps)for(tt in mt=P.defaultProps,mt)ft[tt]===void 0&&(ft[tt]=mt[tt]);return F(P,Ct,void 0,void 0,null,ft)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(P){return{$$typeof:d,render:P}},Rt.isValidElement=J,Rt.lazy=function(P){return{$$typeof:m,_payload:{_status:-1,_result:P},_init:X}},Rt.memo=function(P,Q){return{$$typeof:p,type:P,compare:Q===void 0?null:Q}},Rt.startTransition=function(P){var Q=L.T,it={};L.T=it;try{var tt=P(),ft=L.S;ft!==null&&ft(it,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(Nt,ut)}catch(Ct){ut(Ct)}finally{L.T=Q}},Rt.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Rt.use=function(P){return L.H.use(P)},Rt.useActionState=function(P,Q,it){return L.H.useActionState(P,Q,it)},Rt.useCallback=function(P,Q){return L.H.useCallback(P,Q)},Rt.useContext=function(P){return L.H.useContext(P)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(P,Q){return L.H.useDeferredValue(P,Q)},Rt.useEffect=function(P,Q,it){var tt=L.H;if(typeof it=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return tt.useEffect(P,Q)},Rt.useId=function(){return L.H.useId()},Rt.useImperativeHandle=function(P,Q,it){return L.H.useImperativeHandle(P,Q,it)},Rt.useInsertionEffect=function(P,Q){return L.H.useInsertionEffect(P,Q)},Rt.useLayoutEffect=function(P,Q){return L.H.useLayoutEffect(P,Q)},Rt.useMemo=function(P,Q){return L.H.useMemo(P,Q)},Rt.useOptimistic=function(P,Q){return L.H.useOptimistic(P,Q)},Rt.useReducer=function(P,Q,it){return L.H.useReducer(P,Q,it)},Rt.useRef=function(P){return L.H.useRef(P)},Rt.useState=function(P){return L.H.useState(P)},Rt.useSyncExternalStore=function(P,Q,it){return L.H.useSyncExternalStore(P,Q,it)},Rt.useTransition=function(){return L.H.useTransition()},Rt.version="19.1.0",Rt}var S1;function Jv(){return S1||(S1=1,c0.exports=HM()),c0.exports}var K=Jv(),u0={exports:{}},Gh={},h0={exports:{}},d0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E1;function UM(){return E1||(E1=1,function(h){function t(z,X){var ut=z.length;z.push(X);t:for(;0<ut;){var Nt=ut-1>>>1,P=z[Nt];if(0<a(P,X))z[Nt]=X,z[ut]=P,ut=Nt;else break t}}function e(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var X=z[0],ut=z.pop();if(ut!==X){z[0]=ut;t:for(var Nt=0,P=z.length,Q=P>>>1;Nt<Q;){var it=2*(Nt+1)-1,tt=z[it],ft=it+1,Ct=z[ft];if(0>a(tt,ut))ft<P&&0>a(Ct,tt)?(z[Nt]=Ct,z[ft]=ut,Nt=ft):(z[Nt]=tt,z[it]=ut,Nt=it);else if(ft<P&&0>a(Ct,ut))z[Nt]=Ct,z[ft]=ut,Nt=ft;else break t}}return X}function a(z,X){var ut=z.sortIndex-X.sortIndex;return ut!==0?ut:z.id-X.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;h.unstable_now=function(){return l.now()}}else{var o=Date,d=o.now();h.unstable_now=function(){return o.now()-d}}var f=[],p=[],m=1,b=null,v=3,A=!1,E=!1,w=!1,T=!1,R=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function k(z){for(var X=e(p);X!==null;){if(X.callback===null)n(p);else if(X.startTime<=z)n(p),X.sortIndex=X.expirationTime,t(f,X);else break;X=e(p)}}function L(z){if(w=!1,k(z),!E)if(e(f)!==null)E=!0,U||(U=!0,St());else{var X=e(p);X!==null&&Gt(L,X.startTime-z)}}var U=!1,F=-1,W=5,J=-1;function nt(){return T?!0:!(h.unstable_now()-J<W)}function st(){if(T=!1,U){var z=h.unstable_now();J=z;var X=!0;try{t:{E=!1,w&&(w=!1,O(F),F=-1),A=!0;var ut=v;try{e:{for(k(z),b=e(f);b!==null&&!(b.expirationTime>z&&nt());){var Nt=b.callback;if(typeof Nt=="function"){b.callback=null,v=b.priorityLevel;var P=Nt(b.expirationTime<=z);if(z=h.unstable_now(),typeof P=="function"){b.callback=P,k(z),X=!0;break e}b===e(f)&&n(f),k(z)}else n(f);b=e(f)}if(b!==null)X=!0;else{var Q=e(p);Q!==null&&Gt(L,Q.startTime-z),X=!1}}break t}finally{b=null,v=ut,A=!1}X=void 0}}finally{X?St():U=!1}}}var St;if(typeof D=="function")St=function(){D(st)};else if(typeof MessageChannel<"u"){var zt=new MessageChannel,Et=zt.port2;zt.port1.onmessage=st,St=function(){Et.postMessage(null)}}else St=function(){R(st,0)};function Gt(z,X){F=R(function(){z(h.unstable_now())},X)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(z){z.callback=null},h.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<z?Math.floor(1e3/z):5},h.unstable_getCurrentPriorityLevel=function(){return v},h.unstable_next=function(z){switch(v){case 1:case 2:case 3:var X=3;break;default:X=v}var ut=v;v=X;try{return z()}finally{v=ut}},h.unstable_requestPaint=function(){T=!0},h.unstable_runWithPriority=function(z,X){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ut=v;v=z;try{return X()}finally{v=ut}},h.unstable_scheduleCallback=function(z,X,ut){var Nt=h.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?Nt+ut:Nt):ut=Nt,z){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ut+P,z={id:m++,callback:X,priorityLevel:z,startTime:ut,expirationTime:P,sortIndex:-1},ut>Nt?(z.sortIndex=ut,t(p,z),e(f)===null&&z===e(p)&&(w?(O(F),F=-1):w=!0,Gt(L,ut-Nt))):(z.sortIndex=P,t(f,z),E||A||(E=!0,U||(U=!0,St()))),z},h.unstable_shouldYield=nt,h.unstable_wrapCallback=function(z){var X=v;return function(){var ut=v;v=X;try{return z.apply(this,arguments)}finally{v=ut}}}}(d0)),d0}var w1;function FM(){return w1||(w1=1,h0.exports=UM()),h0.exports}var f0={exports:{}},hi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _1;function IM(){if(_1)return hi;_1=1;var h=Jv();function t(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,p,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:f,containerInfo:p,implementation:m}}var o=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return hi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,hi.createPortal=function(f,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(f,p,null,m)},hi.flushSync=function(f){var p=o.T,m=n.p;try{if(o.T=null,n.p=2,f)return f()}finally{o.T=p,n.p=m,n.d.f()}},hi.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(f,p))},hi.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},hi.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var m=p.as,b=d(m,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?n.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:A}):m==="script"&&n.d.X(f,{crossOrigin:b,integrity:v,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},hi.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=d(p.as,p.crossOrigin);n.d.M(f,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(f)},hi.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,b=d(m,p.crossOrigin);n.d.L(f,m,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},hi.preloadModule=function(f,p){if(typeof f=="string")if(p){var m=d(p.as,p.crossOrigin);n.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(f)},hi.requestFormReset=function(f){n.d.r(f)},hi.unstable_batchedUpdates=function(f,p){return f(p)},hi.useFormState=function(f,p,m){return o.H.useFormState(f,p,m)},hi.useFormStatus=function(){return o.H.useHostTransitionStatus()},hi.version="19.1.0",hi}var T1;function jM(){if(T1)return f0.exports;T1=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),f0.exports=IM(),f0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x1;function GM(){if(x1)return Gh;x1=1;var h=FM(),t=Jv(),e=jM();function n(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,r=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(r=s.return),i=s.return;while(i)}return s.tag===3?r:null}function o(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(n(188))}function f(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(n(188));return s!==i?null:i}for(var r=i,c=s;;){var g=r.return;if(g===null)break;var y=g.alternate;if(y===null){if(c=g.return,c!==null){r=c;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===r)return d(g),i;if(y===c)return d(g),s;y=y.sibling}throw Error(n(188))}if(r.return!==c.return)r=g,c=y;else{for(var _=!1,M=g.child;M;){if(M===r){_=!0,r=g,c=y;break}if(M===c){_=!0,c=g,r=y;break}M=M.sibling}if(!_){for(M=y.child;M;){if(M===r){_=!0,r=y,c=g;break}if(M===c){_=!0,c=y,r=g;break}M=M.sibling}if(!_)throw Error(n(189))}}if(r.alternate!==c)throw Error(n(190))}if(r.tag!==3)throw Error(n(188));return r.stateNode.current===r?i:s}function p(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=p(i),s!==null)return s;i=i.sibling}return null}var m=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),D=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),nt=Symbol.for("react.memo_cache_sentinel"),st=Symbol.iterator;function St(i){return i===null||typeof i!="object"?null:(i=st&&i[st]||i["@@iterator"],typeof i=="function"?i:null)}var zt=Symbol.for("react.client.reference");function Et(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===zt?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case E:return"Fragment";case T:return"Profiler";case w:return"StrictMode";case L:return"Suspense";case U:return"SuspenseList";case J:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case D:return(i.displayName||"Context")+".Provider";case O:return(i._context.displayName||"Context")+".Consumer";case k:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case F:return s=i.displayName||null,s!==null?s:Et(i.type)||"Memo";case W:s=i._payload,i=i._init;try{return Et(i(s))}catch{}}return null}var Gt=Array.isArray,z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut={pending:!1,data:null,method:null,action:null},Nt=[],P=-1;function Q(i){return{current:i}}function it(i){0>P||(i.current=Nt[P],Nt[P]=null,P--)}function tt(i,s){P++,Nt[P]=i.current,i.current=s}var ft=Q(null),Ct=Q(null),mt=Q(null),Ht=Q(null);function Yt(i,s){switch(tt(mt,s),tt(Ct,i),tt(ft,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Vw(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Vw(s),i=Xw(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}it(ft),tt(ft,i)}function is(){it(ft),it(Ct),it(mt)}function Ns(i){i.memoizedState!==null&&tt(Ht,i);var s=ft.current,r=Xw(s,i.type);s!==r&&(tt(Ct,i),tt(ft,r))}function za(i){Ct.current===i&&(it(ft),it(Ct)),Ht.current===i&&(it(Ht),zh._currentValue=ut)}var ns=Object.prototype.hasOwnProperty,ko=h.unstable_scheduleCallback,qu=h.unstable_cancelCallback,dC=h.unstable_shouldYield,fC=h.unstable_requestPaint,ss=h.unstable_now,pC=h.unstable_getCurrentPriorityLevel,TA=h.unstable_ImmediatePriority,xA=h.unstable_UserBlockingPriority,tp=h.unstable_NormalPriority,gC=h.unstable_LowPriority,CA=h.unstable_IdlePriority,mC=h.log,yC=h.unstable_setDisableYieldValue,Vu=null,ji=null;function Ha(i){if(typeof mC=="function"&&yC(i),ji&&typeof ji.setStrictMode=="function")try{ji.setStrictMode(Vu,i)}catch{}}var Gi=Math.clz32?Math.clz32:AC,bC=Math.log,vC=Math.LN2;function AC(i){return i>>>=0,i===0?32:31-(bC(i)/vC|0)|0}var ep=256,ip=4194304;function Qr(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function np(i,s,r){var c=i.pendingLanes;if(c===0)return 0;var g=0,y=i.suspendedLanes,_=i.pingedLanes;i=i.warmLanes;var M=c&134217727;return M!==0?(c=M&~y,c!==0?g=Qr(c):(_&=M,_!==0?g=Qr(_):r||(r=M&~i,r!==0&&(g=Qr(r))))):(M=c&~y,M!==0?g=Qr(M):_!==0?g=Qr(_):r||(r=c&~i,r!==0&&(g=Qr(r)))),g===0?0:s!==0&&s!==g&&(s&y)===0&&(y=g&-g,r=s&-s,y>=r||y===32&&(r&4194048)!==0)?s:g}function Xu(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function SC(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RA(){var i=ep;return ep<<=1,(ep&4194048)===0&&(ep=256),i}function MA(){var i=ip;return ip<<=1,(ip&62914560)===0&&(ip=4194304),i}function Wm(i){for(var s=[],r=0;31>r;r++)s.push(i);return s}function Yu(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function EC(i,s,r,c,g,y){var _=i.pendingLanes;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=r,i.entangledLanes&=r,i.errorRecoveryDisabledLanes&=r,i.shellSuspendCounter=0;var M=i.entanglements,N=i.expirationTimes,j=i.hiddenUpdates;for(r=_&~r;0<r;){var Y=31-Gi(r),Z=1<<Y;M[Y]=0,N[Y]=-1;var G=j[Y];if(G!==null)for(j[Y]=null,Y=0;Y<G.length;Y++){var q=G[Y];q!==null&&(q.lane&=-536870913)}r&=~Z}c!==0&&DA(i,c,0),y!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=y&~(_&~s))}function DA(i,s,r){i.pendingLanes|=s,i.suspendedLanes&=~s;var c=31-Gi(s);i.entangledLanes|=s,i.entanglements[c]=i.entanglements[c]|1073741824|r&4194090}function OA(i,s){var r=i.entangledLanes|=s;for(i=i.entanglements;r;){var c=31-Gi(r),g=1<<c;g&s|i[c]&s&&(i[c]|=s),r&=~g}}function Qm(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Zm(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function LA(){var i=X.p;return i!==0?i:(i=window.event,i===void 0?32:h1(i.type))}function wC(i,s){var r=X.p;try{return X.p=i,s()}finally{X.p=r}}var Ua=Math.random().toString(36).slice(2),ci="__reactFiber$"+Ua,Mi="__reactProps$"+Ua,Po="__reactContainer$"+Ua,Jm="__reactEvents$"+Ua,_C="__reactListeners$"+Ua,TC="__reactHandles$"+Ua,NA="__reactResources$"+Ua,$u="__reactMarker$"+Ua;function ty(i){delete i[ci],delete i[Mi],delete i[Jm],delete i[_C],delete i[TC]}function Bo(i){var s=i[ci];if(s)return s;for(var r=i.parentNode;r;){if(s=r[Po]||r[ci]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(i=Ww(i);i!==null;){if(r=i[ci])return r;i=Ww(i)}return s}i=r,r=i.parentNode}return null}function zo(i){if(i=i[ci]||i[Po]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function Ku(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(n(33))}function Ho(i){var s=i[NA];return s||(s=i[NA]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ie(i){i[$u]=!0}var kA=new Set,PA={};function Zr(i,s){Uo(i,s),Uo(i+"Capture",s)}function Uo(i,s){for(PA[i]=s,i=0;i<s.length;i++)kA.add(s[i])}var xC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),BA={},zA={};function CC(i){return ns.call(zA,i)?!0:ns.call(BA,i)?!1:xC.test(i)?zA[i]=!0:(BA[i]=!0,!1)}function sp(i,s,r){if(CC(s))if(r===null)i.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+r)}}function ap(i,s,r){if(r===null)i.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+r)}}function ks(i,s,r,c){if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttributeNS(s,r,""+c)}}var ey,HA;function Fo(i){if(ey===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);ey=s&&s[1]||"",HA=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ey+i+HA}var iy=!1;function ny(i,s){if(!i||iy)return"";iy=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(q){var G=q}Reflect.construct(i,[],Z)}else{try{Z.call()}catch(q){G=q}i.call(Z.prototype)}}else{try{throw Error()}catch(q){G=q}(Z=i())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(q){if(q&&G&&typeof q.stack=="string")return[q.stack,G.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),_=y[0],M=y[1];if(_&&M){var N=_.split(`
`),j=M.split(`
`);for(g=c=0;c<N.length&&!N[c].includes("DetermineComponentFrameRoot");)c++;for(;g<j.length&&!j[g].includes("DetermineComponentFrameRoot");)g++;if(c===N.length||g===j.length)for(c=N.length-1,g=j.length-1;1<=c&&0<=g&&N[c]!==j[g];)g--;for(;1<=c&&0<=g;c--,g--)if(N[c]!==j[g]){if(c!==1||g!==1)do if(c--,g--,0>g||N[c]!==j[g]){var Y=`
`+N[c].replace(" at new "," at ");return i.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",i.displayName)),Y}while(1<=c&&0<=g);break}}}finally{iy=!1,Error.prepareStackTrace=r}return(r=i?i.displayName||i.name:"")?Fo(r):""}function RC(i){switch(i.tag){case 26:case 27:case 5:return Fo(i.type);case 16:return Fo("Lazy");case 13:return Fo("Suspense");case 19:return Fo("SuspenseList");case 0:case 15:return ny(i.type,!1);case 11:return ny(i.type.render,!1);case 1:return ny(i.type,!0);case 31:return Fo("Activity");default:return""}}function UA(i){try{var s="";do s+=RC(i),i=i.return;while(i);return s}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function mn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function FA(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function MC(i){var s=FA(i)?"checked":"value",r=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),c=""+i[s];if(!i.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var g=r.get,y=r.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return g.call(this)},set:function(_){c=""+_,y.call(this,_)}}),Object.defineProperty(i,s,{enumerable:r.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function rp(i){i._valueTracker||(i._valueTracker=MC(i))}function IA(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var r=s.getValue(),c="";return i&&(c=FA(i)?i.checked?"true":"false":i.value),i=c,i!==r?(s.setValue(i),!0):!1}function lp(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var DC=/[\n"\\]/g;function yn(i){return i.replace(DC,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function sy(i,s,r,c,g,y,_,M){i.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.type=_:i.removeAttribute("type"),s!=null?_==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+mn(s)):i.value!==""+mn(s)&&(i.value=""+mn(s)):_!=="submit"&&_!=="reset"||i.removeAttribute("value"),s!=null?ay(i,_,mn(s)):r!=null?ay(i,_,mn(r)):c!=null&&i.removeAttribute("value"),g==null&&y!=null&&(i.defaultChecked=!!y),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?i.name=""+mn(M):i.removeAttribute("name")}function jA(i,s,r,c,g,y,_,M){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),s!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||s!=null))return;r=r!=null?""+mn(r):"",s=s!=null?""+mn(s):r,M||s===i.value||(i.value=s),i.defaultValue=s}c=c??g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=M?i.checked:!!c,i.defaultChecked=!!c,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.name=_)}function ay(i,s,r){s==="number"&&lp(i.ownerDocument)===i||i.defaultValue===""+r||(i.defaultValue=""+r)}function Io(i,s,r,c){if(i=i.options,s){s={};for(var g=0;g<r.length;g++)s["$"+r[g]]=!0;for(r=0;r<i.length;r++)g=s.hasOwnProperty("$"+i[r].value),i[r].selected!==g&&(i[r].selected=g),g&&c&&(i[r].defaultSelected=!0)}else{for(r=""+mn(r),s=null,g=0;g<i.length;g++){if(i[g].value===r){i[g].selected=!0,c&&(i[g].defaultSelected=!0);return}s!==null||i[g].disabled||(s=i[g])}s!==null&&(s.selected=!0)}}function GA(i,s,r){if(s!=null&&(s=""+mn(s),s!==i.value&&(i.value=s),r==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=r!=null?""+mn(r):""}function qA(i,s,r,c){if(s==null){if(c!=null){if(r!=null)throw Error(n(92));if(Gt(c)){if(1<c.length)throw Error(n(93));c=c[0]}r=c}r==null&&(r=""),s=r}r=mn(s),i.defaultValue=r,c=i.textContent,c===r&&c!==""&&c!==null&&(i.value=c)}function jo(i,s){if(s){var r=i.firstChild;if(r&&r===i.lastChild&&r.nodeType===3){r.nodeValue=s;return}}i.textContent=s}var OC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function VA(i,s,r){var c=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":c?i.setProperty(s,r):typeof r!="number"||r===0||OC.has(s)?s==="float"?i.cssFloat=r:i[s]=(""+r).trim():i[s]=r+"px"}function XA(i,s,r){if(s!=null&&typeof s!="object")throw Error(n(62));if(i=i.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var g in s)c=s[g],s.hasOwnProperty(g)&&r[g]!==c&&VA(i,g,c)}else for(var y in s)s.hasOwnProperty(y)&&VA(i,y,s[y])}function ry(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var LC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),NC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function op(i){return NC.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var ly=null;function oy(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Go=null,qo=null;function YA(i){var s=zo(i);if(s&&(i=s.stateNode)){var r=i[Mi]||null;t:switch(i=s.stateNode,s.type){case"input":if(sy(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=i;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+yn(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var c=r[s];if(c!==i&&c.form===i.form){var g=c[Mi]||null;if(!g)throw Error(n(90));sy(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<r.length;s++)c=r[s],c.form===i.form&&IA(c)}break t;case"textarea":GA(i,r.value,r.defaultValue);break t;case"select":s=r.value,s!=null&&Io(i,!!r.multiple,s,!1)}}}var cy=!1;function $A(i,s,r){if(cy)return i(s,r);cy=!0;try{var c=i(s);return c}finally{if(cy=!1,(Go!==null||qo!==null)&&(Yp(),Go&&(s=Go,i=qo,qo=Go=null,YA(s),i)))for(s=0;s<i.length;s++)YA(i[s])}}function Wu(i,s){var r=i.stateNode;if(r===null)return null;var c=r[Mi]||null;if(c===null)return null;r=c[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break t;default:i=!1}if(i)return null;if(r&&typeof r!="function")throw Error(n(231,s,typeof r));return r}var Ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uy=!1;if(Ps)try{var Qu={};Object.defineProperty(Qu,"passive",{get:function(){uy=!0}}),window.addEventListener("test",Qu,Qu),window.removeEventListener("test",Qu,Qu)}catch{uy=!1}var Fa=null,hy=null,cp=null;function KA(){if(cp)return cp;var i,s=hy,r=s.length,c,g="value"in Fa?Fa.value:Fa.textContent,y=g.length;for(i=0;i<r&&s[i]===g[i];i++);var _=r-i;for(c=1;c<=_&&s[r-c]===g[y-c];c++);return cp=g.slice(i,1<c?1-c:void 0)}function up(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function hp(){return!0}function WA(){return!1}function Di(i){function s(r,c,g,y,_){this._reactName=r,this._targetInst=g,this.type=c,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var M in i)i.hasOwnProperty(M)&&(r=i[M],this[M]=r?r(y):y[M]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?hp:WA,this.isPropagationStopped=WA,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=hp)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=hp)},persist:function(){},isPersistent:hp}),s}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dp=Di(Jr),Zu=m({},Jr,{view:0,detail:0}),kC=Di(Zu),dy,fy,Ju,fp=m({},Zu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gy,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ju&&(Ju&&i.type==="mousemove"?(dy=i.screenX-Ju.screenX,fy=i.screenY-Ju.screenY):fy=dy=0,Ju=i),dy)},movementY:function(i){return"movementY"in i?i.movementY:fy}}),QA=Di(fp),PC=m({},fp,{dataTransfer:0}),BC=Di(PC),zC=m({},Zu,{relatedTarget:0}),py=Di(zC),HC=m({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),UC=Di(HC),FC=m({},Jr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),IC=Di(FC),jC=m({},Jr,{data:0}),ZA=Di(jC),GC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XC(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=VC[i])?!!s[i]:!1}function gy(){return XC}var YC=m({},Zu,{key:function(i){if(i.key){var s=GC[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=up(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?qC[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gy,charCode:function(i){return i.type==="keypress"?up(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?up(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),$C=Di(YC),KC=m({},fp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JA=Di(KC),WC=m({},Zu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gy}),QC=Di(WC),ZC=m({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),JC=Di(ZC),tR=m({},fp,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),eR=Di(tR),iR=m({},Jr,{newState:0,oldState:0}),nR=Di(iR),sR=[9,13,27,32],my=Ps&&"CompositionEvent"in window,th=null;Ps&&"documentMode"in document&&(th=document.documentMode);var aR=Ps&&"TextEvent"in window&&!th,tS=Ps&&(!my||th&&8<th&&11>=th),eS=" ",iS=!1;function nS(i,s){switch(i){case"keyup":return sR.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sS(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Vo=!1;function rR(i,s){switch(i){case"compositionend":return sS(s);case"keypress":return s.which!==32?null:(iS=!0,eS);case"textInput":return i=s.data,i===eS&&iS?null:i;default:return null}}function lR(i,s){if(Vo)return i==="compositionend"||!my&&nS(i,s)?(i=KA(),cp=hy=Fa=null,Vo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return tS&&s.locale!=="ko"?null:s.data;default:return null}}var oR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aS(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!oR[i.type]:s==="textarea"}function rS(i,s,r,c){Go?qo?qo.push(c):qo=[c]:Go=c,s=Jp(s,"onChange"),0<s.length&&(r=new dp("onChange","change",null,r,c),i.push({event:r,listeners:s}))}var eh=null,ih=null;function cR(i){Fw(i,0)}function pp(i){var s=Ku(i);if(IA(s))return i}function lS(i,s){if(i==="change")return s}var oS=!1;if(Ps){var yy;if(Ps){var by="oninput"in document;if(!by){var cS=document.createElement("div");cS.setAttribute("oninput","return;"),by=typeof cS.oninput=="function"}yy=by}else yy=!1;oS=yy&&(!document.documentMode||9<document.documentMode)}function uS(){eh&&(eh.detachEvent("onpropertychange",hS),ih=eh=null)}function hS(i){if(i.propertyName==="value"&&pp(ih)){var s=[];rS(s,ih,i,oy(i)),$A(cR,s)}}function uR(i,s,r){i==="focusin"?(uS(),eh=s,ih=r,eh.attachEvent("onpropertychange",hS)):i==="focusout"&&uS()}function hR(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return pp(ih)}function dR(i,s){if(i==="click")return pp(s)}function fR(i,s){if(i==="input"||i==="change")return pp(s)}function pR(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var qi=typeof Object.is=="function"?Object.is:pR;function nh(i,s){if(qi(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var r=Object.keys(i),c=Object.keys(s);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var g=r[c];if(!ns.call(s,g)||!qi(i[g],s[g]))return!1}return!0}function dS(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function fS(i,s){var r=dS(i);i=0;for(var c;r;){if(r.nodeType===3){if(c=i+r.textContent.length,i<=s&&c>=s)return{node:r,offset:s-i};i=c}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=dS(r)}}function pS(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?pS(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function gS(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=lp(i.document);s instanceof i.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)i=s.contentWindow;else break;s=lp(i.document)}return s}function vy(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var gR=Ps&&"documentMode"in document&&11>=document.documentMode,Xo=null,Ay=null,sh=null,Sy=!1;function mS(i,s,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Sy||Xo==null||Xo!==lp(c)||(c=Xo,"selectionStart"in c&&vy(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),sh&&nh(sh,c)||(sh=c,c=Jp(Ay,"onSelect"),0<c.length&&(s=new dp("onSelect","select",null,s,r),i.push({event:s,listeners:c}),s.target=Xo)))}function tl(i,s){var r={};return r[i.toLowerCase()]=s.toLowerCase(),r["Webkit"+i]="webkit"+s,r["Moz"+i]="moz"+s,r}var Yo={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionrun:tl("Transition","TransitionRun"),transitionstart:tl("Transition","TransitionStart"),transitioncancel:tl("Transition","TransitionCancel"),transitionend:tl("Transition","TransitionEnd")},Ey={},yS={};Ps&&(yS=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function el(i){if(Ey[i])return Ey[i];if(!Yo[i])return i;var s=Yo[i],r;for(r in s)if(s.hasOwnProperty(r)&&r in yS)return Ey[i]=s[r];return i}var bS=el("animationend"),vS=el("animationiteration"),AS=el("animationstart"),mR=el("transitionrun"),yR=el("transitionstart"),bR=el("transitioncancel"),SS=el("transitionend"),ES=new Map,wy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wy.push("scrollEnd");function Bn(i,s){ES.set(i,s),Zr(s,[i])}var wS=new WeakMap;function bn(i,s){if(typeof i=="object"&&i!==null){var r=wS.get(i);return r!==void 0?r:(s={value:i,source:s,stack:UA(s)},wS.set(i,s),s)}return{value:i,source:s,stack:UA(s)}}var vn=[],$o=0,_y=0;function gp(){for(var i=$o,s=_y=$o=0;s<i;){var r=vn[s];vn[s++]=null;var c=vn[s];vn[s++]=null;var g=vn[s];vn[s++]=null;var y=vn[s];if(vn[s++]=null,c!==null&&g!==null){var _=c.pending;_===null?g.next=g:(g.next=_.next,_.next=g),c.pending=g}y!==0&&_S(r,g,y)}}function mp(i,s,r,c){vn[$o++]=i,vn[$o++]=s,vn[$o++]=r,vn[$o++]=c,_y|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Ty(i,s,r,c){return mp(i,s,r,c),yp(i)}function Ko(i,s){return mp(i,null,null,s),yp(i)}function _S(i,s,r){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r);for(var g=!1,y=i.return;y!==null;)y.childLanes|=r,c=y.alternate,c!==null&&(c.childLanes|=r),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(g=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,g&&s!==null&&(g=31-Gi(r),i=y.hiddenUpdates,c=i[g],c===null?i[g]=[s]:c.push(s),s.lane=r|536870912),y):null}function yp(i){if(50<Mh)throw Mh=0,Ob=null,Error(n(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Wo={};function vR(i,s,r,c){this.tag=i,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(i,s,r,c){return new vR(i,s,r,c)}function xy(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Bs(i,s){var r=i.alternate;return r===null?(r=Vi(i.tag,s,i.key,i.mode),r.elementType=i.elementType,r.type=i.type,r.stateNode=i.stateNode,r.alternate=i,i.alternate=r):(r.pendingProps=s,r.type=i.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=i.flags&65011712,r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,s=i.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=i.sibling,r.index=i.index,r.ref=i.ref,r.refCleanup=i.refCleanup,r}function TS(i,s){i.flags&=65011714;var r=i.alternate;return r===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,i.type=r.type,s=r.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function bp(i,s,r,c,g,y){var _=0;if(c=i,typeof i=="function")xy(i)&&(_=1);else if(typeof i=="string")_=SM(i,r,ft.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case J:return i=Vi(31,r,s,g),i.elementType=J,i.lanes=y,i;case E:return il(r.children,g,y,s);case w:_=8,g|=24;break;case T:return i=Vi(12,r,s,g|2),i.elementType=T,i.lanes=y,i;case L:return i=Vi(13,r,s,g),i.elementType=L,i.lanes=y,i;case U:return i=Vi(19,r,s,g),i.elementType=U,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:case D:_=10;break t;case O:_=9;break t;case k:_=11;break t;case F:_=14;break t;case W:_=16,c=null;break t}_=29,r=Error(n(130,i===null?"null":typeof i,"")),c=null}return s=Vi(_,r,s,g),s.elementType=i,s.type=c,s.lanes=y,s}function il(i,s,r,c){return i=Vi(7,i,c,s),i.lanes=r,i}function Cy(i,s,r){return i=Vi(6,i,null,s),i.lanes=r,i}function Ry(i,s,r){return s=Vi(4,i.children!==null?i.children:[],i.key,s),s.lanes=r,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Qo=[],Zo=0,vp=null,Ap=0,An=[],Sn=0,nl=null,zs=1,Hs="";function sl(i,s){Qo[Zo++]=Ap,Qo[Zo++]=vp,vp=i,Ap=s}function xS(i,s,r){An[Sn++]=zs,An[Sn++]=Hs,An[Sn++]=nl,nl=i;var c=zs;i=Hs;var g=32-Gi(c)-1;c&=~(1<<g),r+=1;var y=32-Gi(s)+g;if(30<y){var _=g-g%5;y=(c&(1<<_)-1).toString(32),c>>=_,g-=_,zs=1<<32-Gi(s)+g|r<<g|c,Hs=y+i}else zs=1<<y|r<<g|c,Hs=i}function My(i){i.return!==null&&(sl(i,1),xS(i,1,0))}function Dy(i){for(;i===vp;)vp=Qo[--Zo],Qo[Zo]=null,Ap=Qo[--Zo],Qo[Zo]=null;for(;i===nl;)nl=An[--Sn],An[Sn]=null,Hs=An[--Sn],An[Sn]=null,zs=An[--Sn],An[Sn]=null}var vi=null,be=null,Vt=!1,al=null,as=!1,Oy=Error(n(519));function rl(i){var s=Error(n(418,""));throw lh(bn(s,i)),Oy}function CS(i){var s=i.stateNode,r=i.type,c=i.memoizedProps;switch(s[ci]=i,s[Mi]=c,r){case"dialog":Pt("cancel",s),Pt("close",s);break;case"iframe":case"object":case"embed":Pt("load",s);break;case"video":case"audio":for(r=0;r<Oh.length;r++)Pt(Oh[r],s);break;case"source":Pt("error",s);break;case"img":case"image":case"link":Pt("error",s),Pt("load",s);break;case"details":Pt("toggle",s);break;case"input":Pt("invalid",s),jA(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),rp(s);break;case"select":Pt("invalid",s);break;case"textarea":Pt("invalid",s),qA(s,c.value,c.defaultValue,c.children),rp(s)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||c.suppressHydrationWarning===!0||qw(s.textContent,r)?(c.popover!=null&&(Pt("beforetoggle",s),Pt("toggle",s)),c.onScroll!=null&&Pt("scroll",s),c.onScrollEnd!=null&&Pt("scrollend",s),c.onClick!=null&&(s.onclick=tg),s=!0):s=!1,s||rl(i)}function RS(i){for(vi=i.return;vi;)switch(vi.tag){case 5:case 13:as=!1;return;case 27:case 3:as=!0;return;default:vi=vi.return}}function ah(i){if(i!==vi)return!1;if(!Vt)return RS(i),Vt=!0,!1;var s=i.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=i.type,r=!(r!=="form"&&r!=="button")||Yb(i.type,i.memoizedProps)),r=!r),r&&be&&rl(i),RS(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(r=i.data,r==="/$"){if(s===0){be=Hn(i.nextSibling);break t}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++;i=i.nextSibling}be=null}}else s===27?(s=be,ir(i.type)?(i=Qb,Qb=null,be=i):be=s):be=vi?Hn(i.stateNode.nextSibling):null;return!0}function rh(){be=vi=null,Vt=!1}function MS(){var i=al;return i!==null&&(Ni===null?Ni=i:Ni.push.apply(Ni,i),al=null),i}function lh(i){al===null?al=[i]:al.push(i)}var Ly=Q(null),ll=null,Us=null;function Ia(i,s,r){tt(Ly,s._currentValue),s._currentValue=r}function Fs(i){i._currentValue=Ly.current,it(Ly)}function Ny(i,s,r){for(;i!==null;){var c=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),i===r)break;i=i.return}}function ky(i,s,r,c){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var y=g.dependencies;if(y!==null){var _=g.child;y=y.firstContext;t:for(;y!==null;){var M=y;y=g;for(var N=0;N<s.length;N++)if(M.context===s[N]){y.lanes|=r,M=y.alternate,M!==null&&(M.lanes|=r),Ny(y.return,r,i),c||(_=null);break t}y=M.next}}else if(g.tag===18){if(_=g.return,_===null)throw Error(n(341));_.lanes|=r,y=_.alternate,y!==null&&(y.lanes|=r),Ny(_,r,i),_=null}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===i){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}}function oh(i,s,r,c){i=null;for(var g=s,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var _=g.alternate;if(_===null)throw Error(n(387));if(_=_.memoizedProps,_!==null){var M=g.type;qi(g.pendingProps.value,_.value)||(i!==null?i.push(M):i=[M])}}else if(g===Ht.current){if(_=g.alternate,_===null)throw Error(n(387));_.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(zh):i=[zh])}g=g.return}i!==null&&ky(s,i,r,c),s.flags|=262144}function Sp(i){for(i=i.firstContext;i!==null;){if(!qi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ol(i){ll=i,Us=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ui(i){return DS(ll,i)}function Ep(i,s){return ll===null&&ol(i),DS(i,s)}function DS(i,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},Us===null){if(i===null)throw Error(n(308));Us=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Us=Us.next=s;return r}var AR=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(r,c){i.push(c)}};this.abort=function(){s.aborted=!0,i.forEach(function(r){return r()})}},SR=h.unstable_scheduleCallback,ER=h.unstable_NormalPriority,ke={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Py(){return{controller:new AR,data:new Map,refCount:0}}function ch(i){i.refCount--,i.refCount===0&&SR(ER,function(){i.controller.abort()})}var uh=null,By=0,Jo=0,tc=null;function wR(i,s){if(uh===null){var r=uh=[];By=0,Jo=Hb(),tc={status:"pending",value:void 0,then:function(c){r.push(c)}}}return By++,s.then(OS,OS),s}function OS(){if(--By===0&&uh!==null){tc!==null&&(tc.status="fulfilled");var i=uh;uh=null,Jo=0,tc=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function _R(i,s){var r=[],c={status:"pending",value:null,reason:null,then:function(g){r.push(g)}};return i.then(function(){c.status="fulfilled",c.value=s;for(var g=0;g<r.length;g++)(0,r[g])(s)},function(g){for(c.status="rejected",c.reason=g,g=0;g<r.length;g++)(0,r[g])(void 0)}),c}var LS=z.S;z.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&wR(i,s),LS!==null&&LS(i,s)};var cl=Q(null);function zy(){var i=cl.current;return i!==null?i:re.pooledCache}function wp(i,s){s===null?tt(cl,cl.current):tt(cl,s.pool)}function NS(){var i=zy();return i===null?null:{parent:ke._currentValue,pool:i}}var hh=Error(n(460)),kS=Error(n(474)),_p=Error(n(542)),Hy={then:function(){}};function PS(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Tp(){}function BS(i,s,r){switch(r=i[r],r===void 0?i.push(s):r!==s&&(s.then(Tp,Tp),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,HS(i),i;default:if(typeof s.status=="string")s.then(Tp,Tp);else{if(i=re,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=s,i.status="pending",i.then(function(c){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=c}},function(c){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,HS(i),i}throw dh=s,hh}}var dh=null;function zS(){if(dh===null)throw Error(n(459));var i=dh;return dh=null,i}function HS(i){if(i===hh||i===_p)throw Error(n(483))}var ja=!1;function Uy(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fy(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ga(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function qa(i,s,r){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Kt&2)!==0){var g=c.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),c.pending=s,s=yp(i),_S(i,null,r),s}return mp(i,c,s,r),yp(i)}function fh(i,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var c=s.lanes;c&=i.pendingLanes,r|=c,s.lanes=r,OA(i,r)}}function Iy(i,s){var r=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var g=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var _={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?g=y=_:y=y.next=_,r=r.next}while(r!==null);y===null?g=y=s:y=y.next=s}else g=y=s;r={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},i.updateQueue=r;return}i=r.lastBaseUpdate,i===null?r.firstBaseUpdate=s:i.next=s,r.lastBaseUpdate=s}var jy=!1;function ph(){if(jy){var i=tc;if(i!==null)throw i}}function gh(i,s,r,c){jy=!1;var g=i.updateQueue;ja=!1;var y=g.firstBaseUpdate,_=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var N=M,j=N.next;N.next=null,_===null?y=j:_.next=j,_=N;var Y=i.alternate;Y!==null&&(Y=Y.updateQueue,M=Y.lastBaseUpdate,M!==_&&(M===null?Y.firstBaseUpdate=j:M.next=j,Y.lastBaseUpdate=N))}if(y!==null){var Z=g.baseState;_=0,Y=j=N=null,M=y;do{var G=M.lane&-536870913,q=G!==M.lane;if(q?(Ft&G)===G:(c&G)===G){G!==0&&G===Jo&&(jy=!0),Y!==null&&(Y=Y.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});t:{var At=i,yt=M;G=s;var te=r;switch(yt.tag){case 1:if(At=yt.payload,typeof At=="function"){Z=At.call(te,Z,G);break t}Z=At;break t;case 3:At.flags=At.flags&-65537|128;case 0:if(At=yt.payload,G=typeof At=="function"?At.call(te,Z,G):At,G==null)break t;Z=m({},Z,G);break t;case 2:ja=!0}}G=M.callback,G!==null&&(i.flags|=64,q&&(i.flags|=8192),q=g.callbacks,q===null?g.callbacks=[G]:q.push(G))}else q={lane:G,tag:M.tag,payload:M.payload,callback:M.callback,next:null},Y===null?(j=Y=q,N=Z):Y=Y.next=q,_|=G;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;q=M,M=q.next,q.next=null,g.lastBaseUpdate=q,g.shared.pending=null}}while(!0);Y===null&&(N=Z),g.baseState=N,g.firstBaseUpdate=j,g.lastBaseUpdate=Y,y===null&&(g.shared.lanes=0),Za|=_,i.lanes=_,i.memoizedState=Z}}function US(i,s){if(typeof i!="function")throw Error(n(191,i));i.call(s)}function FS(i,s){var r=i.callbacks;if(r!==null)for(i.callbacks=null,i=0;i<r.length;i++)US(r[i],s)}var ec=Q(null),xp=Q(0);function IS(i,s){i=Ys,tt(xp,i),tt(ec,s),Ys=i|s.baseLanes}function Gy(){tt(xp,Ys),tt(ec,ec.current)}function qy(){Ys=xp.current,it(ec),it(xp)}var Va=0,Dt=null,Zt=null,Ce=null,Cp=!1,ic=!1,ul=!1,Rp=0,mh=0,nc=null,TR=0;function Ee(){throw Error(n(321))}function Vy(i,s){if(s===null)return!1;for(var r=0;r<s.length&&r<i.length;r++)if(!qi(i[r],s[r]))return!1;return!0}function Xy(i,s,r,c,g,y){return Va=y,Dt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,z.H=i===null||i.memoizedState===null?_E:TE,ul=!1,y=r(c,g),ul=!1,ic&&(y=GS(s,r,c,g)),jS(i),y}function jS(i){z.H=kp;var s=Zt!==null&&Zt.next!==null;if(Va=0,Ce=Zt=Dt=null,Cp=!1,mh=0,nc=null,s)throw Error(n(300));i===null||je||(i=i.dependencies,i!==null&&Sp(i)&&(je=!0))}function GS(i,s,r,c){Dt=i;var g=0;do{if(ic&&(nc=null),mh=0,ic=!1,25<=g)throw Error(n(301));if(g+=1,Ce=Zt=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}z.H=LR,y=s(r,c)}while(ic);return y}function xR(){var i=z.H,s=i.useState()[0];return s=typeof s.then=="function"?yh(s):s,i=i.useState()[0],(Zt!==null?Zt.memoizedState:null)!==i&&(Dt.flags|=1024),s}function Yy(){var i=Rp!==0;return Rp=0,i}function $y(i,s,r){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~r}function Ky(i){if(Cp){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Cp=!1}Va=0,Ce=Zt=Dt=null,ic=!1,mh=Rp=0,nc=null}function Oi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?Dt.memoizedState=Ce=i:Ce=Ce.next=i,Ce}function Re(){if(Zt===null){var i=Dt.alternate;i=i!==null?i.memoizedState:null}else i=Zt.next;var s=Ce===null?Dt.memoizedState:Ce.next;if(s!==null)Ce=s,Zt=i;else{if(i===null)throw Dt.alternate===null?Error(n(467)):Error(n(310));Zt=i,i={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},Ce===null?Dt.memoizedState=Ce=i:Ce=Ce.next=i}return Ce}function Wy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yh(i){var s=mh;return mh+=1,nc===null&&(nc=[]),i=BS(nc,i,s),s=Dt,(Ce===null?s.memoizedState:Ce.next)===null&&(s=s.alternate,z.H=s===null||s.memoizedState===null?_E:TE),i}function Mp(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return yh(i);if(i.$$typeof===D)return ui(i)}throw Error(n(438,String(i)))}function Qy(i){var s=null,r=Dt.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var c=Dt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Wy(),Dt.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(i),c=0;c<i;c++)r[c]=nt;return s.index++,r}function Is(i,s){return typeof s=="function"?s(i):s}function Dp(i){var s=Re();return Zy(s,Zt,i)}function Zy(i,s,r){var c=i.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var g=i.baseQueue,y=c.pending;if(y!==null){if(g!==null){var _=g.next;g.next=y.next,y.next=_}s.baseQueue=g=y,c.pending=null}if(y=i.baseState,g===null)i.memoizedState=y;else{s=g.next;var M=_=null,N=null,j=s,Y=!1;do{var Z=j.lane&-536870913;if(Z!==j.lane?(Ft&Z)===Z:(Va&Z)===Z){var G=j.revertLane;if(G===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),Z===Jo&&(Y=!0);else if((Va&G)===G){j=j.next,G===Jo&&(Y=!0);continue}else Z={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},N===null?(M=N=Z,_=y):N=N.next=Z,Dt.lanes|=G,Za|=G;Z=j.action,ul&&r(y,Z),y=j.hasEagerState?j.eagerState:r(y,Z)}else G={lane:Z,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},N===null?(M=N=G,_=y):N=N.next=G,Dt.lanes|=Z,Za|=Z;j=j.next}while(j!==null&&j!==s);if(N===null?_=y:N.next=M,!qi(y,i.memoizedState)&&(je=!0,Y&&(r=tc,r!==null)))throw r;i.memoizedState=y,i.baseState=_,i.baseQueue=N,c.lastRenderedState=y}return g===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Jy(i){var s=Re(),r=s.queue;if(r===null)throw Error(n(311));r.lastRenderedReducer=i;var c=r.dispatch,g=r.pending,y=s.memoizedState;if(g!==null){r.pending=null;var _=g=g.next;do y=i(y,_.action),_=_.next;while(_!==g);qi(y,s.memoizedState)||(je=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),r.lastRenderedState=y}return[y,c]}function qS(i,s,r){var c=Dt,g=Re(),y=Vt;if(y){if(r===void 0)throw Error(n(407));r=r()}else r=s();var _=!qi((Zt||g).memoizedState,r);_&&(g.memoizedState=r,je=!0),g=g.queue;var M=YS.bind(null,c,g,i);if(bh(2048,8,M,[i]),g.getSnapshot!==s||_||Ce!==null&&Ce.memoizedState.tag&1){if(c.flags|=2048,sc(9,Op(),XS.bind(null,c,g,r,s),null),re===null)throw Error(n(349));y||(Va&124)!==0||VS(c,s,r)}return r}function VS(i,s,r){i.flags|=16384,i={getSnapshot:s,value:r},s=Dt.updateQueue,s===null?(s=Wy(),Dt.updateQueue=s,s.stores=[i]):(r=s.stores,r===null?s.stores=[i]:r.push(i))}function XS(i,s,r,c){s.value=r,s.getSnapshot=c,$S(s)&&KS(i)}function YS(i,s,r){return r(function(){$S(s)&&KS(i)})}function $S(i){var s=i.getSnapshot;i=i.value;try{var r=s();return!qi(i,r)}catch{return!0}}function KS(i){var s=Ko(i,2);s!==null&&Wi(s,i,2)}function tb(i){var s=Oi();if(typeof i=="function"){var r=i;if(i=r(),ul){Ha(!0);try{r()}finally{Ha(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:i},s}function WS(i,s,r,c){return i.baseState=r,Zy(i,Zt,typeof c=="function"?c:Is)}function CR(i,s,r,c,g){if(Np(i))throw Error(n(485));if(i=s.action,i!==null){var y={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){y.listeners.push(_)}};z.T!==null?r(!0):y.isTransition=!1,c(y),r=s.pending,r===null?(y.next=s.pending=y,QS(s,y)):(y.next=r.next,s.pending=r.next=y)}}function QS(i,s){var r=s.action,c=s.payload,g=i.state;if(s.isTransition){var y=z.T,_={};z.T=_;try{var M=r(g,c),N=z.S;N!==null&&N(_,M),ZS(i,s,M)}catch(j){eb(i,s,j)}finally{z.T=y}}else try{y=r(g,c),ZS(i,s,y)}catch(j){eb(i,s,j)}}function ZS(i,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){JS(i,s,c)},function(c){return eb(i,s,c)}):JS(i,s,r)}function JS(i,s,r){s.status="fulfilled",s.value=r,tE(s),i.state=r,s=i.pending,s!==null&&(r=s.next,r===s?i.pending=null:(r=r.next,s.next=r,QS(i,r)))}function eb(i,s,r){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=r,tE(s),s=s.next;while(s!==c)}i.action=null}function tE(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function eE(i,s){return s}function iE(i,s){if(Vt){var r=re.formState;if(r!==null){t:{var c=Dt;if(Vt){if(be){e:{for(var g=be,y=as;g.nodeType!==8;){if(!y){g=null;break e}if(g=Hn(g.nextSibling),g===null){g=null;break e}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){be=Hn(g.nextSibling),c=g.data==="F!";break t}}rl(c)}c=!1}c&&(s=r[0])}}return r=Oi(),r.memoizedState=r.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eE,lastRenderedState:s},r.queue=c,r=SE.bind(null,Dt,c),c.dispatch=r,c=tb(!1),y=rb.bind(null,Dt,!1,c.queue),c=Oi(),g={state:s,dispatch:null,action:i,pending:null},c.queue=g,r=CR.bind(null,Dt,g,y,r),g.dispatch=r,c.memoizedState=i,[s,r,!1]}function nE(i){var s=Re();return sE(s,Zt,i)}function sE(i,s,r){if(s=Zy(i,s,eE)[0],i=Dp(Is)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=yh(s)}catch(_){throw _===hh?_p:_}else c=s;s=Re();var g=s.queue,y=g.dispatch;return r!==s.memoizedState&&(Dt.flags|=2048,sc(9,Op(),RR.bind(null,g,r),null)),[c,y,i]}function RR(i,s){i.action=s}function aE(i){var s=Re(),r=Zt;if(r!==null)return sE(s,r,i);Re(),s=s.memoizedState,r=Re();var c=r.queue.dispatch;return r.memoizedState=i,[s,c,!1]}function sc(i,s,r,c){return i={tag:i,create:r,deps:c,inst:s,next:null},s=Dt.updateQueue,s===null&&(s=Wy(),Dt.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=i.next=i:(c=r.next,r.next=i,i.next=c,s.lastEffect=i),i}function Op(){return{destroy:void 0,resource:void 0}}function rE(){return Re().memoizedState}function Lp(i,s,r,c){var g=Oi();c=c===void 0?null:c,Dt.flags|=i,g.memoizedState=sc(1|s,Op(),r,c)}function bh(i,s,r,c){var g=Re();c=c===void 0?null:c;var y=g.memoizedState.inst;Zt!==null&&c!==null&&Vy(c,Zt.memoizedState.deps)?g.memoizedState=sc(s,y,r,c):(Dt.flags|=i,g.memoizedState=sc(1|s,y,r,c))}function lE(i,s){Lp(8390656,8,i,s)}function oE(i,s){bh(2048,8,i,s)}function cE(i,s){return bh(4,2,i,s)}function uE(i,s){return bh(4,4,i,s)}function hE(i,s){if(typeof s=="function"){i=i();var r=s(i);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function dE(i,s,r){r=r!=null?r.concat([i]):null,bh(4,4,hE.bind(null,s,i),r)}function ib(){}function fE(i,s){var r=Re();s=s===void 0?null:s;var c=r.memoizedState;return s!==null&&Vy(s,c[1])?c[0]:(r.memoizedState=[i,s],i)}function pE(i,s){var r=Re();s=s===void 0?null:s;var c=r.memoizedState;if(s!==null&&Vy(s,c[1]))return c[0];if(c=i(),ul){Ha(!0);try{i()}finally{Ha(!1)}}return r.memoizedState=[c,s],c}function nb(i,s,r){return r===void 0||(Va&1073741824)!==0?i.memoizedState=s:(i.memoizedState=r,i=yw(),Dt.lanes|=i,Za|=i,r)}function gE(i,s,r,c){return qi(r,s)?r:ec.current!==null?(i=nb(i,r,c),qi(i,s)||(je=!0),i):(Va&42)===0?(je=!0,i.memoizedState=r):(i=yw(),Dt.lanes|=i,Za|=i,s)}function mE(i,s,r,c,g){var y=X.p;X.p=y!==0&&8>y?y:8;var _=z.T,M={};z.T=M,rb(i,!1,s,r);try{var N=g(),j=z.S;if(j!==null&&j(M,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Y=_R(N,c);vh(i,s,Y,Ki(i))}else vh(i,s,c,Ki(i))}catch(Z){vh(i,s,{then:function(){},status:"rejected",reason:Z},Ki())}finally{X.p=y,z.T=_}}function MR(){}function sb(i,s,r,c){if(i.tag!==5)throw Error(n(476));var g=yE(i).queue;mE(i,g,s,ut,r===null?MR:function(){return bE(i),r(c)})}function yE(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ut,baseState:ut,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:ut},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:r},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function bE(i){var s=yE(i).next.queue;vh(i,s,{},Ki())}function ab(){return ui(zh)}function vE(){return Re().memoizedState}function AE(){return Re().memoizedState}function DR(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var r=Ki();i=Ga(r);var c=qa(s,i,r);c!==null&&(Wi(c,s,r),fh(c,s,r)),s={cache:Py()},i.payload=s;return}s=s.return}}function OR(i,s,r){var c=Ki();r={lane:c,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Np(i)?EE(s,r):(r=Ty(i,s,r,c),r!==null&&(Wi(r,i,c),wE(r,s,c)))}function SE(i,s,r){var c=Ki();vh(i,s,r,c)}function vh(i,s,r,c){var g={lane:c,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Np(i))EE(s,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var _=s.lastRenderedState,M=y(_,r);if(g.hasEagerState=!0,g.eagerState=M,qi(M,_))return mp(i,s,g,0),re===null&&gp(),!1}catch{}finally{}if(r=Ty(i,s,g,c),r!==null)return Wi(r,i,c),wE(r,s,c),!0}return!1}function rb(i,s,r,c){if(c={lane:2,revertLane:Hb(),action:c,hasEagerState:!1,eagerState:null,next:null},Np(i)){if(s)throw Error(n(479))}else s=Ty(i,r,c,2),s!==null&&Wi(s,i,2)}function Np(i){var s=i.alternate;return i===Dt||s!==null&&s===Dt}function EE(i,s){ic=Cp=!0;var r=i.pending;r===null?s.next=s:(s.next=r.next,r.next=s),i.pending=s}function wE(i,s,r){if((r&4194048)!==0){var c=s.lanes;c&=i.pendingLanes,r|=c,s.lanes=r,OA(i,r)}}var kp={readContext:ui,use:Mp,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useLayoutEffect:Ee,useInsertionEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useSyncExternalStore:Ee,useId:Ee,useHostTransitionStatus:Ee,useFormState:Ee,useActionState:Ee,useOptimistic:Ee,useMemoCache:Ee,useCacheRefresh:Ee},_E={readContext:ui,use:Mp,useCallback:function(i,s){return Oi().memoizedState=[i,s===void 0?null:s],i},useContext:ui,useEffect:lE,useImperativeHandle:function(i,s,r){r=r!=null?r.concat([i]):null,Lp(4194308,4,hE.bind(null,s,i),r)},useLayoutEffect:function(i,s){return Lp(4194308,4,i,s)},useInsertionEffect:function(i,s){Lp(4,2,i,s)},useMemo:function(i,s){var r=Oi();s=s===void 0?null:s;var c=i();if(ul){Ha(!0);try{i()}finally{Ha(!1)}}return r.memoizedState=[c,s],c},useReducer:function(i,s,r){var c=Oi();if(r!==void 0){var g=r(s);if(ul){Ha(!0);try{r(s)}finally{Ha(!1)}}}else g=s;return c.memoizedState=c.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},c.queue=i,i=i.dispatch=OR.bind(null,Dt,i),[c.memoizedState,i]},useRef:function(i){var s=Oi();return i={current:i},s.memoizedState=i},useState:function(i){i=tb(i);var s=i.queue,r=SE.bind(null,Dt,s);return s.dispatch=r,[i.memoizedState,r]},useDebugValue:ib,useDeferredValue:function(i,s){var r=Oi();return nb(r,i,s)},useTransition:function(){var i=tb(!1);return i=mE.bind(null,Dt,i.queue,!0,!1),Oi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,r){var c=Dt,g=Oi();if(Vt){if(r===void 0)throw Error(n(407));r=r()}else{if(r=s(),re===null)throw Error(n(349));(Ft&124)!==0||VS(c,s,r)}g.memoizedState=r;var y={value:r,getSnapshot:s};return g.queue=y,lE(YS.bind(null,c,y,i),[i]),c.flags|=2048,sc(9,Op(),XS.bind(null,c,y,r,s),null),r},useId:function(){var i=Oi(),s=re.identifierPrefix;if(Vt){var r=Hs,c=zs;r=(c&~(1<<32-Gi(c)-1)).toString(32)+r,s="«"+s+"R"+r,r=Rp++,0<r&&(s+="H"+r.toString(32)),s+="»"}else r=TR++,s="«"+s+"r"+r.toString(32)+"»";return i.memoizedState=s},useHostTransitionStatus:ab,useFormState:iE,useActionState:iE,useOptimistic:function(i){var s=Oi();s.memoizedState=s.baseState=i;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=rb.bind(null,Dt,!0,r),r.dispatch=s,[i,s]},useMemoCache:Qy,useCacheRefresh:function(){return Oi().memoizedState=DR.bind(null,Dt)}},TE={readContext:ui,use:Mp,useCallback:fE,useContext:ui,useEffect:oE,useImperativeHandle:dE,useInsertionEffect:cE,useLayoutEffect:uE,useMemo:pE,useReducer:Dp,useRef:rE,useState:function(){return Dp(Is)},useDebugValue:ib,useDeferredValue:function(i,s){var r=Re();return gE(r,Zt.memoizedState,i,s)},useTransition:function(){var i=Dp(Is)[0],s=Re().memoizedState;return[typeof i=="boolean"?i:yh(i),s]},useSyncExternalStore:qS,useId:vE,useHostTransitionStatus:ab,useFormState:nE,useActionState:nE,useOptimistic:function(i,s){var r=Re();return WS(r,Zt,i,s)},useMemoCache:Qy,useCacheRefresh:AE},LR={readContext:ui,use:Mp,useCallback:fE,useContext:ui,useEffect:oE,useImperativeHandle:dE,useInsertionEffect:cE,useLayoutEffect:uE,useMemo:pE,useReducer:Jy,useRef:rE,useState:function(){return Jy(Is)},useDebugValue:ib,useDeferredValue:function(i,s){var r=Re();return Zt===null?nb(r,i,s):gE(r,Zt.memoizedState,i,s)},useTransition:function(){var i=Jy(Is)[0],s=Re().memoizedState;return[typeof i=="boolean"?i:yh(i),s]},useSyncExternalStore:qS,useId:vE,useHostTransitionStatus:ab,useFormState:aE,useActionState:aE,useOptimistic:function(i,s){var r=Re();return Zt!==null?WS(r,Zt,i,s):(r.baseState=i,[i,r.queue.dispatch])},useMemoCache:Qy,useCacheRefresh:AE},ac=null,Ah=0;function Pp(i){var s=Ah;return Ah+=1,ac===null&&(ac=[]),BS(ac,i,s)}function Sh(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Bp(i,s){throw s.$$typeof===b?Error(n(525)):(i=Object.prototype.toString.call(s),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function xE(i){var s=i._init;return s(i._payload)}function CE(i){function s(H,B){if(i){var I=H.deletions;I===null?(H.deletions=[B],H.flags|=16):I.push(B)}}function r(H,B){if(!i)return null;for(;B!==null;)s(H,B),B=B.sibling;return null}function c(H){for(var B=new Map;H!==null;)H.key!==null?B.set(H.key,H):B.set(H.index,H),H=H.sibling;return B}function g(H,B){return H=Bs(H,B),H.index=0,H.sibling=null,H}function y(H,B,I){return H.index=I,i?(I=H.alternate,I!==null?(I=I.index,I<B?(H.flags|=67108866,B):I):(H.flags|=67108866,B)):(H.flags|=1048576,B)}function _(H){return i&&H.alternate===null&&(H.flags|=67108866),H}function M(H,B,I,$){return B===null||B.tag!==6?(B=Cy(I,H.mode,$),B.return=H,B):(B=g(B,I),B.return=H,B)}function N(H,B,I,$){var ct=I.type;return ct===E?Y(H,B,I.props.children,$,I.key):B!==null&&(B.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===W&&xE(ct)===B.type)?(B=g(B,I.props),Sh(B,I),B.return=H,B):(B=bp(I.type,I.key,I.props,null,H.mode,$),Sh(B,I),B.return=H,B)}function j(H,B,I,$){return B===null||B.tag!==4||B.stateNode.containerInfo!==I.containerInfo||B.stateNode.implementation!==I.implementation?(B=Ry(I,H.mode,$),B.return=H,B):(B=g(B,I.children||[]),B.return=H,B)}function Y(H,B,I,$,ct){return B===null||B.tag!==7?(B=il(I,H.mode,$,ct),B.return=H,B):(B=g(B,I),B.return=H,B)}function Z(H,B,I){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Cy(""+B,H.mode,I),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case v:return I=bp(B.type,B.key,B.props,null,H.mode,I),Sh(I,B),I.return=H,I;case A:return B=Ry(B,H.mode,I),B.return=H,B;case W:var $=B._init;return B=$(B._payload),Z(H,B,I)}if(Gt(B)||St(B))return B=il(B,H.mode,I,null),B.return=H,B;if(typeof B.then=="function")return Z(H,Pp(B),I);if(B.$$typeof===D)return Z(H,Ep(H,B),I);Bp(H,B)}return null}function G(H,B,I,$){var ct=B!==null?B.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return ct!==null?null:M(H,B,""+I,$);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case v:return I.key===ct?N(H,B,I,$):null;case A:return I.key===ct?j(H,B,I,$):null;case W:return ct=I._init,I=ct(I._payload),G(H,B,I,$)}if(Gt(I)||St(I))return ct!==null?null:Y(H,B,I,$,null);if(typeof I.then=="function")return G(H,B,Pp(I),$);if(I.$$typeof===D)return G(H,B,Ep(H,I),$);Bp(H,I)}return null}function q(H,B,I,$,ct){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return H=H.get(I)||null,M(B,H,""+$,ct);if(typeof $=="object"&&$!==null){switch($.$$typeof){case v:return H=H.get($.key===null?I:$.key)||null,N(B,H,$,ct);case A:return H=H.get($.key===null?I:$.key)||null,j(B,H,$,ct);case W:var Ot=$._init;return $=Ot($._payload),q(H,B,I,$,ct)}if(Gt($)||St($))return H=H.get(I)||null,Y(B,H,$,ct,null);if(typeof $.then=="function")return q(H,B,I,Pp($),ct);if($.$$typeof===D)return q(H,B,I,Ep(B,$),ct);Bp(B,$)}return null}function At(H,B,I,$){for(var ct=null,Ot=null,pt=B,vt=B=0,qe=null;pt!==null&&vt<I.length;vt++){pt.index>vt?(qe=pt,pt=null):qe=pt.sibling;var qt=G(H,pt,I[vt],$);if(qt===null){pt===null&&(pt=qe);break}i&&pt&&qt.alternate===null&&s(H,pt),B=y(qt,B,vt),Ot===null?ct=qt:Ot.sibling=qt,Ot=qt,pt=qe}if(vt===I.length)return r(H,pt),Vt&&sl(H,vt),ct;if(pt===null){for(;vt<I.length;vt++)pt=Z(H,I[vt],$),pt!==null&&(B=y(pt,B,vt),Ot===null?ct=pt:Ot.sibling=pt,Ot=pt);return Vt&&sl(H,vt),ct}for(pt=c(pt);vt<I.length;vt++)qe=q(pt,H,vt,I[vt],$),qe!==null&&(i&&qe.alternate!==null&&pt.delete(qe.key===null?vt:qe.key),B=y(qe,B,vt),Ot===null?ct=qe:Ot.sibling=qe,Ot=qe);return i&&pt.forEach(function(lr){return s(H,lr)}),Vt&&sl(H,vt),ct}function yt(H,B,I,$){if(I==null)throw Error(n(151));for(var ct=null,Ot=null,pt=B,vt=B=0,qe=null,qt=I.next();pt!==null&&!qt.done;vt++,qt=I.next()){pt.index>vt?(qe=pt,pt=null):qe=pt.sibling;var lr=G(H,pt,qt.value,$);if(lr===null){pt===null&&(pt=qe);break}i&&pt&&lr.alternate===null&&s(H,pt),B=y(lr,B,vt),Ot===null?ct=lr:Ot.sibling=lr,Ot=lr,pt=qe}if(qt.done)return r(H,pt),Vt&&sl(H,vt),ct;if(pt===null){for(;!qt.done;vt++,qt=I.next())qt=Z(H,qt.value,$),qt!==null&&(B=y(qt,B,vt),Ot===null?ct=qt:Ot.sibling=qt,Ot=qt);return Vt&&sl(H,vt),ct}for(pt=c(pt);!qt.done;vt++,qt=I.next())qt=q(pt,H,vt,qt.value,$),qt!==null&&(i&&qt.alternate!==null&&pt.delete(qt.key===null?vt:qt.key),B=y(qt,B,vt),Ot===null?ct=qt:Ot.sibling=qt,Ot=qt);return i&&pt.forEach(function(NM){return s(H,NM)}),Vt&&sl(H,vt),ct}function te(H,B,I,$){if(typeof I=="object"&&I!==null&&I.type===E&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case v:t:{for(var ct=I.key;B!==null;){if(B.key===ct){if(ct=I.type,ct===E){if(B.tag===7){r(H,B.sibling),$=g(B,I.props.children),$.return=H,H=$;break t}}else if(B.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===W&&xE(ct)===B.type){r(H,B.sibling),$=g(B,I.props),Sh($,I),$.return=H,H=$;break t}r(H,B);break}else s(H,B);B=B.sibling}I.type===E?($=il(I.props.children,H.mode,$,I.key),$.return=H,H=$):($=bp(I.type,I.key,I.props,null,H.mode,$),Sh($,I),$.return=H,H=$)}return _(H);case A:t:{for(ct=I.key;B!==null;){if(B.key===ct)if(B.tag===4&&B.stateNode.containerInfo===I.containerInfo&&B.stateNode.implementation===I.implementation){r(H,B.sibling),$=g(B,I.children||[]),$.return=H,H=$;break t}else{r(H,B);break}else s(H,B);B=B.sibling}$=Ry(I,H.mode,$),$.return=H,H=$}return _(H);case W:return ct=I._init,I=ct(I._payload),te(H,B,I,$)}if(Gt(I))return At(H,B,I,$);if(St(I)){if(ct=St(I),typeof ct!="function")throw Error(n(150));return I=ct.call(I),yt(H,B,I,$)}if(typeof I.then=="function")return te(H,B,Pp(I),$);if(I.$$typeof===D)return te(H,B,Ep(H,I),$);Bp(H,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,B!==null&&B.tag===6?(r(H,B.sibling),$=g(B,I),$.return=H,H=$):(r(H,B),$=Cy(I,H.mode,$),$.return=H,H=$),_(H)):r(H,B)}return function(H,B,I,$){try{Ah=0;var ct=te(H,B,I,$);return ac=null,ct}catch(pt){if(pt===hh||pt===_p)throw pt;var Ot=Vi(29,pt,null,H.mode);return Ot.lanes=$,Ot.return=H,Ot}finally{}}}var rc=CE(!0),RE=CE(!1),En=Q(null),rs=null;function Xa(i){var s=i.alternate;tt(Pe,Pe.current&1),tt(En,i),rs===null&&(s===null||ec.current!==null||s.memoizedState!==null)&&(rs=i)}function ME(i){if(i.tag===22){if(tt(Pe,Pe.current),tt(En,i),rs===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(rs=i)}}else Ya()}function Ya(){tt(Pe,Pe.current),tt(En,En.current)}function js(i){it(En),rs===i&&(rs=null),it(Pe)}var Pe=Q(0);function zp(i){for(var s=i;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||Wb(r)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function lb(i,s,r,c){s=i.memoizedState,r=r(c,s),r=r==null?s:m({},s,r),i.memoizedState=r,i.lanes===0&&(i.updateQueue.baseState=r)}var ob={enqueueSetState:function(i,s,r){i=i._reactInternals;var c=Ki(),g=Ga(c);g.payload=s,r!=null&&(g.callback=r),s=qa(i,g,c),s!==null&&(Wi(s,i,c),fh(s,i,c))},enqueueReplaceState:function(i,s,r){i=i._reactInternals;var c=Ki(),g=Ga(c);g.tag=1,g.payload=s,r!=null&&(g.callback=r),s=qa(i,g,c),s!==null&&(Wi(s,i,c),fh(s,i,c))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var r=Ki(),c=Ga(r);c.tag=2,s!=null&&(c.callback=s),s=qa(i,c,r),s!==null&&(Wi(s,i,r),fh(s,i,r))}};function DE(i,s,r,c,g,y,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,y,_):s.prototype&&s.prototype.isPureReactComponent?!nh(r,c)||!nh(g,y):!0}function OE(i,s,r,c){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,c),s.state!==i&&ob.enqueueReplaceState(s,s.state,null)}function hl(i,s){var r=s;if("ref"in s){r={};for(var c in s)c!=="ref"&&(r[c]=s[c])}if(i=i.defaultProps){r===s&&(r=m({},r));for(var g in i)r[g]===void 0&&(r[g]=i[g])}return r}var Hp=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function LE(i){Hp(i)}function NE(i){console.error(i)}function kE(i){Hp(i)}function Up(i,s){try{var r=i.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function PE(i,s,r){try{var c=i.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function cb(i,s,r){return r=Ga(r),r.tag=3,r.payload={element:null},r.callback=function(){Up(i,s)},r}function BE(i){return i=Ga(i),i.tag=3,i}function zE(i,s,r,c){var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var y=c.value;i.payload=function(){return g(y)},i.callback=function(){PE(s,r,c)}}var _=r.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){PE(s,r,c),typeof g!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var M=c.stack;this.componentDidCatch(c.value,{componentStack:M!==null?M:""})})}function NR(i,s,r,c,g){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=r.alternate,s!==null&&oh(s,r,g,!0),r=En.current,r!==null){switch(r.tag){case 13:return rs===null?Nb():r.alternate===null&&ve===0&&(ve=3),r.flags&=-257,r.flags|=65536,r.lanes=g,c===Hy?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([c]):s.add(c),Pb(i,c,g)),!1;case 22:return r.flags|=65536,c===Hy?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([c]):r.add(c)),Pb(i,c,g)),!1}throw Error(n(435,r.tag))}return Pb(i,c,g),Nb(),!1}if(Vt)return s=En.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,c!==Oy&&(i=Error(n(422),{cause:c}),lh(bn(i,r)))):(c!==Oy&&(s=Error(n(423),{cause:c}),lh(bn(s,r))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,c=bn(c,r),g=cb(i.stateNode,c,g),Iy(i,g),ve!==4&&(ve=2)),!1;var y=Error(n(520),{cause:c});if(y=bn(y,r),Rh===null?Rh=[y]:Rh.push(y),ve!==4&&(ve=2),s===null)return!0;c=bn(c,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,i=g&-g,r.lanes|=i,i=cb(r.stateNode,c,i),Iy(r,i),!1;case 1:if(s=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ja===null||!Ja.has(y))))return r.flags|=65536,g&=-g,r.lanes|=g,g=BE(g),zE(g,i,r,c),Iy(r,g),!1}r=r.return}while(r!==null);return!1}var HE=Error(n(461)),je=!1;function Qe(i,s,r,c){s.child=i===null?RE(s,null,r,c):rc(s,i.child,r,c)}function UE(i,s,r,c,g){r=r.render;var y=s.ref;if("ref"in c){var _={};for(var M in c)M!=="ref"&&(_[M]=c[M])}else _=c;return ol(s),c=Xy(i,s,r,_,y,g),M=Yy(),i!==null&&!je?($y(i,s,g),Gs(i,s,g)):(Vt&&M&&My(s),s.flags|=1,Qe(i,s,c,g),s.child)}function FE(i,s,r,c,g){if(i===null){var y=r.type;return typeof y=="function"&&!xy(y)&&y.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=y,IE(i,s,y,c,g)):(i=bp(r.type,null,c,s,s.mode,g),i.ref=s.ref,i.return=s,s.child=i)}if(y=i.child,!yb(i,g)){var _=y.memoizedProps;if(r=r.compare,r=r!==null?r:nh,r(_,c)&&i.ref===s.ref)return Gs(i,s,g)}return s.flags|=1,i=Bs(y,c),i.ref=s.ref,i.return=s,s.child=i}function IE(i,s,r,c,g){if(i!==null){var y=i.memoizedProps;if(nh(y,c)&&i.ref===s.ref)if(je=!1,s.pendingProps=c=y,yb(i,g))(i.flags&131072)!==0&&(je=!0);else return s.lanes=i.lanes,Gs(i,s,g)}return ub(i,s,r,c,g)}function jE(i,s,r){var c=s.pendingProps,g=c.children,y=i!==null?i.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=y!==null?y.baseLanes|r:r,i!==null){for(g=s.child=i.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;s.childLanes=y&~c}else s.childLanes=0,s.child=null;return GE(i,s,c,r)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&wp(s,y!==null?y.cachePool:null),y!==null?IS(s,y):Gy(),ME(s);else return s.lanes=s.childLanes=536870912,GE(i,s,y!==null?y.baseLanes|r:r,r)}else y!==null?(wp(s,y.cachePool),IS(s,y),Ya(),s.memoizedState=null):(i!==null&&wp(s,null),Gy(),Ya());return Qe(i,s,g,r),s.child}function GE(i,s,r,c){var g=zy();return g=g===null?null:{parent:ke._currentValue,pool:g},s.memoizedState={baseLanes:r,cachePool:g},i!==null&&wp(s,null),Gy(),ME(s),i!==null&&oh(i,s,c,!0),null}function Fp(i,s){var r=s.ref;if(r===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(n(284));(i===null||i.ref!==r)&&(s.flags|=4194816)}}function ub(i,s,r,c,g){return ol(s),r=Xy(i,s,r,c,void 0,g),c=Yy(),i!==null&&!je?($y(i,s,g),Gs(i,s,g)):(Vt&&c&&My(s),s.flags|=1,Qe(i,s,r,g),s.child)}function qE(i,s,r,c,g,y){return ol(s),s.updateQueue=null,r=GS(s,c,r,g),jS(i),c=Yy(),i!==null&&!je?($y(i,s,y),Gs(i,s,y)):(Vt&&c&&My(s),s.flags|=1,Qe(i,s,r,y),s.child)}function VE(i,s,r,c,g){if(ol(s),s.stateNode===null){var y=Wo,_=r.contextType;typeof _=="object"&&_!==null&&(y=ui(_)),y=new r(c,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=ob,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=c,y.state=s.memoizedState,y.refs={},Uy(s),_=r.contextType,y.context=typeof _=="object"&&_!==null?ui(_):Wo,y.state=s.memoizedState,_=r.getDerivedStateFromProps,typeof _=="function"&&(lb(s,r,_,c),y.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(_=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),_!==y.state&&ob.enqueueReplaceState(y,y.state,null),gh(s,c,y,g),ph(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(i===null){y=s.stateNode;var M=s.memoizedProps,N=hl(r,M);y.props=N;var j=y.context,Y=r.contextType;_=Wo,typeof Y=="object"&&Y!==null&&(_=ui(Y));var Z=r.getDerivedStateFromProps;Y=typeof Z=="function"||typeof y.getSnapshotBeforeUpdate=="function",M=s.pendingProps!==M,Y||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(M||j!==_)&&OE(s,y,c,_),ja=!1;var G=s.memoizedState;y.state=G,gh(s,c,y,g),ph(),j=s.memoizedState,M||G!==j||ja?(typeof Z=="function"&&(lb(s,r,Z,c),j=s.memoizedState),(N=ja||DE(s,r,N,c,G,j,_))?(Y||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=j),y.props=c,y.state=j,y.context=_,c=N):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{y=s.stateNode,Fy(i,s),_=s.memoizedProps,Y=hl(r,_),y.props=Y,Z=s.pendingProps,G=y.context,j=r.contextType,N=Wo,typeof j=="object"&&j!==null&&(N=ui(j)),M=r.getDerivedStateFromProps,(j=typeof M=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==Z||G!==N)&&OE(s,y,c,N),ja=!1,G=s.memoizedState,y.state=G,gh(s,c,y,g),ph();var q=s.memoizedState;_!==Z||G!==q||ja||i!==null&&i.dependencies!==null&&Sp(i.dependencies)?(typeof M=="function"&&(lb(s,r,M,c),q=s.memoizedState),(Y=ja||DE(s,r,Y,c,G,q,N)||i!==null&&i.dependencies!==null&&Sp(i.dependencies))?(j||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,q,N),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,q,N)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===i.memoizedProps&&G===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&G===i.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=q),y.props=c,y.state=q,y.context=N,c=Y):(typeof y.componentDidUpdate!="function"||_===i.memoizedProps&&G===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&G===i.memoizedState||(s.flags|=1024),c=!1)}return y=c,Fp(i,s),c=(s.flags&128)!==0,y||c?(y=s.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,i!==null&&c?(s.child=rc(s,i.child,null,g),s.child=rc(s,null,r,g)):Qe(i,s,r,g),s.memoizedState=y.state,i=s.child):i=Gs(i,s,g),i}function XE(i,s,r,c){return rh(),s.flags|=256,Qe(i,s,r,c),s.child}var hb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function db(i){return{baseLanes:i,cachePool:NS()}}function fb(i,s,r){return i=i!==null?i.childLanes&~r:0,s&&(i|=wn),i}function YE(i,s,r){var c=s.pendingProps,g=!1,y=(s.flags&128)!==0,_;if((_=y)||(_=i!==null&&i.memoizedState===null?!1:(Pe.current&2)!==0),_&&(g=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,i===null){if(Vt){if(g?Xa(s):Ya(),Vt){var M=be,N;if(N=M){t:{for(N=M,M=as;N.nodeType!==8;){if(!M){M=null;break t}if(N=Hn(N.nextSibling),N===null){M=null;break t}}M=N}M!==null?(s.memoizedState={dehydrated:M,treeContext:nl!==null?{id:zs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},N=Vi(18,null,null,0),N.stateNode=M,N.return=s,s.child=N,vi=s,be=null,N=!0):N=!1}N||rl(s)}if(M=s.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return Wb(M)?s.lanes=32:s.lanes=536870912,null;js(s)}return M=c.children,c=c.fallback,g?(Ya(),g=s.mode,M=Ip({mode:"hidden",children:M},g),c=il(c,g,r,null),M.return=s,c.return=s,M.sibling=c,s.child=M,g=s.child,g.memoizedState=db(r),g.childLanes=fb(i,_,r),s.memoizedState=hb,c):(Xa(s),pb(s,M))}if(N=i.memoizedState,N!==null&&(M=N.dehydrated,M!==null)){if(y)s.flags&256?(Xa(s),s.flags&=-257,s=gb(i,s,r)):s.memoizedState!==null?(Ya(),s.child=i.child,s.flags|=128,s=null):(Ya(),g=c.fallback,M=s.mode,c=Ip({mode:"visible",children:c.children},M),g=il(g,M,r,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,rc(s,i.child,null,r),c=s.child,c.memoizedState=db(r),c.childLanes=fb(i,_,r),s.memoizedState=hb,s=g);else if(Xa(s),Wb(M)){if(_=M.nextSibling&&M.nextSibling.dataset,_)var j=_.dgst;_=j,c=Error(n(419)),c.stack="",c.digest=_,lh({value:c,source:null,stack:null}),s=gb(i,s,r)}else if(je||oh(i,s,r,!1),_=(r&i.childLanes)!==0,je||_){if(_=re,_!==null&&(c=r&-r,c=(c&42)!==0?1:Qm(c),c=(c&(_.suspendedLanes|r))!==0?0:c,c!==0&&c!==N.retryLane))throw N.retryLane=c,Ko(i,c),Wi(_,i,c),HE;M.data==="$?"||Nb(),s=gb(i,s,r)}else M.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=N.treeContext,be=Hn(M.nextSibling),vi=s,Vt=!0,al=null,as=!1,i!==null&&(An[Sn++]=zs,An[Sn++]=Hs,An[Sn++]=nl,zs=i.id,Hs=i.overflow,nl=s),s=pb(s,c.children),s.flags|=4096);return s}return g?(Ya(),g=c.fallback,M=s.mode,N=i.child,j=N.sibling,c=Bs(N,{mode:"hidden",children:c.children}),c.subtreeFlags=N.subtreeFlags&65011712,j!==null?g=Bs(j,g):(g=il(g,M,r,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,M=i.child.memoizedState,M===null?M=db(r):(N=M.cachePool,N!==null?(j=ke._currentValue,N=N.parent!==j?{parent:j,pool:j}:N):N=NS(),M={baseLanes:M.baseLanes|r,cachePool:N}),g.memoizedState=M,g.childLanes=fb(i,_,r),s.memoizedState=hb,c):(Xa(s),r=i.child,i=r.sibling,r=Bs(r,{mode:"visible",children:c.children}),r.return=s,r.sibling=null,i!==null&&(_=s.deletions,_===null?(s.deletions=[i],s.flags|=16):_.push(i)),s.child=r,s.memoizedState=null,r)}function pb(i,s){return s=Ip({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Ip(i,s){return i=Vi(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function gb(i,s,r){return rc(s,i.child,null,r),i=pb(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function $E(i,s,r){i.lanes|=s;var c=i.alternate;c!==null&&(c.lanes|=s),Ny(i.return,s,r)}function mb(i,s,r,c,g){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:g}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=r,y.tailMode=g)}function KE(i,s,r){var c=s.pendingProps,g=c.revealOrder,y=c.tail;if(Qe(i,s,c.children,r),c=Pe.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&$E(i,r,s);else if(i.tag===19)$E(i,r,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(tt(Pe,c),g){case"forwards":for(r=s.child,g=null;r!==null;)i=r.alternate,i!==null&&zp(i)===null&&(g=r),r=r.sibling;r=g,r===null?(g=s.child,s.child=null):(g=r.sibling,r.sibling=null),mb(s,!1,g,r,y);break;case"backwards":for(r=null,g=s.child,s.child=null;g!==null;){if(i=g.alternate,i!==null&&zp(i)===null){s.child=g;break}i=g.sibling,g.sibling=r,r=g,g=i}mb(s,!0,r,null,y);break;case"together":mb(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Gs(i,s,r){if(i!==null&&(s.dependencies=i.dependencies),Za|=s.lanes,(r&s.childLanes)===0)if(i!==null){if(oh(i,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(n(153));if(s.child!==null){for(i=s.child,r=Bs(i,i.pendingProps),s.child=r,r.return=s;i.sibling!==null;)i=i.sibling,r=r.sibling=Bs(i,i.pendingProps),r.return=s;r.sibling=null}return s.child}function yb(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Sp(i)))}function kR(i,s,r){switch(s.tag){case 3:Yt(s,s.stateNode.containerInfo),Ia(s,ke,i.memoizedState.cache),rh();break;case 27:case 5:Ns(s);break;case 4:Yt(s,s.stateNode.containerInfo);break;case 10:Ia(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Xa(s),s.flags|=128,null):(r&s.child.childLanes)!==0?YE(i,s,r):(Xa(s),i=Gs(i,s,r),i!==null?i.sibling:null);Xa(s);break;case 19:var g=(i.flags&128)!==0;if(c=(r&s.childLanes)!==0,c||(oh(i,s,r,!1),c=(r&s.childLanes)!==0),g){if(c)return KE(i,s,r);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),tt(Pe,Pe.current),c)break;return null;case 22:case 23:return s.lanes=0,jE(i,s,r);case 24:Ia(s,ke,i.memoizedState.cache)}return Gs(i,s,r)}function WE(i,s,r){if(i!==null)if(i.memoizedProps!==s.pendingProps)je=!0;else{if(!yb(i,r)&&(s.flags&128)===0)return je=!1,kR(i,s,r);je=(i.flags&131072)!==0}else je=!1,Vt&&(s.flags&1048576)!==0&&xS(s,Ap,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var c=s.elementType,g=c._init;if(c=g(c._payload),s.type=c,typeof c=="function")xy(c)?(i=hl(c,i),s.tag=1,s=VE(null,s,c,i,r)):(s.tag=0,s=ub(null,s,c,i,r));else{if(c!=null){if(g=c.$$typeof,g===k){s.tag=11,s=UE(null,s,c,i,r);break t}else if(g===F){s.tag=14,s=FE(null,s,c,i,r);break t}}throw s=Et(c)||c,Error(n(306,s,""))}}return s;case 0:return ub(i,s,s.type,s.pendingProps,r);case 1:return c=s.type,g=hl(c,s.pendingProps),VE(i,s,c,g,r);case 3:t:{if(Yt(s,s.stateNode.containerInfo),i===null)throw Error(n(387));c=s.pendingProps;var y=s.memoizedState;g=y.element,Fy(i,s),gh(s,c,null,r);var _=s.memoizedState;if(c=_.cache,Ia(s,ke,c),c!==y.cache&&ky(s,[ke],r,!0),ph(),c=_.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=XE(i,s,c,r);break t}else if(c!==g){g=bn(Error(n(424)),s),lh(g),s=XE(i,s,c,r);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(be=Hn(i.firstChild),vi=s,Vt=!0,al=null,as=!0,r=RE(s,null,c,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(rh(),c===g){s=Gs(i,s,r);break t}Qe(i,s,c,r)}s=s.child}return s;case 26:return Fp(i,s),i===null?(r=t1(s.type,null,s.pendingProps,null))?s.memoizedState=r:Vt||(r=s.type,i=s.pendingProps,c=eg(mt.current).createElement(r),c[ci]=s,c[Mi]=i,Je(c,r,i),Ie(c),s.stateNode=c):s.memoizedState=t1(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Ns(s),i===null&&Vt&&(c=s.stateNode=Qw(s.type,s.pendingProps,mt.current),vi=s,as=!0,g=be,ir(s.type)?(Qb=g,be=Hn(c.firstChild)):be=g),Qe(i,s,s.pendingProps.children,r),Fp(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Vt&&((g=c=be)&&(c=oM(c,s.type,s.pendingProps,as),c!==null?(s.stateNode=c,vi=s,be=Hn(c.firstChild),as=!1,g=!0):g=!1),g||rl(s)),Ns(s),g=s.type,y=s.pendingProps,_=i!==null?i.memoizedProps:null,c=y.children,Yb(g,y)?c=null:_!==null&&Yb(g,_)&&(s.flags|=32),s.memoizedState!==null&&(g=Xy(i,s,xR,null,null,r),zh._currentValue=g),Fp(i,s),Qe(i,s,c,r),s.child;case 6:return i===null&&Vt&&((i=r=be)&&(r=cM(r,s.pendingProps,as),r!==null?(s.stateNode=r,vi=s,be=null,i=!0):i=!1),i||rl(s)),null;case 13:return YE(i,s,r);case 4:return Yt(s,s.stateNode.containerInfo),c=s.pendingProps,i===null?s.child=rc(s,null,c,r):Qe(i,s,c,r),s.child;case 11:return UE(i,s,s.type,s.pendingProps,r);case 7:return Qe(i,s,s.pendingProps,r),s.child;case 8:return Qe(i,s,s.pendingProps.children,r),s.child;case 12:return Qe(i,s,s.pendingProps.children,r),s.child;case 10:return c=s.pendingProps,Ia(s,s.type,c.value),Qe(i,s,c.children,r),s.child;case 9:return g=s.type._context,c=s.pendingProps.children,ol(s),g=ui(g),c=c(g),s.flags|=1,Qe(i,s,c,r),s.child;case 14:return FE(i,s,s.type,s.pendingProps,r);case 15:return IE(i,s,s.type,s.pendingProps,r);case 19:return KE(i,s,r);case 31:return c=s.pendingProps,r=s.mode,c={mode:c.mode,children:c.children},i===null?(r=Ip(c,r),r.ref=s.ref,s.child=r,r.return=s,s=r):(r=Bs(i.child,c),r.ref=s.ref,s.child=r,r.return=s,s=r),s;case 22:return jE(i,s,r);case 24:return ol(s),c=ui(ke),i===null?(g=zy(),g===null&&(g=re,y=Py(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=r),g=y),s.memoizedState={parent:c,cache:g},Uy(s),Ia(s,ke,g)):((i.lanes&r)!==0&&(Fy(i,s),gh(s,null,null,r),ph()),g=i.memoizedState,y=s.memoizedState,g.parent!==c?(g={parent:c,cache:c},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),Ia(s,ke,c)):(c=y.cache,Ia(s,ke,c),c!==g.cache&&ky(s,[ke],r,!0))),Qe(i,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function qs(i){i.flags|=4}function QE(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!a1(s)){if(s=En.current,s!==null&&((Ft&4194048)===Ft?rs!==null:(Ft&62914560)!==Ft&&(Ft&536870912)===0||s!==rs))throw dh=Hy,kS;i.flags|=8192}}function jp(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?MA():536870912,i.lanes|=s,uc|=s)}function Eh(i,s){if(!Vt)switch(i.tailMode){case"hidden":s=i.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?i.tail=null:r.sibling=null;break;case"collapsed":r=i.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function pe(i){var s=i.alternate!==null&&i.alternate.child===i.child,r=0,c=0;if(s)for(var g=i.child;g!==null;)r|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)r|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=c,i.childLanes=r,s}function PR(i,s,r){var c=s.pendingProps;switch(Dy(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pe(s),null;case 1:return pe(s),null;case 3:return r=s.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Fs(ke),is(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(ah(s)?qs(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,MS())),pe(s),null;case 26:return r=s.memoizedState,i===null?(qs(s),r!==null?(pe(s),QE(s,r)):(pe(s),s.flags&=-16777217)):r?r!==i.memoizedState?(qs(s),pe(s),QE(s,r)):(pe(s),s.flags&=-16777217):(i.memoizedProps!==c&&qs(s),pe(s),s.flags&=-16777217),null;case 27:za(s),r=mt.current;var g=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==c&&qs(s);else{if(!c){if(s.stateNode===null)throw Error(n(166));return pe(s),null}i=ft.current,ah(s)?CS(s):(i=Qw(g,c,r),s.stateNode=i,qs(s))}return pe(s),null;case 5:if(za(s),r=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&qs(s);else{if(!c){if(s.stateNode===null)throw Error(n(166));return pe(s),null}if(i=ft.current,ah(s))CS(s);else{switch(g=eg(mt.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?g.createElement("select",{is:c.is}):g.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?g.createElement(r,{is:c.is}):g.createElement(r)}}i[ci]=s,i[Mi]=c;t:for(g=s.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===s)break t;for(;g.sibling===null;){if(g.return===null||g.return===s)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}s.stateNode=i;t:switch(Je(i,r,c),r){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&qs(s)}}return pe(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==c&&qs(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(n(166));if(i=mt.current,ah(s)){if(i=s.stateNode,r=s.memoizedProps,c=null,g=vi,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}i[ci]=s,i=!!(i.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||qw(i.nodeValue,r)),i||rl(s)}else i=eg(i).createTextNode(c),i[ci]=s,s.stateNode=i}return pe(s),null;case 13:if(c=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=ah(s),c!==null&&c.dehydrated!==null){if(i===null){if(!g)throw Error(n(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[ci]=s}else rh(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pe(s),g=!1}else g=MS(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(js(s),s):(js(s),null)}if(js(s),(s.flags&128)!==0)return s.lanes=r,s;if(r=c!==null,i=i!==null&&i.memoizedState!==null,r){c=s.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool);var y=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==g&&(c.flags|=2048)}return r!==i&&r&&(s.child.flags|=8192),jp(s,s.updateQueue),pe(s),null;case 4:return is(),i===null&&jb(s.stateNode.containerInfo),pe(s),null;case 10:return Fs(s.type),pe(s),null;case 19:if(it(Pe),g=s.memoizedState,g===null)return pe(s),null;if(c=(s.flags&128)!==0,y=g.rendering,y===null)if(c)Eh(g,!1);else{if(ve!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(y=zp(i),y!==null){for(s.flags|=128,Eh(g,!1),i=y.updateQueue,s.updateQueue=i,jp(s,i),s.subtreeFlags=0,i=r,r=s.child;r!==null;)TS(r,i),r=r.sibling;return tt(Pe,Pe.current&1|2),s.child}i=i.sibling}g.tail!==null&&ss()>Vp&&(s.flags|=128,c=!0,Eh(g,!1),s.lanes=4194304)}else{if(!c)if(i=zp(y),i!==null){if(s.flags|=128,c=!0,i=i.updateQueue,s.updateQueue=i,jp(s,i),Eh(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!Vt)return pe(s),null}else 2*ss()-g.renderingStartTime>Vp&&r!==536870912&&(s.flags|=128,c=!0,Eh(g,!1),s.lanes=4194304);g.isBackwards?(y.sibling=s.child,s.child=y):(i=g.last,i!==null?i.sibling=y:s.child=y,g.last=y)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=ss(),s.sibling=null,i=Pe.current,tt(Pe,c?i&1|2:i&1),s):(pe(s),null);case 22:case 23:return js(s),qy(),c=s.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(r&536870912)!==0&&(s.flags&128)===0&&(pe(s),s.subtreeFlags&6&&(s.flags|=8192)):pe(s),r=s.updateQueue,r!==null&&jp(s,r.retryQueue),r=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==r&&(s.flags|=2048),i!==null&&it(cl),null;case 24:return r=null,i!==null&&(r=i.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),Fs(ke),pe(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function BR(i,s){switch(Dy(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Fs(ke),is(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return za(s),null;case 13:if(js(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(n(340));rh()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return it(Pe),null;case 4:return is(),null;case 10:return Fs(s.type),null;case 22:case 23:return js(s),qy(),i!==null&&it(cl),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Fs(ke),null;case 25:return null;default:return null}}function ZE(i,s){switch(Dy(s),s.tag){case 3:Fs(ke),is();break;case 26:case 27:case 5:za(s);break;case 4:is();break;case 13:js(s);break;case 19:it(Pe);break;case 10:Fs(s.type);break;case 22:case 23:js(s),qy(),i!==null&&it(cl);break;case 24:Fs(ke)}}function wh(i,s){try{var r=s.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var g=c.next;r=g;do{if((r.tag&i)===i){c=void 0;var y=r.create,_=r.inst;c=y(),_.destroy=c}r=r.next}while(r!==g)}}catch(M){ae(s,s.return,M)}}function $a(i,s,r){try{var c=s.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var y=g.next;c=y;do{if((c.tag&i)===i){var _=c.inst,M=_.destroy;if(M!==void 0){_.destroy=void 0,g=s;var N=r,j=M;try{j()}catch(Y){ae(g,N,Y)}}}c=c.next}while(c!==y)}}catch(Y){ae(s,s.return,Y)}}function JE(i){var s=i.updateQueue;if(s!==null){var r=i.stateNode;try{FS(s,r)}catch(c){ae(i,i.return,c)}}}function tw(i,s,r){r.props=hl(i.type,i.memoizedProps),r.state=i.memoizedState;try{r.componentWillUnmount()}catch(c){ae(i,s,c)}}function _h(i,s){try{var r=i.ref;if(r!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof r=="function"?i.refCleanup=r(c):r.current=c}}catch(g){ae(i,s,g)}}function ls(i,s){var r=i.ref,c=i.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(g){ae(i,s,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(g){ae(i,s,g)}else r.current=null}function ew(i){var s=i.type,r=i.memoizedProps,c=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break t;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(g){ae(i,i.return,g)}}function bb(i,s,r){try{var c=i.stateNode;nM(c,i.type,r,s),c[Mi]=s}catch(g){ae(i,i.return,g)}}function iw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ir(i.type)||i.tag===4}function vb(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||iw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ir(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ab(i,s,r){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(i,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(i),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=tg));else if(c!==4&&(c===27&&ir(i.type)&&(r=i.stateNode,s=null),i=i.child,i!==null))for(Ab(i,s,r),i=i.sibling;i!==null;)Ab(i,s,r),i=i.sibling}function Gp(i,s,r){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?r.insertBefore(i,s):r.appendChild(i);else if(c!==4&&(c===27&&ir(i.type)&&(r=i.stateNode),i=i.child,i!==null))for(Gp(i,s,r),i=i.sibling;i!==null;)Gp(i,s,r),i=i.sibling}function nw(i){var s=i.stateNode,r=i.memoizedProps;try{for(var c=i.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);Je(s,c,r),s[ci]=i,s[Mi]=r}catch(y){ae(i,i.return,y)}}var Vs=!1,we=!1,Sb=!1,sw=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function zR(i,s){if(i=i.containerInfo,Vb=lg,i=gS(i),vy(i)){if("selectionStart"in i)var r={start:i.selectionStart,end:i.selectionEnd};else t:{r=(r=i.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var g=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break t}var _=0,M=-1,N=-1,j=0,Y=0,Z=i,G=null;e:for(;;){for(var q;Z!==r||g!==0&&Z.nodeType!==3||(M=_+g),Z!==y||c!==0&&Z.nodeType!==3||(N=_+c),Z.nodeType===3&&(_+=Z.nodeValue.length),(q=Z.firstChild)!==null;)G=Z,Z=q;for(;;){if(Z===i)break e;if(G===r&&++j===g&&(M=_),G===y&&++Y===c&&(N=_),(q=Z.nextSibling)!==null)break;Z=G,G=Z.parentNode}Z=q}r=M===-1||N===-1?null:{start:M,end:N}}else r=null}r=r||{start:0,end:0}}else r=null;for(Xb={focusedElem:i,selectionRange:r},lg=!1,Ge=s;Ge!==null;)if(s=Ge,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,Ge=i;else for(;Ge!==null;){switch(s=Ge,y=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,r=s,g=y.memoizedProps,y=y.memoizedState,c=r.stateNode;try{var At=hl(r.type,g,r.elementType===r.type);i=c.getSnapshotBeforeUpdate(At,y),c.__reactInternalSnapshotBeforeUpdate=i}catch(yt){ae(r,r.return,yt)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,r=i.nodeType,r===9)Kb(i);else if(r===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Kb(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=s.sibling,i!==null){i.return=s.return,Ge=i;break}Ge=s.return}}function aw(i,s,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:Ka(i,r),c&4&&wh(5,r);break;case 1:if(Ka(i,r),c&4)if(i=r.stateNode,s===null)try{i.componentDidMount()}catch(_){ae(r,r.return,_)}else{var g=hl(r.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(g,s,i.__reactInternalSnapshotBeforeUpdate)}catch(_){ae(r,r.return,_)}}c&64&&JE(r),c&512&&_h(r,r.return);break;case 3:if(Ka(i,r),c&64&&(i=r.updateQueue,i!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{FS(i,s)}catch(_){ae(r,r.return,_)}}break;case 27:s===null&&c&4&&nw(r);case 26:case 5:Ka(i,r),s===null&&c&4&&ew(r),c&512&&_h(r,r.return);break;case 12:Ka(i,r);break;case 13:Ka(i,r),c&4&&ow(i,r),c&64&&(i=r.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(r=XR.bind(null,r),uM(i,r))));break;case 22:if(c=r.memoizedState!==null||Vs,!c){s=s!==null&&s.memoizedState!==null||we,g=Vs;var y=we;Vs=c,(we=s)&&!y?Wa(i,r,(r.subtreeFlags&8772)!==0):Ka(i,r),Vs=g,we=y}break;case 30:break;default:Ka(i,r)}}function rw(i){var s=i.alternate;s!==null&&(i.alternate=null,rw(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&ty(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ue=null,Li=!1;function Xs(i,s,r){for(r=r.child;r!==null;)lw(i,s,r),r=r.sibling}function lw(i,s,r){if(ji&&typeof ji.onCommitFiberUnmount=="function")try{ji.onCommitFiberUnmount(Vu,r)}catch{}switch(r.tag){case 26:we||ls(r,s),Xs(i,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:we||ls(r,s);var c=ue,g=Li;ir(r.type)&&(ue=r.stateNode,Li=!1),Xs(i,s,r),Nh(r.stateNode),ue=c,Li=g;break;case 5:we||ls(r,s);case 6:if(c=ue,g=Li,ue=null,Xs(i,s,r),ue=c,Li=g,ue!==null)if(Li)try{(ue.nodeType===9?ue.body:ue.nodeName==="HTML"?ue.ownerDocument.body:ue).removeChild(r.stateNode)}catch(y){ae(r,s,y)}else try{ue.removeChild(r.stateNode)}catch(y){ae(r,s,y)}break;case 18:ue!==null&&(Li?(i=ue,Kw(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.stateNode),Ih(i)):Kw(ue,r.stateNode));break;case 4:c=ue,g=Li,ue=r.stateNode.containerInfo,Li=!0,Xs(i,s,r),ue=c,Li=g;break;case 0:case 11:case 14:case 15:we||$a(2,r,s),we||$a(4,r,s),Xs(i,s,r);break;case 1:we||(ls(r,s),c=r.stateNode,typeof c.componentWillUnmount=="function"&&tw(r,s,c)),Xs(i,s,r);break;case 21:Xs(i,s,r);break;case 22:we=(c=we)||r.memoizedState!==null,Xs(i,s,r),we=c;break;default:Xs(i,s,r)}}function ow(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ih(i)}catch(r){ae(s,s.return,r)}}function HR(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new sw),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new sw),s;default:throw Error(n(435,i.tag))}}function Eb(i,s){var r=HR(i);s.forEach(function(c){var g=YR.bind(null,i,c);r.has(c)||(r.add(c),c.then(g,g))})}function Xi(i,s){var r=s.deletions;if(r!==null)for(var c=0;c<r.length;c++){var g=r[c],y=i,_=s,M=_;t:for(;M!==null;){switch(M.tag){case 27:if(ir(M.type)){ue=M.stateNode,Li=!1;break t}break;case 5:ue=M.stateNode,Li=!1;break t;case 3:case 4:ue=M.stateNode.containerInfo,Li=!0;break t}M=M.return}if(ue===null)throw Error(n(160));lw(y,_,g),ue=null,Li=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)cw(s,i),s=s.sibling}var zn=null;function cw(i,s){var r=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Xi(s,i),Yi(i),c&4&&($a(3,i,i.return),wh(3,i),$a(5,i,i.return));break;case 1:Xi(s,i),Yi(i),c&512&&(we||r===null||ls(r,r.return)),c&64&&Vs&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(r=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var g=zn;if(Xi(s,i),Yi(i),c&512&&(we||r===null||ls(r,r.return)),c&4){var y=r!==null?r.memoizedState:null;if(c=i.memoizedState,r===null)if(c===null)if(i.stateNode===null){t:{c=i.type,r=i.memoizedProps,g=g.ownerDocument||g;e:switch(c){case"title":y=g.getElementsByTagName("title")[0],(!y||y[$u]||y[ci]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(c),g.head.insertBefore(y,g.querySelector("head > title"))),Je(y,c,r),y[ci]=i,Ie(y),c=y;break t;case"link":var _=n1("link","href",g).get(c+(r.href||""));if(_){for(var M=0;M<_.length;M++)if(y=_[M],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){_.splice(M,1);break e}}y=g.createElement(c),Je(y,c,r),g.head.appendChild(y);break;case"meta":if(_=n1("meta","content",g).get(c+(r.content||""))){for(M=0;M<_.length;M++)if(y=_[M],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){_.splice(M,1);break e}}y=g.createElement(c),Je(y,c,r),g.head.appendChild(y);break;default:throw Error(n(468,c))}y[ci]=i,Ie(y),c=y}i.stateNode=c}else s1(g,i.type,i.stateNode);else i.stateNode=i1(g,c,i.memoizedProps);else y!==c?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,c===null?s1(g,i.type,i.stateNode):i1(g,c,i.memoizedProps)):c===null&&i.stateNode!==null&&bb(i,i.memoizedProps,r.memoizedProps)}break;case 27:Xi(s,i),Yi(i),c&512&&(we||r===null||ls(r,r.return)),r!==null&&c&4&&bb(i,i.memoizedProps,r.memoizedProps);break;case 5:if(Xi(s,i),Yi(i),c&512&&(we||r===null||ls(r,r.return)),i.flags&32){g=i.stateNode;try{jo(g,"")}catch(q){ae(i,i.return,q)}}c&4&&i.stateNode!=null&&(g=i.memoizedProps,bb(i,g,r!==null?r.memoizedProps:g)),c&1024&&(Sb=!0);break;case 6:if(Xi(s,i),Yi(i),c&4){if(i.stateNode===null)throw Error(n(162));c=i.memoizedProps,r=i.stateNode;try{r.nodeValue=c}catch(q){ae(i,i.return,q)}}break;case 3:if(sg=null,g=zn,zn=ig(s.containerInfo),Xi(s,i),zn=g,Yi(i),c&4&&r!==null&&r.memoizedState.isDehydrated)try{Ih(s.containerInfo)}catch(q){ae(i,i.return,q)}Sb&&(Sb=!1,uw(i));break;case 4:c=zn,zn=ig(i.stateNode.containerInfo),Xi(s,i),Yi(i),zn=c;break;case 12:Xi(s,i),Yi(i);break;case 13:Xi(s,i),Yi(i),i.child.flags&8192&&i.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Rb=ss()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Eb(i,c)));break;case 22:g=i.memoizedState!==null;var N=r!==null&&r.memoizedState!==null,j=Vs,Y=we;if(Vs=j||g,we=Y||N,Xi(s,i),we=Y,Vs=j,Yi(i),c&8192)t:for(s=i.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(r===null||N||Vs||we||dl(i)),r=null,s=i;;){if(s.tag===5||s.tag===26){if(r===null){N=r=s;try{if(y=N.stateNode,g)_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{M=N.stateNode;var Z=N.memoizedProps.style,G=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;M.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(q){ae(N,N.return,q)}}}else if(s.tag===6){if(r===null){N=s;try{N.stateNode.nodeValue=g?"":N.memoizedProps}catch(q){ae(N,N.return,q)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=i.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,Eb(i,r))));break;case 19:Xi(s,i),Yi(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Eb(i,c)));break;case 30:break;case 21:break;default:Xi(s,i),Yi(i)}}function Yi(i){var s=i.flags;if(s&2){try{for(var r,c=i.return;c!==null;){if(iw(c)){r=c;break}c=c.return}if(r==null)throw Error(n(160));switch(r.tag){case 27:var g=r.stateNode,y=vb(i);Gp(i,y,g);break;case 5:var _=r.stateNode;r.flags&32&&(jo(_,""),r.flags&=-33);var M=vb(i);Gp(i,M,_);break;case 3:case 4:var N=r.stateNode.containerInfo,j=vb(i);Ab(i,j,N);break;default:throw Error(n(161))}}catch(Y){ae(i,i.return,Y)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function uw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;uw(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Ka(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)aw(i,s.alternate,s),s=s.sibling}function dl(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:$a(4,s,s.return),dl(s);break;case 1:ls(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&tw(s,s.return,r),dl(s);break;case 27:Nh(s.stateNode);case 26:case 5:ls(s,s.return),dl(s);break;case 22:s.memoizedState===null&&dl(s);break;case 30:dl(s);break;default:dl(s)}i=i.sibling}}function Wa(i,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,g=i,y=s,_=y.flags;switch(y.tag){case 0:case 11:case 15:Wa(g,y,r),wh(4,y);break;case 1:if(Wa(g,y,r),c=y,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(j){ae(c,c.return,j)}if(c=y,g=c.updateQueue,g!==null){var M=c.stateNode;try{var N=g.shared.hiddenCallbacks;if(N!==null)for(g.shared.hiddenCallbacks=null,g=0;g<N.length;g++)US(N[g],M)}catch(j){ae(c,c.return,j)}}r&&_&64&&JE(y),_h(y,y.return);break;case 27:nw(y);case 26:case 5:Wa(g,y,r),r&&c===null&&_&4&&ew(y),_h(y,y.return);break;case 12:Wa(g,y,r);break;case 13:Wa(g,y,r),r&&_&4&&ow(g,y);break;case 22:y.memoizedState===null&&Wa(g,y,r),_h(y,y.return);break;case 30:break;default:Wa(g,y,r)}s=s.sibling}}function wb(i,s){var r=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==r&&(i!=null&&i.refCount++,r!=null&&ch(r))}function _b(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&ch(i))}function os(i,s,r,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)hw(i,s,r,c),s=s.sibling}function hw(i,s,r,c){var g=s.flags;switch(s.tag){case 0:case 11:case 15:os(i,s,r,c),g&2048&&wh(9,s);break;case 1:os(i,s,r,c);break;case 3:os(i,s,r,c),g&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&ch(i)));break;case 12:if(g&2048){os(i,s,r,c),i=s.stateNode;try{var y=s.memoizedProps,_=y.id,M=y.onPostCommit;typeof M=="function"&&M(_,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(N){ae(s,s.return,N)}}else os(i,s,r,c);break;case 13:os(i,s,r,c);break;case 23:break;case 22:y=s.stateNode,_=s.alternate,s.memoizedState!==null?y._visibility&2?os(i,s,r,c):Th(i,s):y._visibility&2?os(i,s,r,c):(y._visibility|=2,lc(i,s,r,c,(s.subtreeFlags&10256)!==0)),g&2048&&wb(_,s);break;case 24:os(i,s,r,c),g&2048&&_b(s.alternate,s);break;default:os(i,s,r,c)}}function lc(i,s,r,c,g){for(g=g&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var y=i,_=s,M=r,N=c,j=_.flags;switch(_.tag){case 0:case 11:case 15:lc(y,_,M,N,g),wh(8,_);break;case 23:break;case 22:var Y=_.stateNode;_.memoizedState!==null?Y._visibility&2?lc(y,_,M,N,g):Th(y,_):(Y._visibility|=2,lc(y,_,M,N,g)),g&&j&2048&&wb(_.alternate,_);break;case 24:lc(y,_,M,N,g),g&&j&2048&&_b(_.alternate,_);break;default:lc(y,_,M,N,g)}s=s.sibling}}function Th(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=i,c=s,g=c.flags;switch(c.tag){case 22:Th(r,c),g&2048&&wb(c.alternate,c);break;case 24:Th(r,c),g&2048&&_b(c.alternate,c);break;default:Th(r,c)}s=s.sibling}}var xh=8192;function oc(i){if(i.subtreeFlags&xh)for(i=i.child;i!==null;)dw(i),i=i.sibling}function dw(i){switch(i.tag){case 26:oc(i),i.flags&xh&&i.memoizedState!==null&&wM(zn,i.memoizedState,i.memoizedProps);break;case 5:oc(i);break;case 3:case 4:var s=zn;zn=ig(i.stateNode.containerInfo),oc(i),zn=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=xh,xh=16777216,oc(i),xh=s):oc(i));break;default:oc(i)}}function fw(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Ch(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var c=s[r];Ge=c,gw(c,i)}fw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)pw(i),i=i.sibling}function pw(i){switch(i.tag){case 0:case 11:case 15:Ch(i),i.flags&2048&&$a(9,i,i.return);break;case 3:Ch(i);break;case 12:Ch(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,qp(i)):Ch(i);break;default:Ch(i)}}function qp(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var c=s[r];Ge=c,gw(c,i)}fw(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:$a(8,s,s.return),qp(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,qp(s));break;default:qp(s)}i=i.sibling}}function gw(i,s){for(;Ge!==null;){var r=Ge;switch(r.tag){case 0:case 11:case 15:$a(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ch(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,Ge=c;else t:for(r=i;Ge!==null;){c=Ge;var g=c.sibling,y=c.return;if(rw(c),c===r){Ge=null;break t}if(g!==null){g.return=y,Ge=g;break t}Ge=y}}}var UR={getCacheForType:function(i){var s=ui(ke),r=s.data.get(i);return r===void 0&&(r=i(),s.data.set(i,r)),r}},FR=typeof WeakMap=="function"?WeakMap:Map,Kt=0,re=null,kt=null,Ft=0,Wt=0,$i=null,Qa=!1,cc=!1,Tb=!1,Ys=0,ve=0,Za=0,fl=0,xb=0,wn=0,uc=0,Rh=null,Ni=null,Cb=!1,Rb=0,Vp=1/0,Xp=null,Ja=null,Ze=0,tr=null,hc=null,dc=0,Mb=0,Db=null,mw=null,Mh=0,Ob=null;function Ki(){if((Kt&2)!==0&&Ft!==0)return Ft&-Ft;if(z.T!==null){var i=Jo;return i!==0?i:Hb()}return LA()}function yw(){wn===0&&(wn=(Ft&536870912)===0||Vt?RA():536870912);var i=En.current;return i!==null&&(i.flags|=32),wn}function Wi(i,s,r){(i===re&&(Wt===2||Wt===9)||i.cancelPendingCommit!==null)&&(fc(i,0),er(i,Ft,wn,!1)),Yu(i,r),((Kt&2)===0||i!==re)&&(i===re&&((Kt&2)===0&&(fl|=r),ve===4&&er(i,Ft,wn,!1)),cs(i))}function bw(i,s,r){if((Kt&6)!==0)throw Error(n(327));var c=!r&&(s&124)===0&&(s&i.expiredLanes)===0||Xu(i,s),g=c?GR(i,s):kb(i,s,!0),y=c;do{if(g===0){cc&&!c&&er(i,s,0,!1);break}else{if(r=i.current.alternate,y&&!IR(r)){g=kb(i,s,!1),y=!1;continue}if(g===2){if(y=s,i.errorRecoveryDisabledLanes&y)var _=0;else _=i.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;t:{var M=i;g=Rh;var N=M.current.memoizedState.isDehydrated;if(N&&(fc(M,_).flags|=256),_=kb(M,_,!1),_!==2){if(Tb&&!N){M.errorRecoveryDisabledLanes|=y,fl|=y,g=4;break t}y=Ni,Ni=g,y!==null&&(Ni===null?Ni=y:Ni.push.apply(Ni,y))}g=_}if(y=!1,g!==2)continue}}if(g===1){fc(i,0),er(i,s,0,!0);break}t:{switch(c=i,y=g,y){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:er(c,s,wn,!Qa);break t;case 2:Ni=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(g=Rb+300-ss(),10<g)){if(er(c,s,wn,!Qa),np(c,0,!0)!==0)break t;c.timeoutHandle=Yw(vw.bind(null,c,r,Ni,Xp,Cb,s,wn,fl,uc,Qa,y,2,-0,0),g);break t}vw(c,r,Ni,Xp,Cb,s,wn,fl,uc,Qa,y,0,-0,0)}}break}while(!0);cs(i)}function vw(i,s,r,c,g,y,_,M,N,j,Y,Z,G,q){if(i.timeoutHandle=-1,Z=s.subtreeFlags,(Z&8192||(Z&16785408)===16785408)&&(Bh={stylesheets:null,count:0,unsuspend:EM},dw(s),Z=_M(),Z!==null)){i.cancelPendingCommit=Z(xw.bind(null,i,s,y,r,c,g,_,M,N,Y,1,G,q)),er(i,y,_,!j);return}xw(i,s,y,r,c,g,_,M,N)}function IR(i){for(var s=i;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var g=r[c],y=g.getSnapshot;g=g.value;try{if(!qi(y(),g))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function er(i,s,r,c){s&=~xb,s&=~fl,i.suspendedLanes|=s,i.pingedLanes&=~s,c&&(i.warmLanes|=s),c=i.expirationTimes;for(var g=s;0<g;){var y=31-Gi(g),_=1<<y;c[y]=-1,g&=~_}r!==0&&DA(i,r,s)}function Yp(){return(Kt&6)===0?(Dh(0),!1):!0}function Lb(){if(kt!==null){if(Wt===0)var i=kt.return;else i=kt,Us=ll=null,Ky(i),ac=null,Ah=0,i=kt;for(;i!==null;)ZE(i.alternate,i),i=i.return;kt=null}}function fc(i,s){var r=i.timeoutHandle;r!==-1&&(i.timeoutHandle=-1,aM(r)),r=i.cancelPendingCommit,r!==null&&(i.cancelPendingCommit=null,r()),Lb(),re=i,kt=r=Bs(i.current,null),Ft=s,Wt=0,$i=null,Qa=!1,cc=Xu(i,s),Tb=!1,uc=wn=xb=fl=Za=ve=0,Ni=Rh=null,Cb=!1,(s&8)!==0&&(s|=s&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=s;0<c;){var g=31-Gi(c),y=1<<g;s|=i[g],c&=~y}return Ys=s,gp(),r}function Aw(i,s){Dt=null,z.H=kp,s===hh||s===_p?(s=zS(),Wt=3):s===kS?(s=zS(),Wt=4):Wt=s===HE?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,$i=s,kt===null&&(ve=1,Up(i,bn(s,i.current)))}function Sw(){var i=z.H;return z.H=kp,i===null?kp:i}function Ew(){var i=z.A;return z.A=UR,i}function Nb(){ve=4,Qa||(Ft&4194048)!==Ft&&En.current!==null||(cc=!0),(Za&134217727)===0&&(fl&134217727)===0||re===null||er(re,Ft,wn,!1)}function kb(i,s,r){var c=Kt;Kt|=2;var g=Sw(),y=Ew();(re!==i||Ft!==s)&&(Xp=null,fc(i,s)),s=!1;var _=ve;t:do try{if(Wt!==0&&kt!==null){var M=kt,N=$i;switch(Wt){case 8:Lb(),_=6;break t;case 3:case 2:case 9:case 6:En.current===null&&(s=!0);var j=Wt;if(Wt=0,$i=null,pc(i,M,N,j),r&&cc){_=0;break t}break;default:j=Wt,Wt=0,$i=null,pc(i,M,N,j)}}jR(),_=ve;break}catch(Y){Aw(i,Y)}while(!0);return s&&i.shellSuspendCounter++,Us=ll=null,Kt=c,z.H=g,z.A=y,kt===null&&(re=null,Ft=0,gp()),_}function jR(){for(;kt!==null;)ww(kt)}function GR(i,s){var r=Kt;Kt|=2;var c=Sw(),g=Ew();re!==i||Ft!==s?(Xp=null,Vp=ss()+500,fc(i,s)):cc=Xu(i,s);t:do try{if(Wt!==0&&kt!==null){s=kt;var y=$i;e:switch(Wt){case 1:Wt=0,$i=null,pc(i,s,y,1);break;case 2:case 9:if(PS(y)){Wt=0,$i=null,_w(s);break}s=function(){Wt!==2&&Wt!==9||re!==i||(Wt=7),cs(i)},y.then(s,s);break t;case 3:Wt=7;break t;case 4:Wt=5;break t;case 7:PS(y)?(Wt=0,$i=null,_w(s)):(Wt=0,$i=null,pc(i,s,y,7));break;case 5:var _=null;switch(kt.tag){case 26:_=kt.memoizedState;case 5:case 27:var M=kt;if(!_||a1(_)){Wt=0,$i=null;var N=M.sibling;if(N!==null)kt=N;else{var j=M.return;j!==null?(kt=j,$p(j)):kt=null}break e}}Wt=0,$i=null,pc(i,s,y,5);break;case 6:Wt=0,$i=null,pc(i,s,y,6);break;case 8:Lb(),ve=6;break t;default:throw Error(n(462))}}qR();break}catch(Y){Aw(i,Y)}while(!0);return Us=ll=null,z.H=c,z.A=g,Kt=r,kt!==null?0:(re=null,Ft=0,gp(),ve)}function qR(){for(;kt!==null&&!dC();)ww(kt)}function ww(i){var s=WE(i.alternate,i,Ys);i.memoizedProps=i.pendingProps,s===null?$p(i):kt=s}function _w(i){var s=i,r=s.alternate;switch(s.tag){case 15:case 0:s=qE(r,s,s.pendingProps,s.type,void 0,Ft);break;case 11:s=qE(r,s,s.pendingProps,s.type.render,s.ref,Ft);break;case 5:Ky(s);default:ZE(r,s),s=kt=TS(s,Ys),s=WE(r,s,Ys)}i.memoizedProps=i.pendingProps,s===null?$p(i):kt=s}function pc(i,s,r,c){Us=ll=null,Ky(s),ac=null,Ah=0;var g=s.return;try{if(NR(i,g,s,r,Ft)){ve=1,Up(i,bn(r,i.current)),kt=null;return}}catch(y){if(g!==null)throw kt=g,y;ve=1,Up(i,bn(r,i.current)),kt=null;return}s.flags&32768?(Vt||c===1?i=!0:cc||(Ft&536870912)!==0?i=!1:(Qa=i=!0,(c===2||c===9||c===3||c===6)&&(c=En.current,c!==null&&c.tag===13&&(c.flags|=16384))),Tw(s,i)):$p(s)}function $p(i){var s=i;do{if((s.flags&32768)!==0){Tw(s,Qa);return}i=s.return;var r=PR(s.alternate,s,Ys);if(r!==null){kt=r;return}if(s=s.sibling,s!==null){kt=s;return}kt=s=i}while(s!==null);ve===0&&(ve=5)}function Tw(i,s){do{var r=BR(i.alternate,i);if(r!==null){r.flags&=32767,kt=r;return}if(r=i.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(i=i.sibling,i!==null)){kt=i;return}kt=i=r}while(i!==null);ve=6,kt=null}function xw(i,s,r,c,g,y,_,M,N){i.cancelPendingCommit=null;do Kp();while(Ze!==0);if((Kt&6)!==0)throw Error(n(327));if(s!==null){if(s===i.current)throw Error(n(177));if(y=s.lanes|s.childLanes,y|=_y,EC(i,r,y,_,M,N),i===re&&(kt=re=null,Ft=0),hc=s,tr=i,dc=r,Mb=y,Db=g,mw=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,$R(tp,function(){return Ow(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=z.T,z.T=null,g=X.p,X.p=2,_=Kt,Kt|=4;try{zR(i,s,r)}finally{Kt=_,X.p=g,z.T=c}}Ze=1,Cw(),Rw(),Mw()}}function Cw(){if(Ze===1){Ze=0;var i=tr,s=hc,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=z.T,z.T=null;var c=X.p;X.p=2;var g=Kt;Kt|=4;try{cw(s,i);var y=Xb,_=gS(i.containerInfo),M=y.focusedElem,N=y.selectionRange;if(_!==M&&M&&M.ownerDocument&&pS(M.ownerDocument.documentElement,M)){if(N!==null&&vy(M)){var j=N.start,Y=N.end;if(Y===void 0&&(Y=j),"selectionStart"in M)M.selectionStart=j,M.selectionEnd=Math.min(Y,M.value.length);else{var Z=M.ownerDocument||document,G=Z&&Z.defaultView||window;if(G.getSelection){var q=G.getSelection(),At=M.textContent.length,yt=Math.min(N.start,At),te=N.end===void 0?yt:Math.min(N.end,At);!q.extend&&yt>te&&(_=te,te=yt,yt=_);var H=fS(M,yt),B=fS(M,te);if(H&&B&&(q.rangeCount!==1||q.anchorNode!==H.node||q.anchorOffset!==H.offset||q.focusNode!==B.node||q.focusOffset!==B.offset)){var I=Z.createRange();I.setStart(H.node,H.offset),q.removeAllRanges(),yt>te?(q.addRange(I),q.extend(B.node,B.offset)):(I.setEnd(B.node,B.offset),q.addRange(I))}}}}for(Z=[],q=M;q=q.parentNode;)q.nodeType===1&&Z.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<Z.length;M++){var $=Z[M];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}lg=!!Vb,Xb=Vb=null}finally{Kt=g,X.p=c,z.T=r}}i.current=s,Ze=2}}function Rw(){if(Ze===2){Ze=0;var i=tr,s=hc,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=z.T,z.T=null;var c=X.p;X.p=2;var g=Kt;Kt|=4;try{aw(i,s.alternate,s)}finally{Kt=g,X.p=c,z.T=r}}Ze=3}}function Mw(){if(Ze===4||Ze===3){Ze=0,fC();var i=tr,s=hc,r=dc,c=mw;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ze=5:(Ze=0,hc=tr=null,Dw(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Ja=null),Zm(r),s=s.stateNode,ji&&typeof ji.onCommitFiberRoot=="function")try{ji.onCommitFiberRoot(Vu,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=z.T,g=X.p,X.p=2,z.T=null;try{for(var y=i.onRecoverableError,_=0;_<c.length;_++){var M=c[_];y(M.value,{componentStack:M.stack})}}finally{z.T=s,X.p=g}}(dc&3)!==0&&Kp(),cs(i),g=i.pendingLanes,(r&4194090)!==0&&(g&42)!==0?i===Ob?Mh++:(Mh=0,Ob=i):Mh=0,Dh(0)}}function Dw(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,ch(s)))}function Kp(i){return Cw(),Rw(),Mw(),Ow()}function Ow(){if(Ze!==5)return!1;var i=tr,s=Mb;Mb=0;var r=Zm(dc),c=z.T,g=X.p;try{X.p=32>r?32:r,z.T=null,r=Db,Db=null;var y=tr,_=dc;if(Ze=0,hc=tr=null,dc=0,(Kt&6)!==0)throw Error(n(331));var M=Kt;if(Kt|=4,pw(y.current),hw(y,y.current,_,r),Kt=M,Dh(0,!1),ji&&typeof ji.onPostCommitFiberRoot=="function")try{ji.onPostCommitFiberRoot(Vu,y)}catch{}return!0}finally{X.p=g,z.T=c,Dw(i,s)}}function Lw(i,s,r){s=bn(r,s),s=cb(i.stateNode,s,2),i=qa(i,s,2),i!==null&&(Yu(i,2),cs(i))}function ae(i,s,r){if(i.tag===3)Lw(i,i,r);else for(;s!==null;){if(s.tag===3){Lw(s,i,r);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ja===null||!Ja.has(c))){i=bn(r,i),r=BE(2),c=qa(s,r,2),c!==null&&(zE(r,c,s,i),Yu(c,2),cs(c));break}}s=s.return}}function Pb(i,s,r){var c=i.pingCache;if(c===null){c=i.pingCache=new FR;var g=new Set;c.set(s,g)}else g=c.get(s),g===void 0&&(g=new Set,c.set(s,g));g.has(r)||(Tb=!0,g.add(r),i=VR.bind(null,i,s,r),s.then(i,i))}function VR(i,s,r){var c=i.pingCache;c!==null&&c.delete(s),i.pingedLanes|=i.suspendedLanes&r,i.warmLanes&=~r,re===i&&(Ft&r)===r&&(ve===4||ve===3&&(Ft&62914560)===Ft&&300>ss()-Rb?(Kt&2)===0&&fc(i,0):xb|=r,uc===Ft&&(uc=0)),cs(i)}function Nw(i,s){s===0&&(s=MA()),i=Ko(i,s),i!==null&&(Yu(i,s),cs(i))}function XR(i){var s=i.memoizedState,r=0;s!==null&&(r=s.retryLane),Nw(i,r)}function YR(i,s){var r=0;switch(i.tag){case 13:var c=i.stateNode,g=i.memoizedState;g!==null&&(r=g.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(n(314))}c!==null&&c.delete(s),Nw(i,r)}function $R(i,s){return ko(i,s)}var Wp=null,gc=null,Bb=!1,Qp=!1,zb=!1,pl=0;function cs(i){i!==gc&&i.next===null&&(gc===null?Wp=gc=i:gc=gc.next=i),Qp=!0,Bb||(Bb=!0,WR())}function Dh(i,s){if(!zb&&Qp){zb=!0;do for(var r=!1,c=Wp;c!==null;){if(i!==0){var g=c.pendingLanes;if(g===0)var y=0;else{var _=c.suspendedLanes,M=c.pingedLanes;y=(1<<31-Gi(42|i)+1)-1,y&=g&~(_&~M),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,zw(c,y))}else y=Ft,y=np(c,c===re?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Xu(c,y)||(r=!0,zw(c,y));c=c.next}while(r);zb=!1}}function KR(){kw()}function kw(){Qp=Bb=!1;var i=0;pl!==0&&(sM()&&(i=pl),pl=0);for(var s=ss(),r=null,c=Wp;c!==null;){var g=c.next,y=Pw(c,s);y===0?(c.next=null,r===null?Wp=g:r.next=g,g===null&&(gc=r)):(r=c,(i!==0||(y&3)!==0)&&(Qp=!0)),c=g}Dh(i)}function Pw(i,s){for(var r=i.suspendedLanes,c=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var _=31-Gi(y),M=1<<_,N=g[_];N===-1?((M&r)===0||(M&c)!==0)&&(g[_]=SC(M,s)):N<=s&&(i.expiredLanes|=M),y&=~M}if(s=re,r=Ft,r=np(i,i===s?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,r===0||i===s&&(Wt===2||Wt===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&qu(c),i.callbackNode=null,i.callbackPriority=0;if((r&3)===0||Xu(i,r)){if(s=r&-r,s===i.callbackPriority)return s;switch(c!==null&&qu(c),Zm(r)){case 2:case 8:r=xA;break;case 32:r=tp;break;case 268435456:r=CA;break;default:r=tp}return c=Bw.bind(null,i),r=ko(r,c),i.callbackPriority=s,i.callbackNode=r,s}return c!==null&&c!==null&&qu(c),i.callbackPriority=2,i.callbackNode=null,2}function Bw(i,s){if(Ze!==0&&Ze!==5)return i.callbackNode=null,i.callbackPriority=0,null;var r=i.callbackNode;if(Kp()&&i.callbackNode!==r)return null;var c=Ft;return c=np(i,i===re?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(bw(i,c,s),Pw(i,ss()),i.callbackNode!=null&&i.callbackNode===r?Bw.bind(null,i):null)}function zw(i,s){if(Kp())return null;bw(i,s,!0)}function WR(){rM(function(){(Kt&6)!==0?ko(TA,KR):kw()})}function Hb(){return pl===0&&(pl=RA()),pl}function Hw(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:op(""+i)}function Uw(i,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,i.id&&r.setAttribute("form",i.id),s.parentNode.insertBefore(r,s),i=new FormData(i),r.parentNode.removeChild(r),i}function QR(i,s,r,c,g){if(s==="submit"&&r&&r.stateNode===g){var y=Hw((g[Mi]||null).action),_=c.submitter;_&&(s=(s=_[Mi]||null)?Hw(s.formAction):_.getAttribute("formAction"),s!==null&&(y=s,_=null));var M=new dp("action","action",null,c,g);i.push({event:M,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(pl!==0){var N=_?Uw(g,_):new FormData(g);sb(r,{pending:!0,data:N,method:g.method,action:y},null,N)}}else typeof y=="function"&&(M.preventDefault(),N=_?Uw(g,_):new FormData(g),sb(r,{pending:!0,data:N,method:g.method,action:y},y,N))},currentTarget:g}]})}}for(var Ub=0;Ub<wy.length;Ub++){var Fb=wy[Ub],ZR=Fb.toLowerCase(),JR=Fb[0].toUpperCase()+Fb.slice(1);Bn(ZR,"on"+JR)}Bn(bS,"onAnimationEnd"),Bn(vS,"onAnimationIteration"),Bn(AS,"onAnimationStart"),Bn("dblclick","onDoubleClick"),Bn("focusin","onFocus"),Bn("focusout","onBlur"),Bn(mR,"onTransitionRun"),Bn(yR,"onTransitionStart"),Bn(bR,"onTransitionCancel"),Bn(SS,"onTransitionEnd"),Uo("onMouseEnter",["mouseout","mouseover"]),Uo("onMouseLeave",["mouseout","mouseover"]),Uo("onPointerEnter",["pointerout","pointerover"]),Uo("onPointerLeave",["pointerout","pointerover"]),Zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Oh));function Fw(i,s){s=(s&4)!==0;for(var r=0;r<i.length;r++){var c=i[r],g=c.event;c=c.listeners;t:{var y=void 0;if(s)for(var _=c.length-1;0<=_;_--){var M=c[_],N=M.instance,j=M.currentTarget;if(M=M.listener,N!==y&&g.isPropagationStopped())break t;y=M,g.currentTarget=j;try{y(g)}catch(Y){Hp(Y)}g.currentTarget=null,y=N}else for(_=0;_<c.length;_++){if(M=c[_],N=M.instance,j=M.currentTarget,M=M.listener,N!==y&&g.isPropagationStopped())break t;y=M,g.currentTarget=j;try{y(g)}catch(Y){Hp(Y)}g.currentTarget=null,y=N}}}}function Pt(i,s){var r=s[Jm];r===void 0&&(r=s[Jm]=new Set);var c=i+"__bubble";r.has(c)||(Iw(s,i,2,!1),r.add(c))}function Ib(i,s,r){var c=0;s&&(c|=4),Iw(r,i,c,s)}var Zp="_reactListening"+Math.random().toString(36).slice(2);function jb(i){if(!i[Zp]){i[Zp]=!0,kA.forEach(function(r){r!=="selectionchange"&&(tM.has(r)||Ib(r,!1,i),Ib(r,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Zp]||(s[Zp]=!0,Ib("selectionchange",!1,s))}}function Iw(i,s,r,c){switch(h1(s)){case 2:var g=CM;break;case 8:g=RM;break;default:g=i0}r=g.bind(null,s,r,i),g=void 0,!uy||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),c?g!==void 0?i.addEventListener(s,r,{capture:!0,passive:g}):i.addEventListener(s,r,!0):g!==void 0?i.addEventListener(s,r,{passive:g}):i.addEventListener(s,r,!1)}function Gb(i,s,r,c,g){var y=c;if((s&1)===0&&(s&2)===0&&c!==null)t:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var M=c.stateNode.containerInfo;if(M===g)break;if(_===4)for(_=c.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===g)return;_=_.return}for(;M!==null;){if(_=Bo(M),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){c=y=_;continue t}M=M.parentNode}}c=c.return}$A(function(){var j=y,Y=oy(r),Z=[];t:{var G=ES.get(i);if(G!==void 0){var q=dp,At=i;switch(i){case"keypress":if(up(r)===0)break t;case"keydown":case"keyup":q=$C;break;case"focusin":At="focus",q=py;break;case"focusout":At="blur",q=py;break;case"beforeblur":case"afterblur":q=py;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=QA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=BC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=QC;break;case bS:case vS:case AS:q=UC;break;case SS:q=JC;break;case"scroll":case"scrollend":q=kC;break;case"wheel":q=eR;break;case"copy":case"cut":case"paste":q=IC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=JA;break;case"toggle":case"beforetoggle":q=nR}var yt=(s&4)!==0,te=!yt&&(i==="scroll"||i==="scrollend"),H=yt?G!==null?G+"Capture":null:G;yt=[];for(var B=j,I;B!==null;){var $=B;if(I=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||I===null||H===null||($=Wu(B,H),$!=null&&yt.push(Lh(B,$,I))),te)break;B=B.return}0<yt.length&&(G=new q(G,At,null,r,Y),Z.push({event:G,listeners:yt}))}}if((s&7)===0){t:{if(G=i==="mouseover"||i==="pointerover",q=i==="mouseout"||i==="pointerout",G&&r!==ly&&(At=r.relatedTarget||r.fromElement)&&(Bo(At)||At[Po]))break t;if((q||G)&&(G=Y.window===Y?Y:(G=Y.ownerDocument)?G.defaultView||G.parentWindow:window,q?(At=r.relatedTarget||r.toElement,q=j,At=At?Bo(At):null,At!==null&&(te=l(At),yt=At.tag,At!==te||yt!==5&&yt!==27&&yt!==6)&&(At=null)):(q=null,At=j),q!==At)){if(yt=QA,$="onMouseLeave",H="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(yt=JA,$="onPointerLeave",H="onPointerEnter",B="pointer"),te=q==null?G:Ku(q),I=At==null?G:Ku(At),G=new yt($,B+"leave",q,r,Y),G.target=te,G.relatedTarget=I,$=null,Bo(Y)===j&&(yt=new yt(H,B+"enter",At,r,Y),yt.target=I,yt.relatedTarget=te,$=yt),te=$,q&&At)e:{for(yt=q,H=At,B=0,I=yt;I;I=mc(I))B++;for(I=0,$=H;$;$=mc($))I++;for(;0<B-I;)yt=mc(yt),B--;for(;0<I-B;)H=mc(H),I--;for(;B--;){if(yt===H||H!==null&&yt===H.alternate)break e;yt=mc(yt),H=mc(H)}yt=null}else yt=null;q!==null&&jw(Z,G,q,yt,!1),At!==null&&te!==null&&jw(Z,te,At,yt,!0)}}t:{if(G=j?Ku(j):window,q=G.nodeName&&G.nodeName.toLowerCase(),q==="select"||q==="input"&&G.type==="file")var ct=lS;else if(aS(G))if(oS)ct=fR;else{ct=hR;var Ot=uR}else q=G.nodeName,!q||q.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?j&&ry(j.elementType)&&(ct=lS):ct=dR;if(ct&&(ct=ct(i,j))){rS(Z,ct,r,Y);break t}Ot&&Ot(i,G,j),i==="focusout"&&j&&G.type==="number"&&j.memoizedProps.value!=null&&ay(G,"number",G.value)}switch(Ot=j?Ku(j):window,i){case"focusin":(aS(Ot)||Ot.contentEditable==="true")&&(Xo=Ot,Ay=j,sh=null);break;case"focusout":sh=Ay=Xo=null;break;case"mousedown":Sy=!0;break;case"contextmenu":case"mouseup":case"dragend":Sy=!1,mS(Z,r,Y);break;case"selectionchange":if(gR)break;case"keydown":case"keyup":mS(Z,r,Y)}var pt;if(my)t:{switch(i){case"compositionstart":var vt="onCompositionStart";break t;case"compositionend":vt="onCompositionEnd";break t;case"compositionupdate":vt="onCompositionUpdate";break t}vt=void 0}else Vo?nS(i,r)&&(vt="onCompositionEnd"):i==="keydown"&&r.keyCode===229&&(vt="onCompositionStart");vt&&(tS&&r.locale!=="ko"&&(Vo||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Vo&&(pt=KA()):(Fa=Y,hy="value"in Fa?Fa.value:Fa.textContent,Vo=!0)),Ot=Jp(j,vt),0<Ot.length&&(vt=new ZA(vt,i,null,r,Y),Z.push({event:vt,listeners:Ot}),pt?vt.data=pt:(pt=sS(r),pt!==null&&(vt.data=pt)))),(pt=aR?rR(i,r):lR(i,r))&&(vt=Jp(j,"onBeforeInput"),0<vt.length&&(Ot=new ZA("onBeforeInput","beforeinput",null,r,Y),Z.push({event:Ot,listeners:vt}),Ot.data=pt)),QR(Z,i,j,r,Y)}Fw(Z,s)})}function Lh(i,s,r){return{instance:i,listener:s,currentTarget:r}}function Jp(i,s){for(var r=s+"Capture",c=[];i!==null;){var g=i,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Wu(i,r),g!=null&&c.unshift(Lh(i,g,y)),g=Wu(i,s),g!=null&&c.push(Lh(i,g,y))),i.tag===3)return c;i=i.return}return[]}function mc(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function jw(i,s,r,c,g){for(var y=s._reactName,_=[];r!==null&&r!==c;){var M=r,N=M.alternate,j=M.stateNode;if(M=M.tag,N!==null&&N===c)break;M!==5&&M!==26&&M!==27||j===null||(N=j,g?(j=Wu(r,y),j!=null&&_.unshift(Lh(r,j,N))):g||(j=Wu(r,y),j!=null&&_.push(Lh(r,j,N)))),r=r.return}_.length!==0&&i.push({event:s,listeners:_})}var eM=/\r\n?/g,iM=/\u0000|\uFFFD/g;function Gw(i){return(typeof i=="string"?i:""+i).replace(eM,`
`).replace(iM,"")}function qw(i,s){return s=Gw(s),Gw(i)===s}function tg(){}function Jt(i,s,r,c,g,y){switch(r){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||jo(i,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&jo(i,""+c);break;case"className":ap(i,"class",c);break;case"tabIndex":ap(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ap(i,r,c);break;case"style":XA(i,c,y);break;case"data":if(s!=="object"){ap(i,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||r!=="href")){i.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(r);break}c=op(""+c),i.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(s!=="input"&&Jt(i,s,"name",g.name,g,null),Jt(i,s,"formEncType",g.formEncType,g,null),Jt(i,s,"formMethod",g.formMethod,g,null),Jt(i,s,"formTarget",g.formTarget,g,null)):(Jt(i,s,"encType",g.encType,g,null),Jt(i,s,"method",g.method,g,null),Jt(i,s,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(r);break}c=op(""+c),i.setAttribute(r,c);break;case"onClick":c!=null&&(i.onclick=tg);break;case"onScroll":c!=null&&Pt("scroll",i);break;case"onScrollEnd":c!=null&&Pt("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(r=c.__html,r!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=r}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}r=op(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(r,""+c):i.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(r,""):i.removeAttribute(r);break;case"capture":case"download":c===!0?i.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(r,c):i.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(r,c):i.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(r):i.setAttribute(r,c);break;case"popover":Pt("beforetoggle",i),Pt("toggle",i),sp(i,"popover",c);break;case"xlinkActuate":ks(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ks(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ks(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ks(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ks(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ks(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ks(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ks(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ks(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":sp(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=LC.get(r)||r,sp(i,r,c))}}function qb(i,s,r,c,g,y){switch(r){case"style":XA(i,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(r=c.__html,r!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=r}}break;case"children":typeof c=="string"?jo(i,c):(typeof c=="number"||typeof c=="bigint")&&jo(i,""+c);break;case"onScroll":c!=null&&Pt("scroll",i);break;case"onScrollEnd":c!=null&&Pt("scrollend",i);break;case"onClick":c!=null&&(i.onclick=tg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!PA.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(g=r.endsWith("Capture"),s=r.slice(2,g?r.length-7:void 0),y=i[Mi]||null,y=y!=null?y[r]:null,typeof y=="function"&&i.removeEventListener(s,y,g),typeof c=="function")){typeof y!="function"&&y!==null&&(r in i?i[r]=null:i.hasAttribute(r)&&i.removeAttribute(r)),i.addEventListener(s,c,g);break t}r in i?i[r]=c:c===!0?i.setAttribute(r,""):sp(i,r,c)}}}function Je(i,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",i),Pt("load",i);var c=!1,g=!1,y;for(y in r)if(r.hasOwnProperty(y)){var _=r[y];if(_!=null)switch(y){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Jt(i,s,y,_,r,null)}}g&&Jt(i,s,"srcSet",r.srcSet,r,null),c&&Jt(i,s,"src",r.src,r,null);return;case"input":Pt("invalid",i);var M=y=_=g=null,N=null,j=null;for(c in r)if(r.hasOwnProperty(c)){var Y=r[c];if(Y!=null)switch(c){case"name":g=Y;break;case"type":_=Y;break;case"checked":N=Y;break;case"defaultChecked":j=Y;break;case"value":y=Y;break;case"defaultValue":M=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(137,s));break;default:Jt(i,s,c,Y,r,null)}}jA(i,y,M,N,j,_,g,!1),rp(i);return;case"select":Pt("invalid",i),c=_=y=null;for(g in r)if(r.hasOwnProperty(g)&&(M=r[g],M!=null))switch(g){case"value":y=M;break;case"defaultValue":_=M;break;case"multiple":c=M;default:Jt(i,s,g,M,r,null)}s=y,r=_,i.multiple=!!c,s!=null?Io(i,!!c,s,!1):r!=null&&Io(i,!!c,r,!0);return;case"textarea":Pt("invalid",i),y=g=c=null;for(_ in r)if(r.hasOwnProperty(_)&&(M=r[_],M!=null))switch(_){case"value":c=M;break;case"defaultValue":g=M;break;case"children":y=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:Jt(i,s,_,M,r,null)}qA(i,c,g,y),rp(i);return;case"option":for(N in r)if(r.hasOwnProperty(N)&&(c=r[N],c!=null))switch(N){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Jt(i,s,N,c,r,null)}return;case"dialog":Pt("beforetoggle",i),Pt("toggle",i),Pt("cancel",i),Pt("close",i);break;case"iframe":case"object":Pt("load",i);break;case"video":case"audio":for(c=0;c<Oh.length;c++)Pt(Oh[c],i);break;case"image":Pt("error",i),Pt("load",i);break;case"details":Pt("toggle",i);break;case"embed":case"source":case"link":Pt("error",i),Pt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in r)if(r.hasOwnProperty(j)&&(c=r[j],c!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Jt(i,s,j,c,r,null)}return;default:if(ry(s)){for(Y in r)r.hasOwnProperty(Y)&&(c=r[Y],c!==void 0&&qb(i,s,Y,c,r,void 0));return}}for(M in r)r.hasOwnProperty(M)&&(c=r[M],c!=null&&Jt(i,s,M,c,r,null))}function nM(i,s,r,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,_=null,M=null,N=null,j=null,Y=null;for(q in r){var Z=r[q];if(r.hasOwnProperty(q)&&Z!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":N=Z;default:c.hasOwnProperty(q)||Jt(i,s,q,null,c,Z)}}for(var G in c){var q=c[G];if(Z=r[G],c.hasOwnProperty(G)&&(q!=null||Z!=null))switch(G){case"type":y=q;break;case"name":g=q;break;case"checked":j=q;break;case"defaultChecked":Y=q;break;case"value":_=q;break;case"defaultValue":M=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(137,s));break;default:q!==Z&&Jt(i,s,G,q,c,Z)}}sy(i,_,M,N,j,Y,y,g);return;case"select":q=_=M=G=null;for(y in r)if(N=r[y],r.hasOwnProperty(y)&&N!=null)switch(y){case"value":break;case"multiple":q=N;default:c.hasOwnProperty(y)||Jt(i,s,y,null,c,N)}for(g in c)if(y=c[g],N=r[g],c.hasOwnProperty(g)&&(y!=null||N!=null))switch(g){case"value":G=y;break;case"defaultValue":M=y;break;case"multiple":_=y;default:y!==N&&Jt(i,s,g,y,c,N)}s=M,r=_,c=q,G!=null?Io(i,!!r,G,!1):!!c!=!!r&&(s!=null?Io(i,!!r,s,!0):Io(i,!!r,r?[]:"",!1));return;case"textarea":q=G=null;for(M in r)if(g=r[M],r.hasOwnProperty(M)&&g!=null&&!c.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Jt(i,s,M,null,c,g)}for(_ in c)if(g=c[_],y=r[_],c.hasOwnProperty(_)&&(g!=null||y!=null))switch(_){case"value":G=g;break;case"defaultValue":q=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==y&&Jt(i,s,_,g,c,y)}GA(i,G,q);return;case"option":for(var At in r)if(G=r[At],r.hasOwnProperty(At)&&G!=null&&!c.hasOwnProperty(At))switch(At){case"selected":i.selected=!1;break;default:Jt(i,s,At,null,c,G)}for(N in c)if(G=c[N],q=r[N],c.hasOwnProperty(N)&&G!==q&&(G!=null||q!=null))switch(N){case"selected":i.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Jt(i,s,N,G,c,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in r)G=r[yt],r.hasOwnProperty(yt)&&G!=null&&!c.hasOwnProperty(yt)&&Jt(i,s,yt,null,c,G);for(j in c)if(G=c[j],q=r[j],c.hasOwnProperty(j)&&G!==q&&(G!=null||q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(n(137,s));break;default:Jt(i,s,j,G,c,q)}return;default:if(ry(s)){for(var te in r)G=r[te],r.hasOwnProperty(te)&&G!==void 0&&!c.hasOwnProperty(te)&&qb(i,s,te,void 0,c,G);for(Y in c)G=c[Y],q=r[Y],!c.hasOwnProperty(Y)||G===q||G===void 0&&q===void 0||qb(i,s,Y,G,c,q);return}}for(var H in r)G=r[H],r.hasOwnProperty(H)&&G!=null&&!c.hasOwnProperty(H)&&Jt(i,s,H,null,c,G);for(Z in c)G=c[Z],q=r[Z],!c.hasOwnProperty(Z)||G===q||G==null&&q==null||Jt(i,s,Z,G,c,q)}var Vb=null,Xb=null;function eg(i){return i.nodeType===9?i:i.ownerDocument}function Vw(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xw(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Yb(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $b=null;function sM(){var i=window.event;return i&&i.type==="popstate"?i===$b?!1:($b=i,!0):($b=null,!1)}var Yw=typeof setTimeout=="function"?setTimeout:void 0,aM=typeof clearTimeout=="function"?clearTimeout:void 0,$w=typeof Promise=="function"?Promise:void 0,rM=typeof queueMicrotask=="function"?queueMicrotask:typeof $w<"u"?function(i){return $w.resolve(null).then(i).catch(lM)}:Yw;function lM(i){setTimeout(function(){throw i})}function ir(i){return i==="head"}function Kw(i,s){var r=s,c=0,g=0;do{var y=r.nextSibling;if(i.removeChild(r),y&&y.nodeType===8)if(r=y.data,r==="/$"){if(0<c&&8>c){r=c;var _=i.ownerDocument;if(r&1&&Nh(_.documentElement),r&2&&Nh(_.body),r&4)for(r=_.head,Nh(r),_=r.firstChild;_;){var M=_.nextSibling,N=_.nodeName;_[$u]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&_.rel.toLowerCase()==="stylesheet"||r.removeChild(_),_=M}}if(g===0){i.removeChild(y),Ih(s);return}g--}else r==="$"||r==="$?"||r==="$!"?g++:c=r.charCodeAt(0)-48;else c=0;r=y}while(r);Ih(s)}function Kb(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Kb(r),ty(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}i.removeChild(r)}}function oM(i,s,r,c){for(;i.nodeType===1;){var g=r;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[$u])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Hn(i.nextSibling),i===null)break}return null}function cM(i,s,r){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Hn(i.nextSibling),i===null))return null;return i}function Wb(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function uM(i,s){var r=i.ownerDocument;if(i.data!=="$?"||r.readyState==="complete")s();else{var c=function(){s(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Hn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var Qb=null;function Ww(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var r=i.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return i;s--}else r==="/$"&&s++}i=i.previousSibling}return null}function Qw(i,s,r){switch(s=eg(r),i){case"html":if(i=s.documentElement,!i)throw Error(n(452));return i;case"head":if(i=s.head,!i)throw Error(n(453));return i;case"body":if(i=s.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Nh(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);ty(i)}var _n=new Map,Zw=new Set;function ig(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var $s=X.d;X.d={f:hM,r:dM,D:fM,C:pM,L:gM,m:mM,X:bM,S:yM,M:vM};function hM(){var i=$s.f(),s=Yp();return i||s}function dM(i){var s=zo(i);s!==null&&s.tag===5&&s.type==="form"?bE(s):$s.r(i)}var yc=typeof document>"u"?null:document;function Jw(i,s,r){var c=yc;if(c&&typeof s=="string"&&s){var g=yn(s);g='link[rel="'+i+'"][href="'+g+'"]',typeof r=="string"&&(g+='[crossorigin="'+r+'"]'),Zw.has(g)||(Zw.add(g),i={rel:i,crossOrigin:r,href:s},c.querySelector(g)===null&&(s=c.createElement("link"),Je(s,"link",i),Ie(s),c.head.appendChild(s)))}}function fM(i){$s.D(i),Jw("dns-prefetch",i,null)}function pM(i,s){$s.C(i,s),Jw("preconnect",i,s)}function gM(i,s,r){$s.L(i,s,r);var c=yc;if(c&&i&&s){var g='link[rel="preload"][as="'+yn(s)+'"]';s==="image"&&r&&r.imageSrcSet?(g+='[imagesrcset="'+yn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(g+='[imagesizes="'+yn(r.imageSizes)+'"]')):g+='[href="'+yn(i)+'"]';var y=g;switch(s){case"style":y=bc(i);break;case"script":y=vc(i)}_n.has(y)||(i=m({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:i,as:s},r),_n.set(y,i),c.querySelector(g)!==null||s==="style"&&c.querySelector(kh(y))||s==="script"&&c.querySelector(Ph(y))||(s=c.createElement("link"),Je(s,"link",i),Ie(s),c.head.appendChild(s)))}}function mM(i,s){$s.m(i,s);var r=yc;if(r&&i){var c=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+yn(c)+'"][href="'+yn(i)+'"]',y=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=vc(i)}if(!_n.has(y)&&(i=m({rel:"modulepreload",href:i},s),_n.set(y,i),r.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ph(y)))return}c=r.createElement("link"),Je(c,"link",i),Ie(c),r.head.appendChild(c)}}}function yM(i,s,r){$s.S(i,s,r);var c=yc;if(c&&i){var g=Ho(c).hoistableStyles,y=bc(i);s=s||"default";var _=g.get(y);if(!_){var M={loading:0,preload:null};if(_=c.querySelector(kh(y)))M.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":s},r),(r=_n.get(y))&&Zb(i,r);var N=_=c.createElement("link");Ie(N),Je(N,"link",i),N._p=new Promise(function(j,Y){N.onload=j,N.onerror=Y}),N.addEventListener("load",function(){M.loading|=1}),N.addEventListener("error",function(){M.loading|=2}),M.loading|=4,ng(_,s,c)}_={type:"stylesheet",instance:_,count:1,state:M},g.set(y,_)}}}function bM(i,s){$s.X(i,s);var r=yc;if(r&&i){var c=Ho(r).hoistableScripts,g=vc(i),y=c.get(g);y||(y=r.querySelector(Ph(g)),y||(i=m({src:i,async:!0},s),(s=_n.get(g))&&Jb(i,s),y=r.createElement("script"),Ie(y),Je(y,"link",i),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(g,y))}}function vM(i,s){$s.M(i,s);var r=yc;if(r&&i){var c=Ho(r).hoistableScripts,g=vc(i),y=c.get(g);y||(y=r.querySelector(Ph(g)),y||(i=m({src:i,async:!0,type:"module"},s),(s=_n.get(g))&&Jb(i,s),y=r.createElement("script"),Ie(y),Je(y,"link",i),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(g,y))}}function t1(i,s,r,c){var g=(g=mt.current)?ig(g):null;if(!g)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=bc(r.href),r=Ho(g).hoistableStyles,c=r.get(s),c||(c={type:"style",instance:null,count:0,state:null},r.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){i=bc(r.href);var y=Ho(g).hoistableStyles,_=y.get(i);if(_||(g=g.ownerDocument||g,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,_),(y=g.querySelector(kh(i)))&&!y._p&&(_.instance=y,_.state.loading=5),_n.has(i)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},_n.set(i,r),y||AM(g,i,r,_.state))),s&&c===null)throw Error(n(528,""));return _}if(s&&c!==null)throw Error(n(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=vc(r),r=Ho(g).hoistableScripts,c=r.get(s),c||(c={type:"script",instance:null,count:0,state:null},r.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function bc(i){return'href="'+yn(i)+'"'}function kh(i){return'link[rel="stylesheet"]['+i+"]"}function e1(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function AM(i,s,r,c){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=i.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Je(s,"link",r),Ie(s),i.head.appendChild(s))}function vc(i){return'[src="'+yn(i)+'"]'}function Ph(i){return"script[async]"+i}function i1(i,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var c=i.querySelector('style[data-href~="'+yn(r.href)+'"]');if(c)return s.instance=c,Ie(c),c;var g=m({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Ie(c),Je(c,"style",g),ng(c,r.precedence,i),s.instance=c;case"stylesheet":g=bc(r.href);var y=i.querySelector(kh(g));if(y)return s.state.loading|=4,s.instance=y,Ie(y),y;c=e1(r),(g=_n.get(g))&&Zb(c,g),y=(i.ownerDocument||i).createElement("link"),Ie(y);var _=y;return _._p=new Promise(function(M,N){_.onload=M,_.onerror=N}),Je(y,"link",c),s.state.loading|=4,ng(y,r.precedence,i),s.instance=y;case"script":return y=vc(r.src),(g=i.querySelector(Ph(y)))?(s.instance=g,Ie(g),g):(c=r,(g=_n.get(y))&&(c=m({},r),Jb(c,g)),i=i.ownerDocument||i,g=i.createElement("script"),Ie(g),Je(g,"link",c),i.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,ng(c,r.precedence,i));return s.instance}function ng(i,s,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,y=g,_=0;_<c.length;_++){var M=c[_];if(M.dataset.precedence===s)y=M;else if(y!==g)break}y?y.parentNode.insertBefore(i,y.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(i,s.firstChild))}function Zb(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Jb(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var sg=null;function n1(i,s,r){if(sg===null){var c=new Map,g=sg=new Map;g.set(r,c)}else g=sg,c=g.get(r),c||(c=new Map,g.set(r,c));if(c.has(i))return c;for(c.set(i,null),r=r.getElementsByTagName(i),g=0;g<r.length;g++){var y=r[g];if(!(y[$u]||y[ci]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var _=y.getAttribute(s)||"";_=i+_;var M=c.get(_);M?M.push(y):c.set(_,[y])}}return c}function s1(i,s,r){i=i.ownerDocument||i,i.head.insertBefore(r,s==="title"?i.querySelector("head > title"):null)}function SM(i,s,r){if(r===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function a1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Bh=null;function EM(){}function wM(i,s,r){if(Bh===null)throw Error(n(475));var c=Bh;if(s.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var g=bc(r.href),y=i.querySelector(kh(g));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=ag.bind(c),i.then(c,c)),s.state.loading|=4,s.instance=y,Ie(y);return}y=i.ownerDocument||i,r=e1(r),(g=_n.get(g))&&Zb(r,g),y=y.createElement("link"),Ie(y);var _=y;_._p=new Promise(function(M,N){_.onload=M,_.onerror=N}),Je(y,"link",r),s.instance=y}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=ag.bind(c),i.addEventListener("load",s),i.addEventListener("error",s))}}function _M(){if(Bh===null)throw Error(n(475));var i=Bh;return i.stylesheets&&i.count===0&&t0(i,i.stylesheets),0<i.count?function(s){var r=setTimeout(function(){if(i.stylesheets&&t0(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(r)}}:null}function ag(){if(this.count--,this.count===0){if(this.stylesheets)t0(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var rg=null;function t0(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,rg=new Map,s.forEach(TM,i),rg=null,ag.call(i))}function TM(i,s){if(!(s.state.loading&4)){var r=rg.get(i);if(r)var c=r.get(null);else{r=new Map,rg.set(i,r);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var _=g[y];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(r.set(_.dataset.precedence,_),c=_)}c&&r.set(null,c)}g=s.instance,_=g.getAttribute("data-precedence"),y=r.get(_)||c,y===c&&r.set(null,g),r.set(_,g),this.count++,c=ag.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),y?y.parentNode.insertBefore(g,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),s.state.loading|=4}}var zh={$$typeof:D,Provider:null,Consumer:null,_currentValue:ut,_currentValue2:ut,_threadCount:0};function xM(i,s,r,c,g,y,_,M){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wm(0),this.hiddenUpdates=Wm(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function r1(i,s,r,c,g,y,_,M,N,j,Y,Z){return i=new xM(i,s,r,_,M,N,j,Z),s=1,y===!0&&(s|=24),y=Vi(3,null,null,s),i.current=y,y.stateNode=i,s=Py(),s.refCount++,i.pooledCache=s,s.refCount++,y.memoizedState={element:c,isDehydrated:r,cache:s},Uy(y),i}function l1(i){return i?(i=Wo,i):Wo}function o1(i,s,r,c,g,y){g=l1(g),c.context===null?c.context=g:c.pendingContext=g,c=Ga(s),c.payload={element:r},y=y===void 0?null:y,y!==null&&(c.callback=y),r=qa(i,c,s),r!==null&&(Wi(r,i,s),fh(r,i,s))}function c1(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var r=i.retryLane;i.retryLane=r!==0&&r<s?r:s}}function e0(i,s){c1(i,s),(i=i.alternate)&&c1(i,s)}function u1(i){if(i.tag===13){var s=Ko(i,67108864);s!==null&&Wi(s,i,67108864),e0(i,67108864)}}var lg=!0;function CM(i,s,r,c){var g=z.T;z.T=null;var y=X.p;try{X.p=2,i0(i,s,r,c)}finally{X.p=y,z.T=g}}function RM(i,s,r,c){var g=z.T;z.T=null;var y=X.p;try{X.p=8,i0(i,s,r,c)}finally{X.p=y,z.T=g}}function i0(i,s,r,c){if(lg){var g=n0(c);if(g===null)Gb(i,s,c,og,r),d1(i,c);else if(DM(g,i,s,r,c))c.stopPropagation();else if(d1(i,c),s&4&&-1<MM.indexOf(i)){for(;g!==null;){var y=zo(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=Qr(y.pendingLanes);if(_!==0){var M=y;for(M.pendingLanes|=2,M.entangledLanes|=2;_;){var N=1<<31-Gi(_);M.entanglements[1]|=N,_&=~N}cs(y),(Kt&6)===0&&(Vp=ss()+500,Dh(0))}}break;case 13:M=Ko(y,2),M!==null&&Wi(M,y,2),Yp(),e0(y,2)}if(y=n0(c),y===null&&Gb(i,s,c,og,r),y===g)break;g=y}g!==null&&c.stopPropagation()}else Gb(i,s,c,null,r)}}function n0(i){return i=oy(i),s0(i)}var og=null;function s0(i){if(og=null,i=Bo(i),i!==null){var s=l(i);if(s===null)i=null;else{var r=s.tag;if(r===13){if(i=o(s),i!==null)return i;i=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return og=i,null}function h1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pC()){case TA:return 2;case xA:return 8;case tp:case gC:return 32;case CA:return 268435456;default:return 32}default:return 32}}var a0=!1,nr=null,sr=null,ar=null,Hh=new Map,Uh=new Map,rr=[],MM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function d1(i,s){switch(i){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":Hh.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uh.delete(s.pointerId)}}function Fh(i,s,r,c,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:s,domEventName:r,eventSystemFlags:c,nativeEvent:y,targetContainers:[g]},s!==null&&(s=zo(s),s!==null&&u1(s)),i):(i.eventSystemFlags|=c,s=i.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),i)}function DM(i,s,r,c,g){switch(s){case"focusin":return nr=Fh(nr,i,s,r,c,g),!0;case"dragenter":return sr=Fh(sr,i,s,r,c,g),!0;case"mouseover":return ar=Fh(ar,i,s,r,c,g),!0;case"pointerover":var y=g.pointerId;return Hh.set(y,Fh(Hh.get(y)||null,i,s,r,c,g)),!0;case"gotpointercapture":return y=g.pointerId,Uh.set(y,Fh(Uh.get(y)||null,i,s,r,c,g)),!0}return!1}function f1(i){var s=Bo(i.target);if(s!==null){var r=l(s);if(r!==null){if(s=r.tag,s===13){if(s=o(r),s!==null){i.blockedOn=s,wC(i.priority,function(){if(r.tag===13){var c=Ki();c=Qm(c);var g=Ko(r,c);g!==null&&Wi(g,r,c),e0(r,c)}});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){i.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}i.blockedOn=null}function cg(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var r=n0(i.nativeEvent);if(r===null){r=i.nativeEvent;var c=new r.constructor(r.type,r);ly=c,r.target.dispatchEvent(c),ly=null}else return s=zo(r),s!==null&&u1(s),i.blockedOn=r,!1;s.shift()}return!0}function p1(i,s,r){cg(i)&&r.delete(s)}function OM(){a0=!1,nr!==null&&cg(nr)&&(nr=null),sr!==null&&cg(sr)&&(sr=null),ar!==null&&cg(ar)&&(ar=null),Hh.forEach(p1),Uh.forEach(p1)}function ug(i,s){i.blockedOn===s&&(i.blockedOn=null,a0||(a0=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,OM)))}var hg=null;function g1(i){hg!==i&&(hg=i,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){hg===i&&(hg=null);for(var s=0;s<i.length;s+=3){var r=i[s],c=i[s+1],g=i[s+2];if(typeof c!="function"){if(s0(c||r)===null)continue;break}var y=zo(r);y!==null&&(i.splice(s,3),s-=3,sb(y,{pending:!0,data:g,method:r.method,action:c},c,g))}}))}function Ih(i){function s(N){return ug(N,i)}nr!==null&&ug(nr,i),sr!==null&&ug(sr,i),ar!==null&&ug(ar,i),Hh.forEach(s),Uh.forEach(s);for(var r=0;r<rr.length;r++){var c=rr[r];c.blockedOn===i&&(c.blockedOn=null)}for(;0<rr.length&&(r=rr[0],r.blockedOn===null);)f1(r),r.blockedOn===null&&rr.shift();if(r=(i.ownerDocument||i).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var g=r[c],y=r[c+1],_=g[Mi]||null;if(typeof y=="function")_||g1(r);else if(_){var M=null;if(y&&y.hasAttribute("formAction")){if(g=y,_=y[Mi]||null)M=_.formAction;else if(s0(g)!==null)continue}else M=_.action;typeof M=="function"?r[c+1]=M:(r.splice(c,3),c-=3),g1(r)}}}function r0(i){this._internalRoot=i}dg.prototype.render=r0.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(n(409));var r=s.current,c=Ki();o1(r,c,i,s,null,null)},dg.prototype.unmount=r0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;o1(i.current,2,null,i,null,null),Yp(),s[Po]=null}};function dg(i){this._internalRoot=i}dg.prototype.unstable_scheduleHydration=function(i){if(i){var s=LA();i={blockedOn:null,target:i,priority:s};for(var r=0;r<rr.length&&s!==0&&s<rr[r].priority;r++);rr.splice(r,0,i),r===0&&f1(i)}};var m1=t.version;if(m1!=="19.1.0")throw Error(n(527,m1,"19.1.0"));X.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(s),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var LM={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fg.isDisabled&&fg.supportsFiber)try{Vu=fg.inject(LM),ji=fg}catch{}}return Gh.createRoot=function(i,s){if(!a(i))throw Error(n(299));var r=!1,c="",g=LE,y=NE,_=kE,M=null;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(M=s.unstable_transitionCallbacks)),s=r1(i,1,!1,null,null,r,c,g,y,_,M,null),i[Po]=s.current,jb(i),new r0(s)},Gh.hydrateRoot=function(i,s,r){if(!a(i))throw Error(n(299));var c=!1,g="",y=LE,_=NE,M=kE,N=null,j=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(M=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(N=r.unstable_transitionCallbacks),r.formState!==void 0&&(j=r.formState)),s=r1(i,1,!0,s,r??null,c,g,y,_,M,N,j),s.context=l1(null),r=s.current,c=Ki(),c=Qm(c),g=Ga(c),g.callback=null,qa(r,g,c),r=c,s.current.lanes=r,Yu(s,r),cs(s),i[Po]=s.current,jb(i),new dg(s)},Gh.version="19.1.0",Gh}var C1;function qM(){if(C1)return u0.exports;C1=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),u0.exports=GM(),u0.exports}var VM=qM(),qh={},R1;function XM(){if(R1)return qh;R1=1,Object.defineProperty(qh,"__esModule",{value:!0}),qh.parse=o,qh.serialize=p;const h=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function o(v,A){const E=new l,w=v.length;if(w<2)return E;const T=(A==null?void 0:A.decode)||m;let R=0;do{const O=v.indexOf("=",R);if(O===-1)break;const D=v.indexOf(";",R),k=D===-1?w:D;if(O>k){R=v.lastIndexOf(";",O-1)+1;continue}const L=d(v,R,O),U=f(v,O,L),F=v.slice(L,U);if(E[F]===void 0){let W=d(v,O+1,k),J=f(v,k,W);const nt=T(v.slice(W,J));E[F]=nt}R=k+1}while(R<w);return E}function d(v,A,E){do{const w=v.charCodeAt(A);if(w!==32&&w!==9)return A}while(++A<E);return E}function f(v,A,E){for(;A>E;){const w=v.charCodeAt(--A);if(w!==32&&w!==9)return A+1}return E}function p(v,A,E){const w=(E==null?void 0:E.encode)||encodeURIComponent;if(!h.test(v))throw new TypeError(`argument name is invalid: ${v}`);const T=w(A);if(!t.test(T))throw new TypeError(`argument val is invalid: ${A}`);let R=v+"="+T;if(!E)return R;if(E.maxAge!==void 0){if(!Number.isInteger(E.maxAge))throw new TypeError(`option maxAge is invalid: ${E.maxAge}`);R+="; Max-Age="+E.maxAge}if(E.domain){if(!e.test(E.domain))throw new TypeError(`option domain is invalid: ${E.domain}`);R+="; Domain="+E.domain}if(E.path){if(!n.test(E.path))throw new TypeError(`option path is invalid: ${E.path}`);R+="; Path="+E.path}if(E.expires){if(!b(E.expires)||!Number.isFinite(E.expires.valueOf()))throw new TypeError(`option expires is invalid: ${E.expires}`);R+="; Expires="+E.expires.toUTCString()}if(E.httpOnly&&(R+="; HttpOnly"),E.secure&&(R+="; Secure"),E.partitioned&&(R+="; Partitioned"),E.priority)switch(typeof E.priority=="string"?E.priority.toLowerCase():void 0){case"low":R+="; Priority=Low";break;case"medium":R+="; Priority=Medium";break;case"high":R+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${E.priority}`)}if(E.sameSite)switch(typeof E.sameSite=="string"?E.sameSite.toLowerCase():E.sameSite){case!0:case"strict":R+="; SameSite=Strict";break;case"lax":R+="; SameSite=Lax";break;case"none":R+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${E.sameSite}`)}return R}function m(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function b(v){return a.call(v)==="[object Date]"}return qh}XM();var M1="popstate";function YM(h={}){function t(n,a){let{pathname:l,search:o,hash:d}=n.location;return C0("",{pathname:l,search:o,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(n,a){return typeof a=="string"?a:pd(a)}return KM(t,e,null,h)}function ye(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function Ds(h,t){if(!h){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $M(){return Math.random().toString(36).substring(2,10)}function D1(h,t){return{usr:h.state,key:h.key,idx:t}}function C0(h,t,e=null,n){return{pathname:typeof h=="string"?h:h.pathname,search:"",hash:"",...typeof t=="string"?Fu(t):t,state:e,key:t&&t.key||n||$M()}}function pd({pathname:h="/",search:t="",hash:e=""}){return t&&t!=="?"&&(h+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(h+=e.charAt(0)==="#"?e:"#"+e),h}function Fu(h){let t={};if(h){let e=h.indexOf("#");e>=0&&(t.hash=h.substring(e),h=h.substring(0,e));let n=h.indexOf("?");n>=0&&(t.search=h.substring(n),h=h.substring(0,n)),h&&(t.pathname=h)}return t}function KM(h,t,e,n={}){let{window:a=document.defaultView,v5Compat:l=!1}=n,o=a.history,d="POP",f=null,p=m();p==null&&(p=0,o.replaceState({...o.state,idx:p},""));function m(){return(o.state||{idx:null}).idx}function b(){d="POP";let T=m(),R=T==null?null:T-p;p=T,f&&f({action:d,location:w.location,delta:R})}function v(T,R){d="PUSH";let O=C0(w.location,T,R);p=m()+1;let D=D1(O,p),k=w.createHref(O);try{o.pushState(D,"",k)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;a.location.assign(k)}l&&f&&f({action:d,location:w.location,delta:1})}function A(T,R){d="REPLACE";let O=C0(w.location,T,R);p=m();let D=D1(O,p),k=w.createHref(O);o.replaceState(D,"",k),l&&f&&f({action:d,location:w.location,delta:0})}function E(T){let R=a.location.origin!=="null"?a.location.origin:a.location.href,O=typeof T=="string"?T:pd(T);return O=O.replace(/ $/,"%20"),ye(R,`No window.location.(origin|href) available to create URL for href: ${O}`),new URL(O,R)}let w={get action(){return d},get location(){return h(a,o)},listen(T){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(M1,b),f=T,()=>{a.removeEventListener(M1,b),f=null}},createHref(T){return t(a,T)},createURL:E,encodeLocation(T){let R=E(T);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:v,replace:A,go(T){return o.go(T)}};return w}function m_(h,t,e="/"){return WM(h,t,e,!1)}function WM(h,t,e,n){let a=typeof t=="string"?Fu(t):t,l=Na(a.pathname||"/",e);if(l==null)return null;let o=y_(h);QM(o);let d=null;for(let f=0;d==null&&f<o.length;++f){let p=o2(l);d=r2(o[f],p,n)}return d}function y_(h,t=[],e=[],n=""){let a=(l,o,d)=>{let f={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};f.relativePath.startsWith("/")&&(ye(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length));let p=Da([n,f.relativePath]),m=e.concat(f);l.children&&l.children.length>0&&(ye(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),y_(l.children,t,m,p)),!(l.path==null&&!l.index)&&t.push({path:p,score:s2(p,l.index),routesMeta:m})};return h.forEach((l,o)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,o);else for(let f of b_(l.path))a(l,o,f)}),t}function b_(h){let t=h.split("/");if(t.length===0)return[];let[e,...n]=t,a=e.endsWith("?"),l=e.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let o=b_(n.join("/")),d=[];return d.push(...o.map(f=>f===""?l:[l,f].join("/"))),a&&d.push(...o),d.map(f=>h.startsWith("/")&&f===""?"/":f)}function QM(h){h.sort((t,e)=>t.score!==e.score?e.score-t.score:a2(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var ZM=/^:[\w-]+$/,JM=3,t2=2,e2=1,i2=10,n2=-2,O1=h=>h==="*";function s2(h,t){let e=h.split("/"),n=e.length;return e.some(O1)&&(n+=n2),t&&(n+=t2),e.filter(a=>!O1(a)).reduce((a,l)=>a+(ZM.test(l)?JM:l===""?e2:i2),n)}function a2(h,t){return h.length===t.length&&h.slice(0,-1).every((n,a)=>n===t[a])?h[h.length-1]-t[t.length-1]:0}function r2(h,t,e=!1){let{routesMeta:n}=h,a={},l="/",o=[];for(let d=0;d<n.length;++d){let f=n[d],p=d===n.length-1,m=l==="/"?t:t.slice(l.length)||"/",b=sm({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},m),v=f.route;if(!b&&p&&e&&!n[n.length-1].route.index&&(b=sm({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!b)return null;Object.assign(a,b.params),o.push({params:a,pathname:Da([l,b.pathname]),pathnameBase:d2(Da([l,b.pathnameBase])),route:v}),b.pathnameBase!=="/"&&(l=Da([l,b.pathnameBase]))}return o}function sm(h,t){typeof h=="string"&&(h={path:h,caseSensitive:!1,end:!0});let[e,n]=l2(h.path,h.caseSensitive,h.end),a=t.match(e);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:n.reduce((p,{paramName:m,isOptional:b},v)=>{if(m==="*"){let E=d[v]||"";o=l.slice(0,l.length-E.length).replace(/(.)\/+$/,"$1")}const A=d[v];return b&&!A?p[m]=void 0:p[m]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:o,pattern:h}}function l2(h,t=!1,e=!0){Ds(h==="*"||!h.endsWith("*")||h.endsWith("/*"),`Route path "${h}" will be treated as if it were "${h.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${h.replace(/\*$/,"/*")}".`);let n=[],a="^"+h.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,d,f)=>(n.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return h.endsWith("*")?(n.push({paramName:"*"}),a+=h==="*"||h==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":h!==""&&h!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function o2(h){try{return h.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ds(!1,`The URL path "${h}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),h}}function Na(h,t){if(t==="/")return h;if(!h.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=h.charAt(e);return n&&n!=="/"?null:h.slice(e)||"/"}function c2(h,t="/"){let{pathname:e,search:n="",hash:a=""}=typeof h=="string"?Fu(h):h;return{pathname:e?e.startsWith("/")?e:u2(e,t):t,search:f2(n),hash:p2(a)}}function u2(h,t){let e=t.replace(/\/+$/,"").split("/");return h.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function p0(h,t,e,n){return`Cannot include a '${h}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function h2(h){return h.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function v_(h){let t=h2(h);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function A_(h,t,e,n=!1){let a;typeof h=="string"?a=Fu(h):(a={...h},ye(!a.pathname||!a.pathname.includes("?"),p0("?","pathname","search",a)),ye(!a.pathname||!a.pathname.includes("#"),p0("#","pathname","hash",a)),ye(!a.search||!a.search.includes("#"),p0("#","search","hash",a)));let l=h===""||a.pathname==="",o=l?"/":a.pathname,d;if(o==null)d=e;else{let b=t.length-1;if(!n&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),b-=1;a.pathname=v.join("/")}d=b>=0?t[b]:"/"}let f=c2(a,d),p=o&&o!=="/"&&o.endsWith("/"),m=(l||o===".")&&e.endsWith("/");return!f.pathname.endsWith("/")&&(p||m)&&(f.pathname+="/"),f}var Da=h=>h.join("/").replace(/\/\/+/g,"/"),d2=h=>h.replace(/\/+$/,"").replace(/^\/*/,"/"),f2=h=>!h||h==="?"?"":h.startsWith("?")?h:"?"+h,p2=h=>!h||h==="#"?"":h.startsWith("#")?h:"#"+h;function g2(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.internal=="boolean"&&"data"in h}var S_=["POST","PUT","PATCH","DELETE"];new Set(S_);var m2=["GET",...S_];new Set(m2);var Iu=K.createContext(null);Iu.displayName="DataRouter";var Pm=K.createContext(null);Pm.displayName="DataRouterState";var E_=K.createContext({isTransitioning:!1});E_.displayName="ViewTransition";var y2=K.createContext(new Map);y2.displayName="Fetchers";var b2=K.createContext(null);b2.displayName="Await";var Ls=K.createContext(null);Ls.displayName="Navigation";var jf=K.createContext(null);jf.displayName="Location";var Ba=K.createContext({outlet:null,matches:[],isDataRoute:!1});Ba.displayName="Route";var tA=K.createContext(null);tA.displayName="RouteError";function v2(h,{relative:t}={}){ye(Gf(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=K.useContext(Ls),{hash:a,pathname:l,search:o}=qf(h,{relative:t}),d=l;return e!=="/"&&(d=l==="/"?e:Da([e,l])),n.createHref({pathname:d,search:o,hash:a})}function Gf(){return K.useContext(jf)!=null}function Oo(){return ye(Gf(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(jf).location}var w_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function __(h){K.useContext(Ls).static||K.useLayoutEffect(h)}function A2(){let{isDataRoute:h}=K.useContext(Ba);return h?N2():S2()}function S2(){ye(Gf(),"useNavigate() may be used only in the context of a <Router> component.");let h=K.useContext(Iu),{basename:t,navigator:e}=K.useContext(Ls),{matches:n}=K.useContext(Ba),{pathname:a}=Oo(),l=JSON.stringify(v_(n)),o=K.useRef(!1);return __(()=>{o.current=!0}),K.useCallback((f,p={})=>{if(Ds(o.current,w_),!o.current)return;if(typeof f=="number"){e.go(f);return}let m=A_(f,JSON.parse(l),a,p.relative==="path");h==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Da([t,m.pathname])),(p.replace?e.replace:e.push)(m,p.state,p)},[t,e,l,a,h])}K.createContext(null);function qf(h,{relative:t}={}){let{matches:e}=K.useContext(Ba),{pathname:n}=Oo(),a=JSON.stringify(v_(e));return K.useMemo(()=>A_(h,JSON.parse(a),n,t==="path"),[h,a,n,t])}function E2(h,t){return T_(h,t)}function T_(h,t,e,n){var O;ye(Gf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=K.useContext(Ls),{matches:o}=K.useContext(Ba),d=o[o.length-1],f=d?d.params:{},p=d?d.pathname:"/",m=d?d.pathnameBase:"/",b=d&&d.route;{let D=b&&b.path||"";x_(p,!b||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let v=Oo(),A;if(t){let D=typeof t=="string"?Fu(t):t;ye(m==="/"||((O=D.pathname)==null?void 0:O.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${D.pathname}" was given in the \`location\` prop.`),A=D}else A=v;let E=A.pathname||"/",w=E;if(m!=="/"){let D=m.replace(/^\//,"").split("/");w="/"+E.replace(/^\//,"").split("/").slice(D.length).join("/")}let T=!l&&e&&e.matches&&e.matches.length>0?e.matches:m_(h,{pathname:w});Ds(b||T!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Ds(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=C2(T&&T.map(D=>Object.assign({},D,{params:Object.assign({},f,D.params),pathname:Da([m,a.encodeLocation?a.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?m:Da([m,a.encodeLocation?a.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),o,e,n);return t&&R?K.createElement(jf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},R):R}function w2(){let h=L2(),t=g2(h)?`${h.status} ${h.statusText}`:h instanceof Error?h.message:JSON.stringify(h),e=h instanceof Error?h.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",h),o=K.createElement(K.Fragment,null,K.createElement("p",null,"💿 Hey developer 👋"),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:l},"ErrorBoundary")," or"," ",K.createElement("code",{style:l},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},t),e?K.createElement("pre",{style:a},e):null,o)}var _2=K.createElement(w2,null),T2=class extends K.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,t){return t.location!==h.location||t.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:t.error,location:t.location,revalidation:h.revalidation||t.revalidation}}componentDidCatch(h,t){console.error("React Router caught the following error during render",h,t)}render(){return this.state.error!==void 0?K.createElement(Ba.Provider,{value:this.props.routeContext},K.createElement(tA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function x2({routeContext:h,match:t,children:e}){let n=K.useContext(Iu);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),K.createElement(Ba.Provider,{value:h},e)}function C2(h,t=[],e=null,n=null){if(h==null){if(!e)return null;if(e.errors)h=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)h=e.matches;else return null}let a=h,l=e==null?void 0:e.errors;if(l!=null){let f=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);ye(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,d=-1;if(e)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:m,errors:b}=e,v=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!b||b[p.route.id]===void 0);if(p.route.lazy||v){o=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,p,m)=>{let b,v=!1,A=null,E=null;e&&(b=l&&p.route.id?l[p.route.id]:void 0,A=p.route.errorElement||_2,o&&(d<0&&m===0?(x_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,E=null):d===m&&(v=!0,E=p.route.hydrateFallbackElement||null)));let w=t.concat(a.slice(0,m+1)),T=()=>{let R;return b?R=A:v?R=E:p.route.Component?R=K.createElement(p.route.Component,null):p.route.element?R=p.route.element:R=f,K.createElement(x2,{match:p,routeContext:{outlet:f,matches:w,isDataRoute:e!=null},children:R})};return e&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?K.createElement(T2,{location:e.location,revalidation:e.revalidation,component:A,error:b,children:T(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):T()},null)}function eA(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function R2(h){let t=K.useContext(Iu);return ye(t,eA(h)),t}function M2(h){let t=K.useContext(Pm);return ye(t,eA(h)),t}function D2(h){let t=K.useContext(Ba);return ye(t,eA(h)),t}function iA(h){let t=D2(h),e=t.matches[t.matches.length-1];return ye(e.route.id,`${h} can only be used on routes that contain a unique "id"`),e.route.id}function O2(){return iA("useRouteId")}function L2(){var n;let h=K.useContext(tA),t=M2("useRouteError"),e=iA("useRouteError");return h!==void 0?h:(n=t.errors)==null?void 0:n[e]}function N2(){let{router:h}=R2("useNavigate"),t=iA("useNavigate"),e=K.useRef(!1);return __(()=>{e.current=!0}),K.useCallback(async(a,l={})=>{Ds(e.current,w_),e.current&&(typeof a=="number"?h.navigate(a):await h.navigate(a,{fromRouteId:t,...l}))},[h,t])}var L1={};function x_(h,t,e){!t&&!L1[h]&&(L1[h]=!0,Ds(!1,e))}K.memo(k2);function k2({routes:h,future:t,state:e}){return T_(h,void 0,e,t)}function C_(h){ye(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function P2({basename:h="/",children:t=null,location:e,navigationType:n="POP",navigator:a,static:l=!1}){ye(!Gf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=h.replace(/^\/*/,"/"),d=K.useMemo(()=>({basename:o,navigator:a,static:l,future:{}}),[o,a,l]);typeof e=="string"&&(e=Fu(e));let{pathname:f="/",search:p="",hash:m="",state:b=null,key:v="default"}=e,A=K.useMemo(()=>{let E=Na(f,o);return E==null?null:{location:{pathname:E,search:p,hash:m,state:b,key:v},navigationType:n}},[o,f,p,m,b,v,n]);return Ds(A!=null,`<Router basename="${o}"> is not able to match the URL "${f}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:K.createElement(Ls.Provider,{value:d},K.createElement(jf.Provider,{children:t,value:A}))}function B2({children:h,location:t}){return E2(R0(h),t)}function R0(h,t=[]){let e=[];return K.Children.forEach(h,(n,a)=>{if(!K.isValidElement(n))return;let l=[...t,a];if(n.type===K.Fragment){e.push.apply(e,R0(n.props.children,l));return}ye(n.type===C_,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ye(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=R0(n.props.children,l)),e.push(o)}),e}var Eg="get",wg="application/x-www-form-urlencoded";function Bm(h){return h!=null&&typeof h.tagName=="string"}function z2(h){return Bm(h)&&h.tagName.toLowerCase()==="button"}function H2(h){return Bm(h)&&h.tagName.toLowerCase()==="form"}function U2(h){return Bm(h)&&h.tagName.toLowerCase()==="input"}function F2(h){return!!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)}function I2(h,t){return h.button===0&&(!t||t==="_self")&&!F2(h)}var pg=null;function j2(){if(pg===null)try{new FormData(document.createElement("form"),0),pg=!1}catch{pg=!0}return pg}var G2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function g0(h){return h!=null&&!G2.has(h)?(Ds(!1,`"${h}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wg}"`),null):h}function q2(h,t){let e,n,a,l,o;if(H2(h)){let d=h.getAttribute("action");n=d?Na(d,t):null,e=h.getAttribute("method")||Eg,a=g0(h.getAttribute("enctype"))||wg,l=new FormData(h)}else if(z2(h)||U2(h)&&(h.type==="submit"||h.type==="image")){let d=h.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=h.getAttribute("formaction")||d.getAttribute("action");if(n=f?Na(f,t):null,e=h.getAttribute("formmethod")||d.getAttribute("method")||Eg,a=g0(h.getAttribute("formenctype"))||g0(d.getAttribute("enctype"))||wg,l=new FormData(d,h),!j2()){let{name:p,type:m,value:b}=h;if(m==="image"){let v=p?`${p}.`:"";l.append(`${v}x`,"0"),l.append(`${v}y`,"0")}else p&&l.append(p,b)}}else{if(Bm(h))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Eg,n=null,a=wg,o=h}return l&&a==="text/plain"&&(o=l,l=void 0),{action:n,method:e.toLowerCase(),encType:a,formData:l,body:o}}function nA(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}async function V2(h,t){if(h.id in t)return t[h.id];try{let e=await import(h.module);return t[h.id]=e,e}catch(e){return console.error(`Error loading route module \`${h.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function X2(h){return h==null?!1:h.href==null?h.rel==="preload"&&typeof h.imageSrcSet=="string"&&typeof h.imageSizes=="string":typeof h.rel=="string"&&typeof h.href=="string"}async function Y2(h,t,e){let n=await Promise.all(h.map(async a=>{let l=t.routes[a.route.id];if(l){let o=await V2(l,e);return o.links?o.links():[]}return[]}));return Q2(n.flat(1).filter(X2).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function N1(h,t,e,n,a,l){let o=(f,p)=>e[p]?f.route.id!==e[p].route.id:!0,d=(f,p)=>{var m;return e[p].pathname!==f.pathname||((m=e[p].route.path)==null?void 0:m.endsWith("*"))&&e[p].params["*"]!==f.params["*"]};return l==="assets"?t.filter((f,p)=>o(f,p)||d(f,p)):l==="data"?t.filter((f,p)=>{var b;let m=n.routes[f.route.id];if(!m||!m.hasLoader)return!1;if(o(f,p)||d(f,p))return!0;if(f.route.shouldRevalidate){let v=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((b=e[0])==null?void 0:b.params)||{},nextUrl:new URL(h,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function $2(h,t,{includeHydrateFallback:e}={}){return K2(h.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function K2(h){return[...new Set(h)]}function W2(h){let t={},e=Object.keys(h).sort();for(let n of e)t[n]=h[n];return t}function Q2(h,t){let e=new Set;return new Set(t),h.reduce((n,a)=>{let l=JSON.stringify(W2(a));return e.has(l)||(e.add(l),n.push({key:l,link:a})),n},[])}var Z2=new Set([100,101,204,205]);function J2(h,t){let e=typeof h=="string"?new URL(h,typeof window>"u"?"server://singlefetch/":window.location.origin):h;return e.pathname==="/"?e.pathname="_root.data":t&&Na(e.pathname,t)==="/"?e.pathname=`${t.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function R_(){let h=K.useContext(Iu);return nA(h,"You must render this element inside a <DataRouterContext.Provider> element"),h}function tD(){let h=K.useContext(Pm);return nA(h,"You must render this element inside a <DataRouterStateContext.Provider> element"),h}var sA=K.createContext(void 0);sA.displayName="FrameworkContext";function M_(){let h=K.useContext(sA);return nA(h,"You must render this element inside a <HydratedRouter> element"),h}function eD(h,t){let e=K.useContext(sA),[n,a]=K.useState(!1),[l,o]=K.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:p,onMouseLeave:m,onTouchStart:b}=t,v=K.useRef(null);K.useEffect(()=>{if(h==="render"&&o(!0),h==="viewport"){let w=R=>{R.forEach(O=>{o(O.isIntersecting)})},T=new IntersectionObserver(w,{threshold:.5});return v.current&&T.observe(v.current),()=>{T.disconnect()}}},[h]),K.useEffect(()=>{if(n){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[n]);let A=()=>{a(!0)},E=()=>{a(!1),o(!1)};return e?h!=="intent"?[l,v,{}]:[l,v,{onFocus:Vh(d,A),onBlur:Vh(f,E),onMouseEnter:Vh(p,A),onMouseLeave:Vh(m,E),onTouchStart:Vh(b,A)}]:[!1,v,{}]}function Vh(h,t){return e=>{h&&h(e),e.defaultPrevented||t(e)}}function iD({page:h,...t}){let{router:e}=R_(),n=K.useMemo(()=>m_(e.routes,h,e.basename),[e.routes,h,e.basename]);return n?K.createElement(sD,{page:h,matches:n,...t}):null}function nD(h){let{manifest:t,routeModules:e}=M_(),[n,a]=K.useState([]);return K.useEffect(()=>{let l=!1;return Y2(h,t,e).then(o=>{l||a(o)}),()=>{l=!0}},[h,t,e]),n}function sD({page:h,matches:t,...e}){let n=Oo(),{manifest:a,routeModules:l}=M_(),{basename:o}=R_(),{loaderData:d,matches:f}=tD(),p=K.useMemo(()=>N1(h,t,f,a,n,"data"),[h,t,f,a,n]),m=K.useMemo(()=>N1(h,t,f,a,n,"assets"),[h,t,f,a,n]),b=K.useMemo(()=>{if(h===n.pathname+n.search+n.hash)return[];let E=new Set,w=!1;if(t.forEach(R=>{var D;let O=a.routes[R.route.id];!O||!O.hasLoader||(!p.some(k=>k.route.id===R.route.id)&&R.route.id in d&&((D=l[R.route.id])!=null&&D.shouldRevalidate)||O.hasClientLoader?w=!0:E.add(R.route.id))}),E.size===0)return[];let T=J2(h,o);return w&&E.size>0&&T.searchParams.set("_routes",t.filter(R=>E.has(R.route.id)).map(R=>R.route.id).join(",")),[T.pathname+T.search]},[o,d,n,a,p,t,h,l]),v=K.useMemo(()=>$2(m,a),[m,a]),A=nD(m);return K.createElement(K.Fragment,null,b.map(E=>K.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...e})),v.map(E=>K.createElement("link",{key:E,rel:"modulepreload",href:E,...e})),A.map(({key:E,link:w})=>K.createElement("link",{key:E,...w})))}function aD(...h){return t=>{h.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var D_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{D_&&(window.__reactRouterVersion="7.5.2")}catch{}function rD({basename:h,children:t,window:e}){let n=K.useRef();n.current==null&&(n.current=YM({window:e,v5Compat:!0}));let a=n.current,[l,o]=K.useState({action:a.action,location:a.location}),d=K.useCallback(f=>{K.startTransition(()=>o(f))},[o]);return K.useLayoutEffect(()=>a.listen(d),[a,d]),K.createElement(P2,{basename:h,children:t,location:l.location,navigationType:l.action,navigator:a})}var O_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,L_=K.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:a,reloadDocument:l,replace:o,state:d,target:f,to:p,preventScrollReset:m,viewTransition:b,...v},A){let{basename:E}=K.useContext(Ls),w=typeof p=="string"&&O_.test(p),T,R=!1;if(typeof p=="string"&&w&&(T=p,D_))try{let J=new URL(window.location.href),nt=p.startsWith("//")?new URL(J.protocol+p):new URL(p),st=Na(nt.pathname,E);nt.origin===J.origin&&st!=null?p=st+nt.search+nt.hash:R=!0}catch{Ds(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=v2(p,{relative:a}),[D,k,L]=eD(n,v),U=uD(p,{replace:o,state:d,target:f,preventScrollReset:m,relative:a,viewTransition:b});function F(J){t&&t(J),J.defaultPrevented||U(J)}let W=K.createElement("a",{...v,...L,href:T||O,onClick:R||l?t:F,ref:aD(A,k),target:f,"data-discover":!w&&e==="render"?"true":void 0});return D&&!w?K.createElement(K.Fragment,null,W,K.createElement(iD,{page:O})):W});L_.displayName="Link";var lD=K.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:a=!1,style:l,to:o,viewTransition:d,children:f,...p},m){let b=qf(o,{relative:p.relative}),v=Oo(),A=K.useContext(Pm),{navigator:E,basename:w}=K.useContext(Ls),T=A!=null&&gD(b)&&d===!0,R=E.encodeLocation?E.encodeLocation(b).pathname:b.pathname,O=v.pathname,D=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;e||(O=O.toLowerCase(),D=D?D.toLowerCase():null,R=R.toLowerCase()),D&&w&&(D=Na(D,w)||D);const k=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let L=O===R||!a&&O.startsWith(R)&&O.charAt(k)==="/",U=D!=null&&(D===R||!a&&D.startsWith(R)&&D.charAt(R.length)==="/"),F={isActive:L,isPending:U,isTransitioning:T},W=L?t:void 0,J;typeof n=="function"?J=n(F):J=[n,L?"active":null,U?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let nt=typeof l=="function"?l(F):l;return K.createElement(L_,{...p,"aria-current":W,className:J,ref:m,style:nt,to:o,viewTransition:d},typeof f=="function"?f(F):f)});lD.displayName="NavLink";var oD=K.forwardRef(({discover:h="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:a,state:l,method:o=Eg,action:d,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:b,...v},A)=>{let E=fD(),w=pD(d,{relative:p}),T=o.toLowerCase()==="get"?"get":"post",R=typeof d=="string"&&O_.test(d),O=D=>{if(f&&f(D),D.defaultPrevented)return;D.preventDefault();let k=D.nativeEvent.submitter,L=(k==null?void 0:k.getAttribute("formmethod"))||o;E(k||D.currentTarget,{fetcherKey:t,method:L,navigate:e,replace:a,state:l,relative:p,preventScrollReset:m,viewTransition:b})};return K.createElement("form",{ref:A,method:T,action:w,onSubmit:n?f:O,...v,"data-discover":!R&&h==="render"?"true":void 0})});oD.displayName="Form";function cD(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function N_(h){let t=K.useContext(Iu);return ye(t,cD(h)),t}function uD(h,{target:t,replace:e,state:n,preventScrollReset:a,relative:l,viewTransition:o}={}){let d=A2(),f=Oo(),p=qf(h,{relative:l});return K.useCallback(m=>{if(I2(m,t)){m.preventDefault();let b=e!==void 0?e:pd(f)===pd(p);d(h,{replace:b,state:n,preventScrollReset:a,relative:l,viewTransition:o})}},[f,d,p,e,n,t,h,a,l,o])}var hD=0,dD=()=>`__${String(++hD)}__`;function fD(){let{router:h}=N_("useSubmit"),{basename:t}=K.useContext(Ls),e=O2();return K.useCallback(async(n,a={})=>{let{action:l,method:o,encType:d,formData:f,body:p}=q2(n,t);if(a.navigate===!1){let m=a.fetcherKey||dD();await h.fetch(m,e,a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:p,formMethod:a.method||o,formEncType:a.encType||d,flushSync:a.flushSync})}else await h.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:p,formMethod:a.method||o,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[h,t,e])}function pD(h,{relative:t}={}){let{basename:e}=K.useContext(Ls),n=K.useContext(Ba);ye(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),l={...qf(h||".",{relative:t})},o=Oo();if(h==null){l.search=o.search;let d=new URLSearchParams(l.search),f=d.getAll("index");if(f.some(m=>m==="")){d.delete("index"),f.filter(b=>b).forEach(b=>d.append("index",b));let m=d.toString();l.search=m?`?${m}`:""}}return(!h||h===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(l.pathname=l.pathname==="/"?e:Da([e,l.pathname])),pd(l)}function gD(h,t={}){let e=K.useContext(E_);ye(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=N_("useViewTransitionState"),a=qf(h,{relative:t.relative});if(!e.isTransitioning)return!1;let l=Na(e.currentLocation.pathname,n)||e.currentLocation.pathname,o=Na(e.nextLocation.pathname,n)||e.nextLocation.pathname;return sm(a.pathname,o)!=null||sm(a.pathname,l)!=null}new TextEncoder;[...Z2];const mD=({onImportSanskrit:h,onImportTibetan:t,onImportChinese:e})=>gt.jsx("nav",{className:"bg-gray-800 p-4",children:gt.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[gt.jsx("h1",{className:"text-white text-xl font-bold",children:"梵藏汉阅读器"}),gt.jsxs("div",{className:"flex space-x-4",children:[gt.jsx("input",{type:"file",accept:".txt,.pdf",className:"hidden",id:"sanskrit-file",onChange:n=>h(n.target.files[0])}),gt.jsx("label",{htmlFor:"sanskrit-file",className:"text-white bg-blue-500 hover:bg-blue-700 py-2 px-4 rounded cursor-pointer",children:"导入梵语文件"}),gt.jsx("input",{type:"file",accept:".txt,.pdf",className:"hidden",id:"tibetan-file",onChange:n=>t(n.target.files[0])}),gt.jsx("label",{htmlFor:"tibetan-file",className:"text-white bg-green-500 hover:bg-green-700 py-2 px-4 rounded cursor-pointer",children:"导入藏语文件"}),gt.jsx("input",{type:"file",accept:".txt,.pdf",className:"hidden",id:"chinese-file",onChange:n=>e(n.target.files[0])}),gt.jsx("label",{htmlFor:"chinese-file",className:"text-white bg-yellow-500 hover:bg-yellow-700 py-2 px-4 rounded cursor-pointer",children:"导入汉语文件"})]})]})});function k_(h,t){return function(){return h.apply(t,arguments)}}const{toString:yD}=Object.prototype,{getPrototypeOf:aA}=Object,{iterator:zm,toStringTag:P_}=Symbol,Hm=(h=>t=>{const e=yD.call(t);return h[e]||(h[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),es=h=>(h=h.toLowerCase(),t=>Hm(t)===h),Um=h=>t=>typeof t===h,{isArray:ju}=Array,gd=Um("undefined");function bD(h){return h!==null&&!gd(h)&&h.constructor!==null&&!gd(h.constructor)&&Fi(h.constructor.isBuffer)&&h.constructor.isBuffer(h)}const B_=es("ArrayBuffer");function vD(h){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(h):t=h&&h.buffer&&B_(h.buffer),t}const AD=Um("string"),Fi=Um("function"),z_=Um("number"),Fm=h=>h!==null&&typeof h=="object",SD=h=>h===!0||h===!1,_g=h=>{if(Hm(h)!=="object")return!1;const t=aA(h);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(P_ in h)&&!(zm in h)},ED=es("Date"),wD=es("File"),_D=es("Blob"),TD=es("FileList"),xD=h=>Fm(h)&&Fi(h.pipe),CD=h=>{let t;return h&&(typeof FormData=="function"&&h instanceof FormData||Fi(h.append)&&((t=Hm(h))==="formdata"||t==="object"&&Fi(h.toString)&&h.toString()==="[object FormData]"))},RD=es("URLSearchParams"),[MD,DD,OD,LD]=["ReadableStream","Request","Response","Headers"].map(es),ND=h=>h.trim?h.trim():h.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vf(h,t,{allOwnKeys:e=!1}={}){if(h===null||typeof h>"u")return;let n,a;if(typeof h!="object"&&(h=[h]),ju(h))for(n=0,a=h.length;n<a;n++)t.call(null,h[n],n,h);else{const l=e?Object.getOwnPropertyNames(h):Object.keys(h),o=l.length;let d;for(n=0;n<o;n++)d=l[n],t.call(null,h[d],d,h)}}function H_(h,t){t=t.toLowerCase();const e=Object.keys(h);let n=e.length,a;for(;n-- >0;)if(a=e[n],t===a.toLowerCase())return a;return null}const Al=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,U_=h=>!gd(h)&&h!==Al;function M0(){const{caseless:h}=U_(this)&&this||{},t={},e=(n,a)=>{const l=h&&H_(t,a)||a;_g(t[l])&&_g(n)?t[l]=M0(t[l],n):_g(n)?t[l]=M0({},n):ju(n)?t[l]=n.slice():t[l]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&Vf(arguments[n],e);return t}const kD=(h,t,e,{allOwnKeys:n}={})=>(Vf(t,(a,l)=>{e&&Fi(a)?h[l]=k_(a,e):h[l]=a},{allOwnKeys:n}),h),PD=h=>(h.charCodeAt(0)===65279&&(h=h.slice(1)),h),BD=(h,t,e,n)=>{h.prototype=Object.create(t.prototype,n),h.prototype.constructor=h,Object.defineProperty(h,"super",{value:t.prototype}),e&&Object.assign(h.prototype,e)},zD=(h,t,e,n)=>{let a,l,o;const d={};if(t=t||{},h==null)return t;do{for(a=Object.getOwnPropertyNames(h),l=a.length;l-- >0;)o=a[l],(!n||n(o,h,t))&&!d[o]&&(t[o]=h[o],d[o]=!0);h=e!==!1&&aA(h)}while(h&&(!e||e(h,t))&&h!==Object.prototype);return t},HD=(h,t,e)=>{h=String(h),(e===void 0||e>h.length)&&(e=h.length),e-=t.length;const n=h.indexOf(t,e);return n!==-1&&n===e},UD=h=>{if(!h)return null;if(ju(h))return h;let t=h.length;if(!z_(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=h[t];return e},FD=(h=>t=>h&&t instanceof h)(typeof Uint8Array<"u"&&aA(Uint8Array)),ID=(h,t)=>{const n=(h&&h[zm]).call(h);let a;for(;(a=n.next())&&!a.done;){const l=a.value;t.call(h,l[0],l[1])}},jD=(h,t)=>{let e;const n=[];for(;(e=h.exec(t))!==null;)n.push(e);return n},GD=es("HTMLFormElement"),qD=h=>h.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,a){return n.toUpperCase()+a}),k1=(({hasOwnProperty:h})=>(t,e)=>h.call(t,e))(Object.prototype),VD=es("RegExp"),F_=(h,t)=>{const e=Object.getOwnPropertyDescriptors(h),n={};Vf(e,(a,l)=>{let o;(o=t(a,l,h))!==!1&&(n[l]=o||a)}),Object.defineProperties(h,n)},XD=h=>{F_(h,(t,e)=>{if(Fi(h)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=h[e];if(Fi(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},YD=(h,t)=>{const e={},n=a=>{a.forEach(l=>{e[l]=!0})};return ju(h)?n(h):n(String(h).split(t)),e},$D=()=>{},KD=(h,t)=>h!=null&&Number.isFinite(h=+h)?h:t;function WD(h){return!!(h&&Fi(h.append)&&h[P_]==="FormData"&&h[zm])}const QD=h=>{const t=new Array(10),e=(n,a)=>{if(Fm(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[a]=n;const l=ju(n)?[]:{};return Vf(n,(o,d)=>{const f=e(o,a+1);!gd(f)&&(l[d]=f)}),t[a]=void 0,l}}return n};return e(h,0)},ZD=es("AsyncFunction"),JD=h=>h&&(Fm(h)||Fi(h))&&Fi(h.then)&&Fi(h.catch),I_=((h,t)=>h?setImmediate:t?((e,n)=>(Al.addEventListener("message",({source:a,data:l})=>{a===Al&&l===e&&n.length&&n.shift()()},!1),a=>{n.push(a),Al.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Fi(Al.postMessage)),tO=typeof queueMicrotask<"u"?queueMicrotask.bind(Al):typeof process<"u"&&process.nextTick||I_,eO=h=>h!=null&&Fi(h[zm]),V={isArray:ju,isArrayBuffer:B_,isBuffer:bD,isFormData:CD,isArrayBufferView:vD,isString:AD,isNumber:z_,isBoolean:SD,isObject:Fm,isPlainObject:_g,isReadableStream:MD,isRequest:DD,isResponse:OD,isHeaders:LD,isUndefined:gd,isDate:ED,isFile:wD,isBlob:_D,isRegExp:VD,isFunction:Fi,isStream:xD,isURLSearchParams:RD,isTypedArray:FD,isFileList:TD,forEach:Vf,merge:M0,extend:kD,trim:ND,stripBOM:PD,inherits:BD,toFlatObject:zD,kindOf:Hm,kindOfTest:es,endsWith:HD,toArray:UD,forEachEntry:ID,matchAll:jD,isHTMLForm:GD,hasOwnProperty:k1,hasOwnProp:k1,reduceDescriptors:F_,freezeMethods:XD,toObjectSet:YD,toCamelCase:qD,noop:$D,toFiniteNumber:KD,findKey:H_,global:Al,isContextDefined:U_,isSpecCompliantForm:WD,toJSONObject:QD,isAsyncFn:ZD,isThenable:JD,setImmediate:I_,asap:tO,isIterable:eO};function Tt(h,t,e,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=h,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}V.inherits(Tt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const j_=Tt.prototype,G_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(h=>{G_[h]={value:h}});Object.defineProperties(Tt,G_);Object.defineProperty(j_,"isAxiosError",{value:!0});Tt.from=(h,t,e,n,a,l)=>{const o=Object.create(j_);return V.toFlatObject(h,o,function(f){return f!==Error.prototype},d=>d!=="isAxiosError"),Tt.call(o,h.message,t,e,n,a),o.cause=h,o.name=h.name,l&&Object.assign(o,l),o};const iO=null;function D0(h){return V.isPlainObject(h)||V.isArray(h)}function q_(h){return V.endsWith(h,"[]")?h.slice(0,-2):h}function P1(h,t,e){return h?h.concat(t).map(function(a,l){return a=q_(a),!e&&l?"["+a+"]":a}).join(e?".":""):t}function nO(h){return V.isArray(h)&&!h.some(D0)}const sO=V.toFlatObject(V,{},null,function(t){return/^is[A-Z]/.test(t)});function Im(h,t,e){if(!V.isObject(h))throw new TypeError("target must be an object");t=t||new FormData,e=V.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,T){return!V.isUndefined(T[w])});const n=e.metaTokens,a=e.visitor||m,l=e.dots,o=e.indexes,f=(e.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(t);if(!V.isFunction(a))throw new TypeError("visitor must be a function");function p(E){if(E===null)return"";if(V.isDate(E))return E.toISOString();if(!f&&V.isBlob(E))throw new Tt("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(E)||V.isTypedArray(E)?f&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function m(E,w,T){let R=E;if(E&&!T&&typeof E=="object"){if(V.endsWith(w,"{}"))w=n?w:w.slice(0,-2),E=JSON.stringify(E);else if(V.isArray(E)&&nO(E)||(V.isFileList(E)||V.endsWith(w,"[]"))&&(R=V.toArray(E)))return w=q_(w),R.forEach(function(D,k){!(V.isUndefined(D)||D===null)&&t.append(o===!0?P1([w],k,l):o===null?w:w+"[]",p(D))}),!1}return D0(E)?!0:(t.append(P1(T,w,l),p(E)),!1)}const b=[],v=Object.assign(sO,{defaultVisitor:m,convertValue:p,isVisitable:D0});function A(E,w){if(!V.isUndefined(E)){if(b.indexOf(E)!==-1)throw Error("Circular reference detected in "+w.join("."));b.push(E),V.forEach(E,function(R,O){(!(V.isUndefined(R)||R===null)&&a.call(t,R,V.isString(O)?O.trim():O,w,v))===!0&&A(R,w?w.concat(O):[O])}),b.pop()}}if(!V.isObject(h))throw new TypeError("data must be an object");return A(h),t}function B1(h){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(h).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function rA(h,t){this._pairs=[],h&&Im(h,this,t)}const V_=rA.prototype;V_.append=function(t,e){this._pairs.push([t,e])};V_.toString=function(t){const e=t?function(n){return t.call(this,n,B1)}:B1;return this._pairs.map(function(a){return e(a[0])+"="+e(a[1])},"").join("&")};function aO(h){return encodeURIComponent(h).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function X_(h,t,e){if(!t)return h;const n=e&&e.encode||aO;V.isFunction(e)&&(e={serialize:e});const a=e&&e.serialize;let l;if(a?l=a(t,e):l=V.isURLSearchParams(t)?t.toString():new rA(t,e).toString(n),l){const o=h.indexOf("#");o!==-1&&(h=h.slice(0,o)),h+=(h.indexOf("?")===-1?"?":"&")+l}return h}class z1{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){V.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Y_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rO=typeof URLSearchParams<"u"?URLSearchParams:rA,lO=typeof FormData<"u"?FormData:null,oO=typeof Blob<"u"?Blob:null,cO={isBrowser:!0,classes:{URLSearchParams:rO,FormData:lO,Blob:oO},protocols:["http","https","file","blob","url","data"]},lA=typeof window<"u"&&typeof document<"u",O0=typeof navigator=="object"&&navigator||void 0,uO=lA&&(!O0||["ReactNative","NativeScript","NS"].indexOf(O0.product)<0),hO=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",dO=lA&&window.location.href||"http://localhost",fO=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:lA,hasStandardBrowserEnv:uO,hasStandardBrowserWebWorkerEnv:hO,navigator:O0,origin:dO},Symbol.toStringTag,{value:"Module"})),bi={...fO,...cO};function pO(h,t){return Im(h,new bi.classes.URLSearchParams,Object.assign({visitor:function(e,n,a,l){return bi.isNode&&V.isBuffer(e)?(this.append(n,e.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},t))}function gO(h){return V.matchAll(/\w+|\[(\w*)]/g,h).map(t=>t[0]==="[]"?"":t[1]||t[0])}function mO(h){const t={},e=Object.keys(h);let n;const a=e.length;let l;for(n=0;n<a;n++)l=e[n],t[l]=h[l];return t}function $_(h){function t(e,n,a,l){let o=e[l++];if(o==="__proto__")return!0;const d=Number.isFinite(+o),f=l>=e.length;return o=!o&&V.isArray(a)?a.length:o,f?(V.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!d):((!a[o]||!V.isObject(a[o]))&&(a[o]=[]),t(e,n,a[o],l)&&V.isArray(a[o])&&(a[o]=mO(a[o])),!d)}if(V.isFormData(h)&&V.isFunction(h.entries)){const e={};return V.forEachEntry(h,(n,a)=>{t(gO(n),a,e,0)}),e}return null}function yO(h,t,e){if(V.isString(h))try{return(t||JSON.parse)(h),V.trim(h)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(h)}const Xf={transitional:Y_,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",a=n.indexOf("application/json")>-1,l=V.isObject(t);if(l&&V.isHTMLForm(t)&&(t=new FormData(t)),V.isFormData(t))return a?JSON.stringify($_(t)):t;if(V.isArrayBuffer(t)||V.isBuffer(t)||V.isStream(t)||V.isFile(t)||V.isBlob(t)||V.isReadableStream(t))return t;if(V.isArrayBufferView(t))return t.buffer;if(V.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return pO(t,this.formSerializer).toString();if((d=V.isFileList(t))||n.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Im(d?{"files[]":t}:t,f&&new f,this.formSerializer)}}return l||a?(e.setContentType("application/json",!1),yO(t)):t}],transformResponse:[function(t){const e=this.transitional||Xf.transitional,n=e&&e.forcedJSONParsing,a=this.responseType==="json";if(V.isResponse(t)||V.isReadableStream(t))return t;if(t&&V.isString(t)&&(n&&!this.responseType||a)){const o=!(e&&e.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(d){if(o)throw d.name==="SyntaxError"?Tt.from(d,Tt.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:bi.classes.FormData,Blob:bi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],h=>{Xf.headers[h]={}});const bO=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vO=h=>{const t={};let e,n,a;return h&&h.split(`
`).forEach(function(o){a=o.indexOf(":"),e=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!e||t[e]&&bO[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},H1=Symbol("internals");function Xh(h){return h&&String(h).trim().toLowerCase()}function Tg(h){return h===!1||h==null?h:V.isArray(h)?h.map(Tg):String(h)}function AO(h){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(h);)t[n[1]]=n[2];return t}const SO=h=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(h.trim());function m0(h,t,e,n,a){if(V.isFunction(n))return n.call(this,t,e);if(a&&(t=e),!!V.isString(t)){if(V.isString(n))return t.indexOf(n)!==-1;if(V.isRegExp(n))return n.test(t)}}function EO(h){return h.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function wO(h,t){const e=V.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(h,n+e,{value:function(a,l,o){return this[n].call(this,t,a,l,o)},configurable:!0})})}let Ii=class{constructor(t){t&&this.set(t)}set(t,e,n){const a=this;function l(d,f,p){const m=Xh(f);if(!m)throw new Error("header name must be a non-empty string");const b=V.findKey(a,m);(!b||a[b]===void 0||p===!0||p===void 0&&a[b]!==!1)&&(a[b||f]=Tg(d))}const o=(d,f)=>V.forEach(d,(p,m)=>l(p,m,f));if(V.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(V.isString(t)&&(t=t.trim())&&!SO(t))o(vO(t),e);else if(V.isObject(t)&&V.isIterable(t)){let d={},f,p;for(const m of t){if(!V.isArray(m))throw TypeError("Object iterator must return a key-value pair");d[p=m[0]]=(f=d[p])?V.isArray(f)?[...f,m[1]]:[f,m[1]]:m[1]}o(d,e)}else t!=null&&l(e,t,n);return this}get(t,e){if(t=Xh(t),t){const n=V.findKey(this,t);if(n){const a=this[n];if(!e)return a;if(e===!0)return AO(a);if(V.isFunction(e))return e.call(this,a,n);if(V.isRegExp(e))return e.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Xh(t),t){const n=V.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||m0(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let a=!1;function l(o){if(o=Xh(o),o){const d=V.findKey(n,o);d&&(!e||m0(n,n[d],d,e))&&(delete n[d],a=!0)}}return V.isArray(t)?t.forEach(l):l(t),a}clear(t){const e=Object.keys(this);let n=e.length,a=!1;for(;n--;){const l=e[n];(!t||m0(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const e=this,n={};return V.forEach(this,(a,l)=>{const o=V.findKey(n,l);if(o){e[o]=Tg(a),delete e[l];return}const d=t?EO(l):String(l).trim();d!==l&&delete e[l],e[d]=Tg(a),n[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return V.forEach(this,(n,a)=>{n!=null&&n!==!1&&(e[a]=t&&V.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[H1]=this[H1]={accessors:{}}).accessors,a=this.prototype;function l(o){const d=Xh(o);n[d]||(wO(a,o),n[d]=!0)}return V.isArray(t)?t.forEach(l):l(t),this}};Ii.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(Ii.prototype,({value:h},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>h,set(n){this[e]=n}}});V.freezeMethods(Ii);function y0(h,t){const e=this||Xf,n=t||e,a=Ii.from(n.headers);let l=n.data;return V.forEach(h,function(d){l=d.call(e,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function K_(h){return!!(h&&h.__CANCEL__)}function Gu(h,t,e){Tt.call(this,h??"canceled",Tt.ERR_CANCELED,t,e),this.name="CanceledError"}V.inherits(Gu,Tt,{__CANCEL__:!0});function W_(h,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?h(e):t(new Tt("Request failed with status code "+e.status,[Tt.ERR_BAD_REQUEST,Tt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function _O(h){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(h);return t&&t[1]||""}function TO(h,t){h=h||10;const e=new Array(h),n=new Array(h);let a=0,l=0,o;return t=t!==void 0?t:1e3,function(f){const p=Date.now(),m=n[l];o||(o=p),e[a]=f,n[a]=p;let b=l,v=0;for(;b!==a;)v+=e[b++],b=b%h;if(a=(a+1)%h,a===l&&(l=(l+1)%h),p-o<t)return;const A=m&&p-m;return A?Math.round(v*1e3/A):void 0}}function xO(h,t){let e=0,n=1e3/t,a,l;const o=(p,m=Date.now())=>{e=m,a=null,l&&(clearTimeout(l),l=null),h.apply(null,p)};return[(...p)=>{const m=Date.now(),b=m-e;b>=n?o(p,m):(a=p,l||(l=setTimeout(()=>{l=null,o(a)},n-b)))},()=>a&&o(a)]}const am=(h,t,e=3)=>{let n=0;const a=TO(50,250);return xO(l=>{const o=l.loaded,d=l.lengthComputable?l.total:void 0,f=o-n,p=a(f),m=o<=d;n=o;const b={loaded:o,total:d,progress:d?o/d:void 0,bytes:f,rate:p||void 0,estimated:p&&d&&m?(d-o)/p:void 0,event:l,lengthComputable:d!=null,[t?"download":"upload"]:!0};h(b)},e)},U1=(h,t)=>{const e=h!=null;return[n=>t[0]({lengthComputable:e,total:h,loaded:n}),t[1]]},F1=h=>(...t)=>V.asap(()=>h(...t)),CO=bi.hasStandardBrowserEnv?((h,t)=>e=>(e=new URL(e,bi.origin),h.protocol===e.protocol&&h.host===e.host&&(t||h.port===e.port)))(new URL(bi.origin),bi.navigator&&/(msie|trident)/i.test(bi.navigator.userAgent)):()=>!0,RO=bi.hasStandardBrowserEnv?{write(h,t,e,n,a,l){const o=[h+"="+encodeURIComponent(t)];V.isNumber(e)&&o.push("expires="+new Date(e).toGMTString()),V.isString(n)&&o.push("path="+n),V.isString(a)&&o.push("domain="+a),l===!0&&o.push("secure"),document.cookie=o.join("; ")},read(h){const t=document.cookie.match(new RegExp("(^|;\\s*)("+h+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(h){this.write(h,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function MO(h){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(h)}function DO(h,t){return t?h.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):h}function Q_(h,t,e){let n=!MO(t);return h&&(n||e==!1)?DO(h,t):t}const I1=h=>h instanceof Ii?{...h}:h;function Co(h,t){t=t||{};const e={};function n(p,m,b,v){return V.isPlainObject(p)&&V.isPlainObject(m)?V.merge.call({caseless:v},p,m):V.isPlainObject(m)?V.merge({},m):V.isArray(m)?m.slice():m}function a(p,m,b,v){if(V.isUndefined(m)){if(!V.isUndefined(p))return n(void 0,p,b,v)}else return n(p,m,b,v)}function l(p,m){if(!V.isUndefined(m))return n(void 0,m)}function o(p,m){if(V.isUndefined(m)){if(!V.isUndefined(p))return n(void 0,p)}else return n(void 0,m)}function d(p,m,b){if(b in t)return n(p,m);if(b in h)return n(void 0,p)}const f={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:d,headers:(p,m,b)=>a(I1(p),I1(m),b,!0)};return V.forEach(Object.keys(Object.assign({},h,t)),function(m){const b=f[m]||a,v=b(h[m],t[m],m);V.isUndefined(v)&&b!==d||(e[m]=v)}),e}const Z_=h=>{const t=Co({},h);let{data:e,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:l,headers:o,auth:d}=t;t.headers=o=Ii.from(o),t.url=X_(Q_(t.baseURL,t.url,t.allowAbsoluteUrls),h.params,h.paramsSerializer),d&&o.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let f;if(V.isFormData(e)){if(bi.hasStandardBrowserEnv||bi.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((f=o.getContentType())!==!1){const[p,...m]=f?f.split(";").map(b=>b.trim()).filter(Boolean):[];o.setContentType([p||"multipart/form-data",...m].join("; "))}}if(bi.hasStandardBrowserEnv&&(n&&V.isFunction(n)&&(n=n(t)),n||n!==!1&&CO(t.url))){const p=a&&l&&RO.read(l);p&&o.set(a,p)}return t},OO=typeof XMLHttpRequest<"u",LO=OO&&function(h){return new Promise(function(e,n){const a=Z_(h);let l=a.data;const o=Ii.from(a.headers).normalize();let{responseType:d,onUploadProgress:f,onDownloadProgress:p}=a,m,b,v,A,E;function w(){A&&A(),E&&E(),a.cancelToken&&a.cancelToken.unsubscribe(m),a.signal&&a.signal.removeEventListener("abort",m)}let T=new XMLHttpRequest;T.open(a.method.toUpperCase(),a.url,!0),T.timeout=a.timeout;function R(){if(!T)return;const D=Ii.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),L={data:!d||d==="text"||d==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:D,config:h,request:T};W_(function(F){e(F),w()},function(F){n(F),w()},L),T=null}"onloadend"in T?T.onloadend=R:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(R)},T.onabort=function(){T&&(n(new Tt("Request aborted",Tt.ECONNABORTED,h,T)),T=null)},T.onerror=function(){n(new Tt("Network Error",Tt.ERR_NETWORK,h,T)),T=null},T.ontimeout=function(){let k=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const L=a.transitional||Y_;a.timeoutErrorMessage&&(k=a.timeoutErrorMessage),n(new Tt(k,L.clarifyTimeoutError?Tt.ETIMEDOUT:Tt.ECONNABORTED,h,T)),T=null},l===void 0&&o.setContentType(null),"setRequestHeader"in T&&V.forEach(o.toJSON(),function(k,L){T.setRequestHeader(L,k)}),V.isUndefined(a.withCredentials)||(T.withCredentials=!!a.withCredentials),d&&d!=="json"&&(T.responseType=a.responseType),p&&([v,E]=am(p,!0),T.addEventListener("progress",v)),f&&T.upload&&([b,A]=am(f),T.upload.addEventListener("progress",b),T.upload.addEventListener("loadend",A)),(a.cancelToken||a.signal)&&(m=D=>{T&&(n(!D||D.type?new Gu(null,h,T):D),T.abort(),T=null)},a.cancelToken&&a.cancelToken.subscribe(m),a.signal&&(a.signal.aborted?m():a.signal.addEventListener("abort",m)));const O=_O(a.url);if(O&&bi.protocols.indexOf(O)===-1){n(new Tt("Unsupported protocol "+O+":",Tt.ERR_BAD_REQUEST,h));return}T.send(l||null)})},NO=(h,t)=>{const{length:e}=h=h?h.filter(Boolean):[];if(t||e){let n=new AbortController,a;const l=function(p){if(!a){a=!0,d();const m=p instanceof Error?p:this.reason;n.abort(m instanceof Tt?m:new Gu(m instanceof Error?m.message:m))}};let o=t&&setTimeout(()=>{o=null,l(new Tt(`timeout ${t} of ms exceeded`,Tt.ETIMEDOUT))},t);const d=()=>{h&&(o&&clearTimeout(o),o=null,h.forEach(p=>{p.unsubscribe?p.unsubscribe(l):p.removeEventListener("abort",l)}),h=null)};h.forEach(p=>p.addEventListener("abort",l));const{signal:f}=n;return f.unsubscribe=()=>V.asap(d),f}},kO=function*(h,t){let e=h.byteLength;if(e<t){yield h;return}let n=0,a;for(;n<e;)a=n+t,yield h.slice(n,a),n=a},PO=async function*(h,t){for await(const e of BO(h))yield*kO(e,t)},BO=async function*(h){if(h[Symbol.asyncIterator]){yield*h;return}const t=h.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},j1=(h,t,e,n)=>{const a=PO(h,t);let l=0,o,d=f=>{o||(o=!0,n&&n(f))};return new ReadableStream({async pull(f){try{const{done:p,value:m}=await a.next();if(p){d(),f.close();return}let b=m.byteLength;if(e){let v=l+=b;e(v)}f.enqueue(new Uint8Array(m))}catch(p){throw d(p),p}},cancel(f){return d(f),a.return()}},{highWaterMark:2})},jm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",J_=jm&&typeof ReadableStream=="function",zO=jm&&(typeof TextEncoder=="function"?(h=>t=>h.encode(t))(new TextEncoder):async h=>new Uint8Array(await new Response(h).arrayBuffer())),tT=(h,...t)=>{try{return!!h(...t)}catch{return!1}},HO=J_&&tT(()=>{let h=!1;const t=new Request(bi.origin,{body:new ReadableStream,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!t}),G1=64*1024,L0=J_&&tT(()=>V.isReadableStream(new Response("").body)),rm={stream:L0&&(h=>h.body)};jm&&(h=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!rm[t]&&(rm[t]=V.isFunction(h[t])?e=>e[t]():(e,n)=>{throw new Tt(`Response type '${t}' is not supported`,Tt.ERR_NOT_SUPPORT,n)})})})(new Response);const UO=async h=>{if(h==null)return 0;if(V.isBlob(h))return h.size;if(V.isSpecCompliantForm(h))return(await new Request(bi.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(V.isArrayBufferView(h)||V.isArrayBuffer(h))return h.byteLength;if(V.isURLSearchParams(h)&&(h=h+""),V.isString(h))return(await zO(h)).byteLength},FO=async(h,t)=>{const e=V.toFiniteNumber(h.getContentLength());return e??UO(t)},IO=jm&&(async h=>{let{url:t,method:e,data:n,signal:a,cancelToken:l,timeout:o,onDownloadProgress:d,onUploadProgress:f,responseType:p,headers:m,withCredentials:b="same-origin",fetchOptions:v}=Z_(h);p=p?(p+"").toLowerCase():"text";let A=NO([a,l&&l.toAbortSignal()],o),E;const w=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let T;try{if(f&&HO&&e!=="get"&&e!=="head"&&(T=await FO(m,n))!==0){let L=new Request(t,{method:"POST",body:n,duplex:"half"}),U;if(V.isFormData(n)&&(U=L.headers.get("content-type"))&&m.setContentType(U),L.body){const[F,W]=U1(T,am(F1(f)));n=j1(L.body,G1,F,W)}}V.isString(b)||(b=b?"include":"omit");const R="credentials"in Request.prototype;E=new Request(t,{...v,signal:A,method:e.toUpperCase(),headers:m.normalize().toJSON(),body:n,duplex:"half",credentials:R?b:void 0});let O=await fetch(E);const D=L0&&(p==="stream"||p==="response");if(L0&&(d||D&&w)){const L={};["status","statusText","headers"].forEach(J=>{L[J]=O[J]});const U=V.toFiniteNumber(O.headers.get("content-length")),[F,W]=d&&U1(U,am(F1(d),!0))||[];O=new Response(j1(O.body,G1,F,()=>{W&&W(),w&&w()}),L)}p=p||"text";let k=await rm[V.findKey(rm,p)||"text"](O,h);return!D&&w&&w(),await new Promise((L,U)=>{W_(L,U,{data:k,headers:Ii.from(O.headers),status:O.status,statusText:O.statusText,config:h,request:E})})}catch(R){throw w&&w(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new Tt("Network Error",Tt.ERR_NETWORK,h,E),{cause:R.cause||R}):Tt.from(R,R&&R.code,h,E)}}),N0={http:iO,xhr:LO,fetch:IO};V.forEach(N0,(h,t)=>{if(h){try{Object.defineProperty(h,"name",{value:t})}catch{}Object.defineProperty(h,"adapterName",{value:t})}});const q1=h=>`- ${h}`,jO=h=>V.isFunction(h)||h===null||h===!1,eT={getAdapter:h=>{h=V.isArray(h)?h:[h];const{length:t}=h;let e,n;const a={};for(let l=0;l<t;l++){e=h[l];let o;if(n=e,!jO(e)&&(n=N0[(o=String(e)).toLowerCase()],n===void 0))throw new Tt(`Unknown adapter '${o}'`);if(n)break;a[o||"#"+l]=n}if(!n){const l=Object.entries(a).map(([d,f])=>`adapter ${d} `+(f===!1?"is not supported by the environment":"is not available in the build"));let o=t?l.length>1?`since :
`+l.map(q1).join(`
`):" "+q1(l[0]):"as no adapter specified";throw new Tt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:N0};function b0(h){if(h.cancelToken&&h.cancelToken.throwIfRequested(),h.signal&&h.signal.aborted)throw new Gu(null,h)}function V1(h){return b0(h),h.headers=Ii.from(h.headers),h.data=y0.call(h,h.transformRequest),["post","put","patch"].indexOf(h.method)!==-1&&h.headers.setContentType("application/x-www-form-urlencoded",!1),eT.getAdapter(h.adapter||Xf.adapter)(h).then(function(n){return b0(h),n.data=y0.call(h,h.transformResponse,n),n.headers=Ii.from(n.headers),n},function(n){return K_(n)||(b0(h),n&&n.response&&(n.response.data=y0.call(h,h.transformResponse,n.response),n.response.headers=Ii.from(n.response.headers))),Promise.reject(n)})}const iT="1.9.0",Gm={};["object","boolean","number","function","string","symbol"].forEach((h,t)=>{Gm[h]=function(n){return typeof n===h||"a"+(t<1?"n ":" ")+h}});const X1={};Gm.transitional=function(t,e,n){function a(l,o){return"[Axios v"+iT+"] Transitional option '"+l+"'"+o+(n?". "+n:"")}return(l,o,d)=>{if(t===!1)throw new Tt(a(o," has been removed"+(e?" in "+e:"")),Tt.ERR_DEPRECATED);return e&&!X1[o]&&(X1[o]=!0,console.warn(a(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(l,o,d):!0}};Gm.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function GO(h,t,e){if(typeof h!="object")throw new Tt("options must be an object",Tt.ERR_BAD_OPTION_VALUE);const n=Object.keys(h);let a=n.length;for(;a-- >0;){const l=n[a],o=t[l];if(o){const d=h[l],f=d===void 0||o(d,l,h);if(f!==!0)throw new Tt("option "+l+" must be "+f,Tt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Tt("Unknown option "+l,Tt.ERR_BAD_OPTION)}}const xg={assertOptions:GO,validators:Gm},us=xg.validators;let xo=class{constructor(t){this.defaults=t||{},this.interceptors={request:new z1,response:new z1}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Co(this.defaults,e);const{transitional:n,paramsSerializer:a,headers:l}=e;n!==void 0&&xg.assertOptions(n,{silentJSONParsing:us.transitional(us.boolean),forcedJSONParsing:us.transitional(us.boolean),clarifyTimeoutError:us.transitional(us.boolean)},!1),a!=null&&(V.isFunction(a)?e.paramsSerializer={serialize:a}:xg.assertOptions(a,{encode:us.function,serialize:us.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),xg.assertOptions(e,{baseUrl:us.spelling("baseURL"),withXsrfToken:us.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=l&&V.merge(l.common,l[e.method]);l&&V.forEach(["delete","get","head","post","put","patch","common"],E=>{delete l[E]}),e.headers=Ii.concat(o,l);const d=[];let f=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(e)===!1||(f=f&&w.synchronous,d.unshift(w.fulfilled,w.rejected))});const p=[];this.interceptors.response.forEach(function(w){p.push(w.fulfilled,w.rejected)});let m,b=0,v;if(!f){const E=[V1.bind(this),void 0];for(E.unshift.apply(E,d),E.push.apply(E,p),v=E.length,m=Promise.resolve(e);b<v;)m=m.then(E[b++],E[b++]);return m}v=d.length;let A=e;for(b=0;b<v;){const E=d[b++],w=d[b++];try{A=E(A)}catch(T){w.call(this,T);break}}try{m=V1.call(this,A)}catch(E){return Promise.reject(E)}for(b=0,v=p.length;b<v;)m=m.then(p[b++],p[b++]);return m}getUri(t){t=Co(this.defaults,t);const e=Q_(t.baseURL,t.url,t.allowAbsoluteUrls);return X_(e,t.params,t.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(t){xo.prototype[t]=function(e,n){return this.request(Co(n||{},{method:t,url:e,data:(n||{}).data}))}});V.forEach(["post","put","patch"],function(t){function e(n){return function(l,o,d){return this.request(Co(d||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:o}))}}xo.prototype[t]=e(),xo.prototype[t+"Form"]=e(!0)});let qO=class nT{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(l){e=l});const n=this;this.promise.then(a=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](a);n._listeners=null}),this.promise.then=a=>{let l;const o=new Promise(d=>{n.subscribe(d),l=d}).then(a);return o.cancel=function(){n.unsubscribe(l)},o},t(function(l,o,d){n.reason||(n.reason=new Gu(l,o,d),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new nT(function(a){t=a}),cancel:t}}};function VO(h){return function(e){return h.apply(null,e)}}function XO(h){return V.isObject(h)&&h.isAxiosError===!0}const k0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(k0).forEach(([h,t])=>{k0[t]=h});function sT(h){const t=new xo(h),e=k_(xo.prototype.request,t);return V.extend(e,xo.prototype,t,{allOwnKeys:!0}),V.extend(e,t,null,{allOwnKeys:!0}),e.create=function(a){return sT(Co(h,a))},e}const Se=sT(Xf);Se.Axios=xo;Se.CanceledError=Gu;Se.CancelToken=qO;Se.isCancel=K_;Se.VERSION=iT;Se.toFormData=Im;Se.AxiosError=Tt;Se.Cancel=Se.CanceledError;Se.all=function(t){return Promise.all(t)};Se.spread=VO;Se.isAxiosError=XO;Se.mergeConfig=Co;Se.AxiosHeaders=Ii;Se.formToJSON=h=>$_(V.isHTMLForm(h)?new FormData(h):h);Se.getAdapter=eT.getAdapter;Se.HttpStatusCode=k0;Se.default=Se;const{Axios:qN,AxiosError:VN,CanceledError:XN,isCancel:YN,CancelToken:$N,VERSION:KN,all:WN,Cancel:QN,isAxiosError:ZN,spread:JN,toFormData:tk,AxiosHeaders:ek,HttpStatusCode:ik,formToJSON:nk,getAdapter:sk,mergeConfig:ak}=Se,YO=({sanskritText:h,tibetanText:t,chineseText:e,onSanskritChange:n,onTibetanChange:a,onChineseChange:l})=>{const[o,d]=K.useState({}),[f,p]=K.useState({}),[m,b]=K.useState({}),v=async(T,R,O)=>{const D="https://dharmamitra.org/api/translation-no-stream/",k={input_sentence:T,input_encoding:"auto",target_lang:"english"};try{const L=await Se.post(D,k,{headers:{"Content-Type":"application/json"}});if(L.status===200){const U={...o};U[O]={...U[O],[R]:L.data||"翻译失败"},d(U)}else alert(`翻译失败，状态码: ${L.status}`)}catch(L){alert(`翻译请求出错: ${L.message}`)}},A=async(T,R,O)=>{const D="https://dharmamitra.org/api/tagging/",k={input_sentence:T,input_encoding:"auto",human_readable_tags:!0,mode:"unsandhied-lemma-morphosyntax"};try{const L=await Se.post(D,k,{headers:{"Content-Type":"application/json"}});if(L.status===200){const U={...f};U[O]={...U[O],[R]:L.data.map(F=>F.grammatical_analysis).flat()||[]},p(U)}else alert(`解析失败，状态码: ${L.status}`)}catch(L){alert(`解析请求出错: ${L.message}`)}},E=(T,R)=>{b({...m,[R]:{lemma:T.lemma,unsandhied:T.unsandhied,tag:T.tag,meanings:T.meanings,paragraphIndex:T.paragraphIndex}})},w=(T,R,O)=>{const D=T.split(`
`);return D.map((k,L)=>{var U,F,W;return gt.jsxs("div",{style:{marginBottom:"1rem",border:"1px solid #ccc",padding:"8px"},children:[gt.jsx("textarea",{style:{resize:"none",border:"1px solid #ccc",padding:"8px",fontSize:"16px",width:"100%",marginBottom:"1rem"},value:k,onChange:J=>{const nt=[...D];nt[L]=J.target.value,R(nt.join(`
`))}}),gt.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem",flexWrap:"wrap"},children:[gt.jsx("button",{style:{marginRight:"8px",padding:"4px 8px",fontSize:"12px"},onClick:()=>A(k,L,O),children:"解析"}),((U=f[O])==null?void 0:U[L])&&f[O][L].map((J,nt)=>gt.jsx("button",{style:{margin:"4px",padding:"4px 8px",fontSize:"12px",whiteSpace:"nowrap"},onClick:()=>E({...J,paragraphIndex:L},O),children:J.unsandhied},nt))]}),((F=m[O])==null?void 0:F.paragraphIndex)===L&&gt.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"1rem",fontSize:"12px"},children:[gt.jsx("thead",{children:gt.jsxs("tr",{children:[gt.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:"属性"}),gt.jsx("th",{style:{border:"1px solid #ccc",padding:"8px"},children:"值"})]})}),gt.jsxs("tbody",{children:[gt.jsxs("tr",{children:[gt.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:"Lemma"}),gt.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:m[O].lemma})]}),gt.jsxs("tr",{children:[gt.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:"Tag"}),gt.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:m[O].tag})]}),gt.jsxs("tr",{children:[gt.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:"Meanings"}),gt.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:m[O].meanings.join(", ")})]})]})]}),gt.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem"},children:[gt.jsx("button",{style:{marginRight:"8px",padding:"4px 8px",fontSize:"12px"},onClick:()=>v(k,L,O),children:"翻译"}),gt.jsx("div",{style:{fontStyle:"italic",flex:1},children:((W=o[O])==null?void 0:W[L])||"点击翻译按钮获取结果"})]}),gt.jsx("button",{style:{padding:"4px 8px",fontSize:"12px",width:"100%"},onClick:()=>{const J=D.filter((nt,st)=>st!==L);R(J.join(`
`))},children:"删除"})]},L)})};return gt.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[gt.jsxs("div",{style:{flex:"1 1 33%",margin:"0 8px",display:"flex",flexDirection:"column"},children:[gt.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem"},children:"梵语"}),w(h,n,"sanskrit")]}),gt.jsxs("div",{style:{flex:"1 1 33%",margin:"0 8px",display:"flex",flexDirection:"column"},children:[gt.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem"},children:"藏语"}),w(t,a,"tibetan")]}),gt.jsxs("div",{style:{flex:"1 1 33%",margin:"0 8px",display:"flex",flexDirection:"column"},children:[gt.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem"},children:"汉语或其他语言。"}),w(e,l,"chinese")]})]})},$O=()=>gt.jsxs("div",{style:{margin:"20px",padding:"10px",border:"1px solid #ccc",borderRadius:"5px"},children:[gt.jsx("h2",{children:"开发者的话"}),gt.jsx("p",{children:"欢迎使用 Sanskrit-Tibetan-Chinese Reader！"}),gt.jsx("p",{children:"此项目旨在帮助用户更方便地阅读和翻译梵语、藏语和汉语文本。"}),gt.jsx("p",{children:"本项目采用了dharmamitra的接口，其中梵语支持语法分析和翻译，其他语言支持翻译"}),gt.jsx("p",{children:"本软件目前还只是一个demo，欢迎向开发者提出各种需求！"})]}),xi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),P0=[.001,0,0,.001,0,0],v0=1.35,dn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},cr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},KO="pdfjs_internal_editor_",wt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Ut={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},WO={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},di={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Cg={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},De={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ac={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},qm={ERRORS:0,WARNINGS:1,INFOS:5},lm={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},gg={moveTo:0,lineTo:1,curveTo:2,closePath:3},QO={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Vm=qm.WARNINGS;function ZO(h){Number.isInteger(h)&&(Vm=h)}function JO(){return Vm}function Xm(h){Vm>=qm.INFOS&&console.log(`Info: ${h}`)}function _t(h){Vm>=qm.WARNINGS&&console.log(`Warning: ${h}`)}function ne(h){throw new Error(h)}function Le(h,t){h||ne(t)}function tL(h){switch(h==null?void 0:h.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function aT(h,t=null,e=null){if(!h)return null;if(e&&typeof h=="string"){if(e.addDefaultProtocol&&h.startsWith("www.")){const a=h.match(/\./g);(a==null?void 0:a.length)>=2&&(h=`http://${h}`)}if(e.tryConvertEncoding)try{h=aL(h)}catch{}}const n=t?URL.parse(h,t):URL.parse(h);return tL(n)?n:null}function rT(h,t,e=!1){const n=URL.parse(h);return n?(n.hash=t,n.href):e&&aT(h,"http://example.com")?h.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Bt(h,t,e,n=!1){return Object.defineProperty(h,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Lo=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class Y1 extends Lo{constructor(t,e){super(t,"PasswordException"),this.code=e}}class A0 extends Lo{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class B0 extends Lo{constructor(t){super(t,"InvalidPDFException")}}class om extends Lo{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class eL extends Lo{constructor(t){super(t,"FormatError")}}class Xr extends Lo{constructor(t){super(t,"AbortException")}}function lT(h){(typeof h!="object"||(h==null?void 0:h.length)===void 0)&&ne("Invalid argument for bytesToString");const t=h.length,e=8192;if(t<e)return String.fromCharCode.apply(null,h);const n=[];for(let a=0;a<t;a+=e){const l=Math.min(a+e,t),o=h.subarray(a,l);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function Yf(h){typeof h!="string"&&ne("Invalid argument for stringToBytes");const t=h.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=h.charCodeAt(n)&255;return e}function iL(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function nL(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function sL(){try{return new Function(""),!0}catch{return!1}}class oi{static get isLittleEndian(){return Bt(this,"isLittleEndian",nL())}static get isEvalSupported(){return Bt(this,"isEvalSupported",sL())}static get isOffscreenCanvasSupported(){return Bt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Bt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){if(typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"){const{platform:t,userAgent:e}=navigator;return Bt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}return Bt(this,"platform",{isAndroid:!1,isLinux:!1,isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Bt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const S0=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));var Oa,Rg,z0;class ht{static makeHexColor(t,e,n){return`#${S0[t]}${S0[e]}${S0[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,n=0){const a=t[n],l=t[n+1];t[n]=a*e[0]+l*e[2]+e[4],t[n+1]=a*e[1]+l*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const a=e[0],l=e[1],o=e[2],d=e[3],f=e[4],p=e[5];for(let m=0;m<6;m+=2){const b=t[n+m],v=t[n+m+1];t[n+m]=b*a+v*o+f,t[n+m+1]=b*l+v*d+p}}static applyInverseTransform(t,e){const n=t[0],a=t[1],l=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/l,t[1]=(-n*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/l}static axialAlignedBoundingBox(t,e,n){const a=e[0],l=e[1],o=e[2],d=e[3],f=e[4],p=e[5],m=t[0],b=t[1],v=t[2],A=t[3];let E=a*m+f,w=E,T=a*v+f,R=T,O=d*b+p,D=O,k=d*A+p,L=k;if(l!==0||o!==0){const U=l*m,F=l*v,W=o*b,J=o*A;E+=W,R+=W,T+=J,w+=J,O+=U,L+=U,k+=F,D+=F}n[0]=Math.min(n[0],E,T,w,R),n[1]=Math.min(n[1],O,k,D,L),n[2]=Math.max(n[2],E,T,w,R),n[3]=Math.max(n[3],O,k,D,L)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],a=t[1],l=t[2],o=t[3],d=n**2+a**2,f=n*l+a*o,p=l**2+o**2,m=(d+p)/2,b=Math.sqrt(m**2-(d*p-f**2));e[0]=Math.sqrt(m+b||1),e[1]=Math.sqrt(m-b||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>a)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return l>o?null:[n,l,a,o]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,a,l){l[0]=Math.min(l[0],t,n),l[1]=Math.min(l[1],e,a),l[2]=Math.max(l[2],t,n),l[3]=Math.max(l[3],e,a)}static bezierBoundingBox(t,e,n,a,l,o,d,f,p){p[0]=Math.min(p[0],t,d),p[1]=Math.min(p[1],e,f),p[2]=Math.max(p[2],t,d),p[3]=Math.max(p[3],e,f),C(this,Oa,z0).call(this,t,n,l,d,e,a,o,f,3*(-t+3*(n-l)+d),6*(t-2*n+l),3*(n-t),p),C(this,Oa,z0).call(this,t,n,l,d,e,a,o,f,3*(-e+3*(a-o)+f),6*(e-2*a+o),3*(a-e),p)}}Oa=new WeakSet,Rg=function(t,e,n,a,l,o,d,f,p,m){if(p<=0||p>=1)return;const b=1-p,v=p*p,A=v*p,E=b*(b*(b*t+3*p*e)+3*v*n)+A*a,w=b*(b*(b*l+3*p*o)+3*v*d)+A*f;m[0]=Math.min(m[0],E),m[1]=Math.min(m[1],w),m[2]=Math.max(m[2],E),m[3]=Math.max(m[3],w)},z0=function(t,e,n,a,l,o,d,f,p,m,b,v){if(Math.abs(p)<1e-12){Math.abs(m)>=1e-12&&C(this,Oa,Rg).call(this,t,e,n,a,l,o,d,f,-b/m,v);return}const A=m**2-4*b*p;if(A<0)return;const E=Math.sqrt(A),w=2*p;C(this,Oa,Rg).call(this,t,e,n,a,l,o,d,f,(-m+E)/w,v),C(this,Oa,Rg).call(this,t,e,n,a,l,o,d,f,(-m-E)/w,v)},x(ht,Oa);function aL(h){return decodeURIComponent(escape(h))}let E0=null,$1=null;function rL(h){return E0||(E0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,$1=new Map([["ﬅ","ſt"]])),h.replaceAll(E0,(t,e,n)=>e?e.normalize("NFKC"):$1.get(n))}function oT(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),lT(h)}const oA="pdfjs_internal_id_";function lL(h,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,a,...l]=e;if(!h(n)&&!Number.isInteger(n)||!t(a))return!1;const o=l.length;let d=!0;switch(a.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;d=!1;break;default:return!1}for(const f of l)if(!(typeof f=="number"||d&&f===null))return!1;return!0}function Ci(h,t,e){return Math.min(Math.max(h,t),e)}function cT(h){return Uint8Array.prototype.toBase64?h.toBase64():btoa(lT(h))}function oL(h){return Uint8Array.fromBase64?Uint8Array.fromBase64(h):Yf(atob(h))}typeof Promise.try!="function"&&(Promise.try=function(h,...t){return new Promise(e=>{e(h(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(h){return h.reduce((t,e)=>t+e,0)});const Ks="http://www.w3.org/2000/svg",bl=class bl{};et(bl,"CSS",96),et(bl,"PDF",72),et(bl,"PDF_TO_CSS_UNITS",bl.CSS/bl.PDF);let Yr=bl;async function $f(h,t="text"){if(Sc(h,document.baseURI)){const e=await fetch(h);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const a=new XMLHttpRequest;a.open("GET",h,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}n(new Error(a.statusText))}},a.send(null)})}class Kf{constructor({viewBox:t,userUnit:e,scale:n,rotation:a,offsetX:l=0,offsetY:o=0,dontFlip:d=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=a,this.offsetX=l,this.offsetY=o,n*=e;const f=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let m,b,v,A;switch(a%=360,a<0&&(a+=360),a){case 180:m=-1,b=0,v=0,A=1;break;case 90:m=0,b=1,v=1,A=0;break;case 270:m=0,b=-1,v=-1,A=0;break;case 0:m=1,b=0,v=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}d&&(v=-v,A=-A);let E,w,T,R;m===0?(E=Math.abs(p-t[1])*n+l,w=Math.abs(f-t[0])*n+o,T=(t[3]-t[1])*n,R=(t[2]-t[0])*n):(E=Math.abs(f-t[0])*n+l,w=Math.abs(p-t[1])*n+o,T=(t[2]-t[0])*n,R=(t[3]-t[1])*n),this.transform=[m*n,b*n,v*n,A*n,E-m*n*f-v*n*p,w-b*n*f-A*n*p],this.width=T,this.height=R}get rawDims(){const t=this.viewBox;return Bt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:a=this.offsetY,dontFlip:l=!1}={}){return new Kf({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:l})}convertToViewportPoint(t,e){const n=[t,e];return ht.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];ht.applyTransform(e,this.transform);const n=[t[2],t[3]];return ht.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return ht.applyInverseTransform(n,this.transform),n}}class cA extends Lo{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Ym(h){const t=h.length;let e=0;for(;e<t&&h[e].trim()==="";)e++;return h.substring(e,e+5).toLowerCase()==="data:"}function uA(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function cL(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function uL(h,t="document.pdf"){if(typeof h!="string")return t;if(Ym(h))return _t('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=e.exec(h);let l=n.exec(a[1])||n.exec(a[2])||n.exec(a[3]);if(l&&(l=l[0],l.includes("%")))try{l=n.exec(decodeURIComponent(l))[0]}catch{}return l||t}class K1{constructor(){et(this,"started",Object.create(null));et(this,"times",[])}time(t){t in this.started&&_t(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||_t(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:a,end:l}of this.times)t.push(`${n.padEnd(e)} ${l-a}ms
`);return t.join("")}}function Sc(h,t){const e=t?URL.parse(h,t):URL.parse(h);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Jn(h){h.preventDefault()}function Oe(h){h.preventDefault(),h.stopPropagation()}var bd;class hA{static toDateObject(t){if(!t||typeof t!="string")return null;u(this,bd)||S(this,bd,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=u(this,bd).exec(t);if(!e)return null;const n=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let l=parseInt(e[3],10);l=l>=1&&l<=31?l:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let d=parseInt(e[5],10);d=d>=0&&d<=59?d:0;let f=parseInt(e[6],10);f=f>=0&&f<=59?f:0;const p=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let b=parseInt(e[9],10)||0;return b=b>=0&&b<=59?b:0,p==="-"?(o+=m,d+=b):p==="+"&&(o-=m,d-=b),new Date(Date.UTC(n,a,l,o,d,f))}}bd=new WeakMap,x(hA,bd);function hL(h,{scale:t=1,rotation:e=0}){const{width:n,height:a}=h.attributes.style,l=[0,0,parseInt(n),parseInt(a)];return new Kf({viewBox:l,userUnit:1,scale:t,rotation:e})}function dA(h){if(h.startsWith("#")){const t=parseInt(h.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(t=>parseInt(t)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(_t(`Not a valid color format: "${h}"`),[0,0,0])}function dL(h){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of h.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;h.set(e,dA(n))}t.remove()}function me(h){const{a:t,b:e,c:n,d:a,e:l,f:o}=h.getTransform();return[t,e,n,a,l,o]}function hs(h){const{a:t,b:e,c:n,d:a,e:l,f:o}=h.getTransform().invertSelf();return[t,e,n,a,l,o]}function Ro(h,t,e=!1,n=!0){if(t instanceof Kf){const{pageWidth:a,pageHeight:l}=t.rawDims,{style:o}=h,d=oi.isCSSRoundSupported,f=`var(--total-scale-factor) * ${a}px`,p=`var(--total-scale-factor) * ${l}px`,m=d?`round(down, ${f}, var(--scale-round-x))`:`calc(${f})`,b=d?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!e||t.rotation%180===0?(o.width=m,o.height=b):(o.width=b,o.height=m)}n&&h.setAttribute("data-main-rotation",t.rotation)}class ka{constructor(){const{pixelRatio:t}=ka;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,a){let l=1/0,o=1/0,d=1/0;n>0&&(l=Math.sqrt(n/(t*e))),a!==-1&&(o=a/t,d=a/e);const f=Math.min(l,o,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}}const H0=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var ur,Sl,xn,hr,vd,Nc,Ad,mm,uT,li,hT,dT,Qh,fT,Mg;const Zs=class Zs{constructor(t){x(this,li);x(this,ur,null);x(this,Sl,null);x(this,xn);x(this,hr,null);x(this,vd,null);x(this,Nc,null);S(this,xn,t),u(Zs,Ad)||S(Zs,Ad,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=S(this,ur,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=u(this,xn)._uiManager._signal;t.addEventListener("contextmenu",Jn,{signal:e}),t.addEventListener("pointerdown",C(Zs,mm,uT),{signal:e});const n=S(this,hr,document.createElement("div"));n.className="buttons",t.append(n);const a=u(this,xn).toolbarPosition;if(a){const{style:l}=t,o=u(this,xn)._uiManager.direction==="ltr"?1-a[0]:a[0];l.insetInlineEnd=`${100*o}%`,l.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return C(this,li,fT).call(this),t}get div(){return u(this,ur)}hide(){var t;u(this,ur).classList.add("hidden"),(t=u(this,Sl))==null||t.hideDropdown()}show(){var t;u(this,ur).classList.remove("hidden"),(t=u(this,vd))==null||t.shown()}async addAltText(t){const e=await t.render();C(this,li,Qh).call(this,e),u(this,hr).prepend(e,u(this,li,Mg)),S(this,vd,t)}addColorPicker(t){S(this,Sl,t);const e=t.renderButton();C(this,li,Qh).call(this,e),u(this,hr).prepend(e,u(this,li,Mg))}async addEditSignatureButton(t){const e=S(this,Nc,await t.renderEditButton(u(this,xn)));C(this,li,Qh).call(this,e),u(this,hr).prepend(e,u(this,li,Mg))}updateEditSignatureButton(t){u(this,Nc)&&(u(this,Nc).title=t)}remove(){var t;u(this,ur).remove(),(t=u(this,Sl))==null||t.destroy(),S(this,Sl,null)}};ur=new WeakMap,Sl=new WeakMap,xn=new WeakMap,hr=new WeakMap,vd=new WeakMap,Nc=new WeakMap,Ad=new WeakMap,mm=new WeakSet,uT=function(t){t.stopPropagation()},li=new WeakSet,hT=function(t){u(this,xn)._focusEventsAllowed=!1,Oe(t)},dT=function(t){u(this,xn)._focusEventsAllowed=!0,Oe(t)},Qh=function(t){const e=u(this,xn)._uiManager._signal;t.addEventListener("focusin",C(this,li,hT).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",C(this,li,dT).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Jn,{signal:e})},fT=function(){const{editorType:t,_uiManager:e}=u(this,xn),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",u(Zs,Ad)[t]),C(this,li,Qh).call(this,n),n.addEventListener("click",a=>{e.delete()},{signal:e._signal}),u(this,hr).append(n)},Mg=function(){const t=document.createElement("div");return t.className="divider",t},x(Zs,mm),x(Zs,Ad,null);let U0=Zs;var Sd,El,wl,$r,pT,gT,mT;class fL{constructor(t){x(this,$r);x(this,Sd,null);x(this,El,null);x(this,wl);S(this,wl,t)}show(t,e,n){const[a,l]=C(this,$r,gT).call(this,e,n),{style:o}=u(this,El)||S(this,El,C(this,$r,pT).call(this));t.append(u(this,El)),o.insetInlineEnd=`${100*a}%`,o.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,El).remove()}}Sd=new WeakMap,El=new WeakMap,wl=new WeakMap,$r=new WeakSet,pT=function(){const t=S(this,El,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Jn,{signal:u(this,wl)._signal});const e=S(this,Sd,document.createElement("div"));return e.className="buttons",t.append(e),C(this,$r,mT).call(this),t},gT=function(t,e){let n=0,a=0;for(const l of t){const o=l.y+l.height;if(o<n)continue;const d=l.x+(e?l.width:0);if(o>n){a=d,n=o;continue}e?d>a&&(a=d):d<a&&(a=d)}return[e?1-a:a,n]},mT=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=u(this,wl)._signal;t.addEventListener("contextmenu",Jn,{signal:n}),t.addEventListener("click",()=>{u(this,wl).highlightSelection("floating_button")},{signal:n}),u(this,Sd).append(t)};function fA(h,t,e){for(const n of e)t.addEventListener(n,h[n].bind(h))}var ym;class pL{constructor(){x(this,ym,0)}get id(){return`${KO}${Ai(this,ym)._++}`}}ym=new WeakMap;var kc,Ed,pi,Pc,Dg;const AA=class AA{constructor(){x(this,Pc);x(this,kc,oT());x(this,Ed,0);x(this,pi,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const l=a.decode().then(()=>(n.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Bt(this,"_isSVGFittingCanvas",l)}async getFromFile(t){const{lastModified:e,name:n,size:a,type:l}=t;return C(this,Pc,Dg).call(this,`${e}_${n}_${a}_${l}`,t)}async getFromUrl(t){return C(this,Pc,Dg).call(this,t,t)}async getFromBlob(t,e){const n=await e;return C(this,Pc,Dg).call(this,t,n)}async getFromId(t){u(this,pi)||S(this,pi,new Map);const e=u(this,pi).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){u(this,pi)||S(this,pi,new Map);let n=u(this,pi).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),n={bitmap:a.transferToImageBitmap(),id:`image_${u(this,kc)}_${Ai(this,Ed)._++}`,refCounter:1,isSvg:!1},u(this,pi).set(t,n),u(this,pi).set(n.id,n),n}getSvgUrl(t){const e=u(this,pi).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var a;u(this,pi)||S(this,pi,new Map);const e=u(this,pi).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const l=new OffscreenCanvas(n.width,n.height);l.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=l.convertToBlob()}(a=n.close)==null||a.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${u(this,kc)}_`)}};kc=new WeakMap,Ed=new WeakMap,pi=new WeakMap,Pc=new WeakSet,Dg=async function(t,e){u(this,pi)||S(this,pi,new Map);let n=u(this,pi).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${u(this,kc)}_${Ai(this,Ed)._++}`,refCounter:0,isSvg:!1});let a;if(typeof e=="string"?(n.url=e,a=await $f(e,"blob")):e instanceof File?a=n.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const l=AA._isSVGFittingCanvas,o=new FileReader,d=new Image,f=new Promise((p,m)=>{d.onload=()=>{n.bitmap=d,n.isSvg=!0,p()},o.onload=async()=>{const b=n.svgUrl=o.result;d.src=await l?`${b}#svgView(preserveAspectRatio(none))`:b},d.onerror=o.onerror=m});o.readAsDataURL(a),await f}else n.bitmap=await createImageBitmap(a);n.refCounter=1}catch(a){_t(a),n=null}return u(this,pi).set(t,n),n&&u(this,pi).set(n.id,n),n};let F0=AA;var _e,dr,wd,ge;class gL{constructor(t=128){x(this,_e,[]);x(this,dr,!1);x(this,wd);x(this,ge,-1);S(this,wd,t)}add({cmd:t,undo:e,post:n,mustExec:a,type:l=NaN,overwriteIfSameType:o=!1,keepUndo:d=!1}){if(a&&t(),u(this,dr))return;const f={cmd:t,undo:e,post:n,type:l};if(u(this,ge)===-1){u(this,_e).length>0&&(u(this,_e).length=0),S(this,ge,0),u(this,_e).push(f);return}if(o&&u(this,_e)[u(this,ge)].type===l){d&&(f.undo=u(this,_e)[u(this,ge)].undo),u(this,_e)[u(this,ge)]=f;return}const p=u(this,ge)+1;p===u(this,wd)?u(this,_e).splice(0,1):(S(this,ge,p),p<u(this,_e).length&&u(this,_e).splice(p)),u(this,_e).push(f)}undo(){if(u(this,ge)===-1)return;S(this,dr,!0);const{undo:t,post:e}=u(this,_e)[u(this,ge)];t(),e==null||e(),S(this,dr,!1),S(this,ge,u(this,ge)-1)}redo(){if(u(this,ge)<u(this,_e).length-1){S(this,ge,u(this,ge)+1),S(this,dr,!0);const{cmd:t,post:e}=u(this,_e)[u(this,ge)];t(),e==null||e(),S(this,dr,!1)}}hasSomethingToUndo(){return u(this,ge)!==-1}hasSomethingToRedo(){return u(this,ge)<u(this,_e).length-1}cleanType(t){if(u(this,ge)!==-1){for(let e=u(this,ge);e>=0;e--)if(u(this,_e)[e].type!==t){u(this,_e).splice(e+1,u(this,ge)-e),S(this,ge,e);return}u(this,_e).length=0,S(this,ge,-1)}}destroy(){S(this,_e,null)}}_e=new WeakMap,dr=new WeakMap,wd=new WeakMap,ge=new WeakMap;var bm,yT;class Wf{constructor(t){x(this,bm);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=oi.platform;for(const[n,a,l={}]of t)for(const o of n){const d=o.startsWith("mac+");e&&d?(this.callbacks.set(o.slice(4),{callback:a,options:l}),this.allKeys.add(o.split("+").at(-1))):!e&&!d&&(this.callbacks.set(o,{callback:a,options:l}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(C(this,bm,yT).call(this,e));if(!n)return;const{callback:a,options:{bubbles:l=!1,args:o=[],checker:d=null}}=n;d&&!d(t,e)||(a.bind(t,...o,e)(),l||Oe(e))}}bm=new WeakSet,yT=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const vm=class vm{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return dL(t),Bt(this,"_colors",t)}convert(t){const e=dA(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,a]of this._colors)if(a.every((l,o)=>l===e[o]))return vm._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?ht.makeHexColor(...e):t}};et(vm,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let I0=vm;var Bc,Zi,He,ti,zc,ta,Hc,Cn,fr,pr,Uc,_l,ps,Fn,Tl,_d,Td,Fc,xd,gs,gr,Ic,mr,ms,Am,yr,Cd,br,xl,Cl,vr,Rd,Ve,Qt,ea,Ar,Rl,Md,Dd,Sr,ys,ia,Od,Rn,at,Og,j0,bT,vT,Lg,AT,ST,ET,G0,wT,q0,V0,_T,Si,Ws,TT,xT,X0,CT,Zh,Y0;const Mc=class Mc{constructor(t,e,n,a,l,o,d,f,p,m,b,v,A,E){x(this,at);x(this,Bc,new AbortController);x(this,Zi,null);x(this,He,new Map);x(this,ti,new Map);x(this,zc,null);x(this,ta,null);x(this,Hc,null);x(this,Cn,new gL);x(this,fr,null);x(this,pr,null);x(this,Uc,0);x(this,_l,new Set);x(this,ps,null);x(this,Fn,null);x(this,Tl,new Set);et(this,"_editorUndoBar",null);x(this,_d,!1);x(this,Td,!1);x(this,Fc,!1);x(this,xd,null);x(this,gs,null);x(this,gr,null);x(this,Ic,null);x(this,mr,!1);x(this,ms,null);x(this,Am,new pL);x(this,yr,!1);x(this,Cd,!1);x(this,br,null);x(this,xl,null);x(this,Cl,null);x(this,vr,null);x(this,Rd,null);x(this,Ve,wt.NONE);x(this,Qt,new Set);x(this,ea,null);x(this,Ar,null);x(this,Rl,null);x(this,Md,null);x(this,Dd,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,Sr,[0,0]);x(this,ys,null);x(this,ia,null);x(this,Od,null);x(this,Rn,null);const w=this._signal=u(this,Bc).signal;S(this,ia,t),S(this,Od,e),S(this,zc,n),S(this,Ar,a),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:w}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),l._on("setpreference",this.onSetPreference.bind(this),{signal:w}),l._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:w}),C(this,at,AT).call(this),C(this,at,_T).call(this),C(this,at,G0).call(this),S(this,ta,o.annotationStorage),S(this,xd,o.filterFactory),S(this,Rl,d),S(this,Ic,f||null),S(this,_d,p),S(this,Td,m),S(this,Fc,b),S(this,Rd,v||null),this.viewParameters={realScale:Yr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=A||null,this._supportsPinchToZoom=E!==!1}static get _keyboardManager(){const t=Mc.prototype,e=o=>u(o,ia).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:d})=>{if(d instanceof HTMLInputElement){const{type:f}=d;return f!=="text"&&f!=="number"}return!0},a=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return Bt(this,"_keyboardManager",new Wf([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:d})=>!(d instanceof HTMLButtonElement)&&u(o,ia).contains(d)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:d})=>!(d instanceof HTMLButtonElement)&&u(o,ia).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:e}]]))}destroy(){var t,e,n,a,l,o,d,f;(t=u(this,Rn))==null||t.resolve(),S(this,Rn,null),(e=u(this,Bc))==null||e.abort(),S(this,Bc,null),this._signal=null;for(const p of u(this,ti).values())p.destroy();u(this,ti).clear(),u(this,He).clear(),u(this,Tl).clear(),(n=u(this,vr))==null||n.clear(),S(this,Zi,null),u(this,Qt).clear(),u(this,Cn).destroy(),(a=u(this,zc))==null||a.destroy(),(l=u(this,Ar))==null||l.destroy(),(o=u(this,ms))==null||o.hide(),S(this,ms,null),(d=u(this,Cl))==null||d.destroy(),S(this,Cl,null),u(this,gs)&&(clearTimeout(u(this,gs)),S(this,gs,null)),u(this,ys)&&(clearTimeout(u(this,ys)),S(this,ys,null)),(f=this._editorUndoBar)==null||f.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return u(this,Rd)}get useNewAltTextFlow(){return u(this,Td)}get useNewAltTextWhenAddingImage(){return u(this,Fc)}get hcmFilter(){return Bt(this,"hcmFilter",u(this,Rl)?u(this,xd).addHCMFilter(u(this,Rl).foreground,u(this,Rl).background):"none")}get direction(){return Bt(this,"direction",getComputedStyle(u(this,ia)).direction)}get highlightColors(){return Bt(this,"highlightColors",u(this,Ic)?new Map(u(this,Ic).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Bt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),S(this,pr,t)}setMainHighlightColorPicker(t){S(this,Cl,t)}editAltText(t,e=!1){var n;(n=u(this,zc))==null||n.editAltText(this,t,e)}getSignature(t){var e;(e=u(this,Ar))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return u(this,Ar)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":S(this,Fc,e);break}}onPageChanging({pageNumber:t}){S(this,Uc,t-1)}focusMainContainer(){u(this,ia).focus()}findParent(t,e){for(const n of u(this,ti).values()){const{x:a,y:l,width:o,height:d}=n.div.getBoundingClientRect();if(t>=a&&t<=a+o&&e>=l&&e<=l+d)return n}return null}disableUserSelect(t=!1){u(this,Od).classList.toggle("noUserSelect",t)}addShouldRescale(t){u(this,Tl).add(t)}removeShouldRescale(t){u(this,Tl).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Yr.PDF_TO_CSS_UNITS;for(const n of u(this,Tl))n.onScaleChanging();(e=u(this,pr))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:a,focusNode:l,focusOffset:o}=e,d=e.toString(),p=C(this,at,Og).call(this,e).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;e.empty();const b=C(this,at,j0).call(this,p),v=u(this,Ve)===wt.NONE,A=()=>{b==null||b.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:n,anchorOffset:a,focusNode:l,focusOffset:o,text:d}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(wt.HIGHLIGHT,A);return}A()}addToAnnotationStorage(t){!t.isEmpty()&&u(this,ta)&&!u(this,ta).has(t.id)&&u(this,ta).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,u(this,mr)&&(S(this,mr,!1),C(this,at,Lg).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of u(this,Qt))if(e.div.contains(t)){S(this,xl,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!u(this,xl))return;const[t,e]=u(this,xl);S(this,xl,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){C(this,at,G0).call(this),C(this,at,q0).call(this)}removeEditListeners(){C(this,at,wT).call(this),C(this,at,V0).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of u(this,Fn))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of u(this,Fn))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=u(this,Zi))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const a of u(this,Qt)){const l=a.serialize(!0);l&&e.push(l)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const l of e.items)for(const o of u(this,Fn))if(o.isHandlingMimeForPasting(l.type)){o.paste(l,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(l){_t(`paste: "${l.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const a=this.currentLayer;try{const l=[];for(const f of n){const p=await a.deserialize(f);if(!p)return;l.push(p)}const o=()=>{for(const f of l)C(this,at,X0).call(this,f);C(this,at,Y0).call(this,l)},d=()=>{for(const f of l)f.remove()};this.addCommands({cmd:o,undo:d,mustExec:!0})}catch(l){_t(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,Ve)!==wt.NONE&&!this.isEditorHandlingKeyboard&&Mc._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,mr)&&(S(this,mr,!1),C(this,at,Lg).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(C(this,at,ST).call(this),C(this,at,q0).call(this),C(this,at,Si).call(this,{isEditing:u(this,Ve)!==wt.NONE,isEmpty:C(this,at,Zh).call(this),hasSomethingToUndo:u(this,Cn).hasSomethingToUndo(),hasSomethingToRedo:u(this,Cn).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,at,ET).call(this),C(this,at,V0).call(this),C(this,at,Si).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!u(this,Fn)){S(this,Fn,t);for(const e of u(this,Fn))C(this,at,Ws).call(this,e.defaultPropertiesToUpdate)}}getId(){return u(this,Am).id}get currentLayer(){return u(this,ti).get(u(this,Uc))}getLayer(t){return u(this,ti).get(t)}get currentPageIndex(){return u(this,Uc)}addLayer(t){u(this,ti).set(t.pageIndex,t),u(this,yr)?t.enable():t.disable()}removeLayer(t){u(this,ti).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){var a,l,o;if(u(this,Ve)!==t&&!(u(this,Rn)&&(await u(this,Rn).promise,!u(this,Rn)))){if(S(this,Rn,Promise.withResolvers()),(a=u(this,pr))==null||a.commitOrRemove(),S(this,Ve,t),t===wt.NONE){this.setEditingState(!1),C(this,at,xT).call(this),(l=this._editorUndoBar)==null||l.hide(),u(this,Rn).resolve();return}t===wt.SIGNATURE&&await((o=u(this,Ar))==null?void 0:o.loadSignatures()),this.setEditingState(!0),await C(this,at,TT).call(this),this.unselectAll();for(const d of u(this,ti).values())d.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),u(this,Rn).resolve();return}for(const d of u(this,He).values())d.annotationElementId===e?(this.setSelected(d),d.enterInEditMode()):d.unselect();u(this,Rn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==u(this,Ve)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(u(this,Fn)){switch(t){case Ut.CREATE:this.currentLayer.addNewEditor(e);return;case Ut.HIGHLIGHT_DEFAULT_COLOR:(n=u(this,Cl))==null||n.updateColor(e);break;case Ut.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Md)||S(this,Md,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const a of u(this,Qt))a.updateParams(t,e);for(const a of u(this,Fn))a.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var l;for(const o of u(this,He).values())o.editorType===t&&o.show(e);(((l=u(this,Md))==null?void 0:l.get(Ut.HIGHLIGHT_SHOW_ALL))??!0)!==e&&C(this,at,Ws).call(this,[[Ut.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(u(this,Cd)!==t){S(this,Cd,t);for(const e of u(this,ti).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of u(this,He).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return u(this,He).get(t)}addEditor(t){u(this,He).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(u(this,gs)&&clearTimeout(u(this,gs)),S(this,gs,setTimeout(()=>{this.focusMainContainer(),S(this,gs,null)},0))),u(this,He).delete(t.id),t.annotationElementId&&((e=u(this,vr))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!u(this,_l).has(t.annotationElementId))&&((n=u(this,ta))==null||n.remove(t.id))}addDeletedAnnotationElement(t){u(this,_l).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return u(this,_l).has(t)}removeDeletedAnnotationElement(t){u(this,_l).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){u(this,Zi)!==t&&(S(this,Zi,t),t&&C(this,at,Ws).call(this,t.propertiesToUpdate))}updateUI(t){u(this,at,CT)===t&&C(this,at,Ws).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){C(this,at,Ws).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(u(this,Qt).has(t)){u(this,Qt).delete(t),t.unselect(),C(this,at,Si).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,Qt).add(t),t.select(),C(this,at,Ws).call(this,t.propertiesToUpdate),C(this,at,Si).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=u(this,pr))==null||e.commitOrRemove();for(const n of u(this,Qt))n!==t&&n.unselect();u(this,Qt).clear(),u(this,Qt).add(t),t.select(),C(this,at,Ws).call(this,t.propertiesToUpdate),C(this,at,Si).call(this,{hasSelectedEditor:!0})}isSelected(t){return u(this,Qt).has(t)}get firstSelectedEditor(){return u(this,Qt).values().next().value}unselect(t){t.unselect(),u(this,Qt).delete(t),C(this,at,Si).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,Qt).size!==0}get isEnterHandled(){return u(this,Qt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;u(this,Cn).undo(),C(this,at,Si).call(this,{hasSomethingToUndo:u(this,Cn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,at,Zh).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){u(this,Cn).redo(),C(this,at,Si).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,Cn).hasSomethingToRedo(),isEmpty:C(this,at,Zh).call(this)})}addCommands(t){u(this,Cn).add(t),C(this,at,Si).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,at,Zh).call(this)})}cleanUndoStack(t){u(this,Cn).cleanType(t)}delete(){var l;this.commitOrRemove();const t=(l=this.currentLayer)==null?void 0:l.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...u(this,Qt)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(a,e.length===1?e[0].editorType:e.length);for(const d of e)d.remove()},a=()=>{for(const o of e)C(this,at,X0).call(this,o)};this.addCommands({cmd:n,undo:a,mustExec:!0})}commitOrRemove(){var t;(t=u(this,Zi))==null||t.commitOrRemove()}hasSomethingToControl(){return u(this,Zi)||this.hasSelection}selectAll(){for(const t of u(this,Qt))t.commit();C(this,at,Y0).call(this,u(this,He).values())}unselectAll(){var t;if(!(u(this,Zi)&&(u(this,Zi).commitOrRemove(),u(this,Ve)!==wt.NONE))&&!((t=u(this,pr))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of u(this,Qt))e.unselect();u(this,Qt).clear(),C(this,at,Si).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;u(this,Sr)[0]+=t,u(this,Sr)[1]+=e;const[a,l]=u(this,Sr),o=[...u(this,Qt)],d=1e3;u(this,ys)&&clearTimeout(u(this,ys)),S(this,ys,setTimeout(()=>{S(this,ys,null),u(this,Sr)[0]=u(this,Sr)[1]=0,this.addCommands({cmd:()=>{for(const f of o)u(this,He).has(f.id)&&(f.translateInPage(a,l),f.translationDone())},undo:()=>{for(const f of o)u(this,He).has(f.id)&&(f.translateInPage(-a,-l),f.translationDone())},mustExec:!1})},d));for(const f of o)f.translateInPage(t,e),f.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,ps,new Map);for(const t of u(this,Qt))u(this,ps).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,ps))return!1;this.disableUserSelect(!1);const t=u(this,ps);S(this,ps,null);let e=!1;for(const[{x:a,y:l,pageIndex:o},d]of t)d.newX=a,d.newY=l,d.newPageIndex=o,e||(e=a!==d.savedX||l!==d.savedY||o!==d.savedPageIndex);if(!e)return!1;const n=(a,l,o,d)=>{if(u(this,He).has(a.id)){const f=u(this,ti).get(d);f?a._setParentAndPosition(f,l,o):(a.pageIndex=d,a.x=l,a.y=o)}};return this.addCommands({cmd:()=>{for(const[a,{newX:l,newY:o,newPageIndex:d}]of t)n(a,l,o,d)},undo:()=>{for(const[a,{savedX:l,savedY:o,savedPageIndex:d}]of t)n(a,l,o,d)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(u(this,ps))for(const n of u(this,ps).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||u(this,Qt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return u(this,Zi)===t}getActive(){return u(this,Zi)}getMode(){return u(this,Ve)}get imageManager(){return Bt(this,"imageManager",new F0)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,m=e.rangeCount;p<m;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:n,y:a,width:l,height:o}=t.getBoundingClientRect();let d;switch(t.getAttribute("data-main-rotation")){case"90":d=(p,m,b,v)=>({x:(m-a)/o,y:1-(p+b-n)/l,width:v/o,height:b/l});break;case"180":d=(p,m,b,v)=>({x:1-(p+b-n)/l,y:1-(m+v-a)/o,width:b/l,height:v/o});break;case"270":d=(p,m,b,v)=>({x:1-(m+v-a)/o,y:(p-n)/l,width:v/o,height:b/l});break;default:d=(p,m,b,v)=>({x:(p-n)/l,y:(m-a)/o,width:b/l,height:v/o});break}const f=[];for(let p=0,m=e.rangeCount;p<m;p++){const b=e.getRangeAt(p);if(!b.collapsed)for(const{x:v,y:A,width:E,height:w}of b.getClientRects())E===0||w===0||f.push(d(v,A,E,w))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:e}){(u(this,Hc)||S(this,Hc,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=u(this,Hc))==null||e.delete(t)}renderAnnotationElement(t){var a;const e=(a=u(this,Hc))==null?void 0:a.get(t.data.id);if(!e)return;const n=u(this,ta).getRawValue(e);n&&(u(this,Ve)===wt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var l;const a=(l=u(this,vr))==null?void 0:l.get(t);a&&(a.setCanvas(e,n),u(this,vr).delete(t))}addMissingCanvas(t,e){(u(this,vr)||S(this,vr,new Map)).set(t,e)}};Bc=new WeakMap,Zi=new WeakMap,He=new WeakMap,ti=new WeakMap,zc=new WeakMap,ta=new WeakMap,Hc=new WeakMap,Cn=new WeakMap,fr=new WeakMap,pr=new WeakMap,Uc=new WeakMap,_l=new WeakMap,ps=new WeakMap,Fn=new WeakMap,Tl=new WeakMap,_d=new WeakMap,Td=new WeakMap,Fc=new WeakMap,xd=new WeakMap,gs=new WeakMap,gr=new WeakMap,Ic=new WeakMap,mr=new WeakMap,ms=new WeakMap,Am=new WeakMap,yr=new WeakMap,Cd=new WeakMap,br=new WeakMap,xl=new WeakMap,Cl=new WeakMap,vr=new WeakMap,Rd=new WeakMap,Ve=new WeakMap,Qt=new WeakMap,ea=new WeakMap,Ar=new WeakMap,Rl=new WeakMap,Md=new WeakMap,Dd=new WeakMap,Sr=new WeakMap,ys=new WeakMap,ia=new WeakMap,Od=new WeakMap,Rn=new WeakMap,at=new WeakSet,Og=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},j0=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of u(this,ti).values())if(n.hasTextLayer(t))return n;return null},bT=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=C(this,at,Og).call(this,t).closest(".textLayer"),a=this.getSelectionBoxes(n);a&&(u(this,ms)||S(this,ms,new fL(this)),u(this,ms).show(n,a,this.direction==="ltr"))},vT=function(){var l,o,d;const t=document.getSelection();if(!t||t.isCollapsed){u(this,ea)&&((l=u(this,ms))==null||l.hide(),S(this,ea,null),C(this,at,Si).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===u(this,ea))return;const a=C(this,at,Og).call(this,t).closest(".textLayer");if(!a){u(this,ea)&&((o=u(this,ms))==null||o.hide(),S(this,ea,null),C(this,at,Si).call(this,{hasSelectedText:!1}));return}if((d=u(this,ms))==null||d.hide(),S(this,ea,e),C(this,at,Si).call(this,{hasSelectedText:!0}),!(u(this,Ve)!==wt.HIGHLIGHT&&u(this,Ve)!==wt.NONE)&&(u(this,Ve)===wt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,mr,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=u(this,Ve)===wt.HIGHLIGHT?C(this,at,j0).call(this,a):null;f==null||f.toggleDrawing();const p=new AbortController,m=this.combinedSignal(p),b=v=>{v.type==="pointerup"&&v.button!==0||(p.abort(),f==null||f.toggleDrawing(!0),v.type==="pointerup"&&C(this,at,Lg).call(this,"main_toolbar"))};window.addEventListener("pointerup",b,{signal:m}),window.addEventListener("blur",b,{signal:m})}},Lg=function(t=""){u(this,Ve)===wt.HIGHLIGHT?this.highlightSelection(t):u(this,_d)&&C(this,at,bT).call(this)},AT=function(){document.addEventListener("selectionchange",C(this,at,vT).bind(this),{signal:this._signal})},ST=function(){if(u(this,gr))return;S(this,gr,new AbortController);const t=this.combinedSignal(u(this,gr));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},ET=function(){var t;(t=u(this,gr))==null||t.abort(),S(this,gr,null)},G0=function(){if(u(this,br))return;S(this,br,new AbortController);const t=this.combinedSignal(u(this,br));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},wT=function(){var t;(t=u(this,br))==null||t.abort(),S(this,br,null)},q0=function(){if(u(this,fr))return;S(this,fr,new AbortController);const t=this.combinedSignal(u(this,fr));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},V0=function(){var t;(t=u(this,fr))==null||t.abort(),S(this,fr,null)},_T=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Si=function(t){Object.entries(t).some(([n,a])=>u(this,Dd)[n]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,Dd),t)}),u(this,Ve)===wt.HIGHLIGHT&&t.hasSelectedEditor===!1&&C(this,at,Ws).call(this,[[Ut.HIGHLIGHT_FREE,!0]]))},Ws=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},TT=async function(){if(!u(this,yr)){S(this,yr,!0);const t=[];for(const e of u(this,ti).values())t.push(e.enable());await Promise.all(t);for(const e of u(this,He).values())e.enable()}},xT=function(){if(this.unselectAll(),u(this,yr)){S(this,yr,!1);for(const t of u(this,ti).values())t.disable();for(const t of u(this,He).values())t.disable()}},X0=function(t){const e=u(this,ti).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},CT=function(){let t=null;for(t of u(this,Qt));return t},Zh=function(){if(u(this,He).size===0)return!0;if(u(this,He).size===1)for(const t of u(this,He).values())return t.isEmpty();return!1},Y0=function(t){for(const e of u(this,Qt))e.unselect();u(this,Qt).clear();for(const e of t)e.isEmpty()||(u(this,Qt).add(e),e.select());C(this,at,Si).call(this,{hasSelectedEditor:this.hasSelection})},et(Mc,"TRANSLATE_SMALL",1),et(Mc,"TRANSLATE_BIG",10);let Mo=Mc;var Xe,bs,In,jc,vs,Ji,Gc,As,Bi,na,Ml,Ss,Er,Zn,Jh,Ng;const Ei=class Ei{constructor(t){x(this,Zn);x(this,Xe,null);x(this,bs,!1);x(this,In,null);x(this,jc,null);x(this,vs,null);x(this,Ji,null);x(this,Gc,!1);x(this,As,null);x(this,Bi,null);x(this,na,null);x(this,Ml,null);x(this,Ss,!1);S(this,Bi,t),S(this,Ss,t._uiManager.useNewAltTextFlow),u(Ei,Er)||S(Ei,Er,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Ei._l10n??(Ei._l10n=t)}async render(){const t=S(this,In,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=S(this,jc,document.createElement("span"));t.append(e),u(this,Ss)?(t.classList.add("new"),t.setAttribute("data-l10n-id",u(Ei,Er).missing),e.setAttribute("data-l10n-id",u(Ei,Er)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=u(this,Bi)._uiManager._signal;t.addEventListener("contextmenu",Jn,{signal:n}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:n});const a=l=>{l.preventDefault(),u(this,Bi)._uiManager.editAltText(u(this,Bi)),u(this,Ss)&&u(this,Bi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,Zn,Jh)}})};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(S(this,Gc,!0),a(l))},{signal:n}),await C(this,Zn,Ng).call(this),t}finish(){u(this,In)&&(u(this,In).focus({focusVisible:u(this,Gc)}),S(this,Gc,!1))}isEmpty(){return u(this,Ss)?u(this,Xe)===null:!u(this,Xe)&&!u(this,bs)}hasData(){return u(this,Ss)?u(this,Xe)!==null||!!u(this,na):this.isEmpty()}get guessedText(){return u(this,na)}async setGuessedText(t){u(this,Xe)===null&&(S(this,na,t),S(this,Ml,await Ei._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),C(this,Zn,Ng).call(this))}toggleAltTextBadge(t=!1){var e;if(!u(this,Ss)||u(this,Xe)){(e=u(this,As))==null||e.remove(),S(this,As,null);return}if(!u(this,As)){const n=S(this,As,document.createElement("div"));n.className="noAltTextBadge",u(this,Bi).div.append(n)}u(this,As).classList.toggle("hidden",!t)}serialize(t){let e=u(this,Xe);return!t&&u(this,na)===e&&(e=u(this,Ml)),{altText:e,decorative:u(this,bs),guessedText:u(this,na),textWithDisclaimer:u(this,Ml)}}get data(){return{altText:u(this,Xe),decorative:u(this,bs)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:a,cancel:l=!1}){n&&(S(this,na,n),S(this,Ml,a)),!(u(this,Xe)===t&&u(this,bs)===e)&&(l||(S(this,Xe,t),S(this,bs,e)),C(this,Zn,Ng).call(this))}toggle(t=!1){u(this,In)&&(!t&&u(this,Ji)&&(clearTimeout(u(this,Ji)),S(this,Ji,null)),u(this,In).disabled=!t)}shown(){u(this,Bi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,Zn,Jh)}})}destroy(){var t,e;(t=u(this,In))==null||t.remove(),S(this,In,null),S(this,jc,null),S(this,vs,null),(e=u(this,As))==null||e.remove(),S(this,As,null)}};Xe=new WeakMap,bs=new WeakMap,In=new WeakMap,jc=new WeakMap,vs=new WeakMap,Ji=new WeakMap,Gc=new WeakMap,As=new WeakMap,Bi=new WeakMap,na=new WeakMap,Ml=new WeakMap,Ss=new WeakMap,Er=new WeakMap,Zn=new WeakSet,Jh=function(){return u(this,Xe)&&"added"||u(this,Xe)===null&&this.guessedText&&"review"||"missing"},Ng=async function(){var a,l,o;const t=u(this,In);if(!t)return;if(u(this,Ss)){if(t.classList.toggle("done",!!u(this,Xe)),t.setAttribute("data-l10n-id",u(Ei,Er)[u(this,Zn,Jh)]),(a=u(this,jc))==null||a.setAttribute("data-l10n-id",u(Ei,Er)[`${u(this,Zn,Jh)}-label`]),!u(this,Xe)){(l=u(this,vs))==null||l.remove();return}}else{if(!u(this,Xe)&&!u(this,bs)){t.classList.remove("done"),(o=u(this,vs))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=u(this,vs);if(!e){S(this,vs,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${u(this,Bi).id}`;const d=100,f=u(this,Bi)._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(u(this,Ji)),S(this,Ji,null)},{once:!0}),t.addEventListener("mouseenter",()=>{S(this,Ji,setTimeout(()=>{S(this,Ji,null),u(this,vs).classList.add("show"),u(this,Bi)._reportTelemetry({action:"alt_text_tooltip"})},d))},{signal:f}),t.addEventListener("mouseleave",()=>{var p;u(this,Ji)&&(clearTimeout(u(this,Ji)),S(this,Ji,null)),(p=u(this,vs))==null||p.classList.remove("show")},{signal:f})}u(this,bs)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=u(this,Xe)),e.parentNode||t.append(e);const n=u(this,Bi).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},x(Ei,Er,null),et(Ei,"_l10n",null);let cm=Ei;var qc,Dl,Ld,Nd,kd,Pd,Bd,sa,Ol,aa,Ll,ra,Kr,RT,MT,DT;const SA=class SA{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:a=null,onPinching:l=null,onPinchEnd:o=null,signal:d}){x(this,Kr);x(this,qc);x(this,Dl,!1);x(this,Ld,null);x(this,Nd);x(this,kd);x(this,Pd);x(this,Bd);x(this,sa,null);x(this,Ol);x(this,aa,null);x(this,Ll);x(this,ra,null);S(this,qc,t),S(this,Ld,n),S(this,Nd,e),S(this,kd,a),S(this,Pd,l),S(this,Bd,o),S(this,Ll,new AbortController),S(this,Ol,AbortSignal.any([d,u(this,Ll).signal])),t.addEventListener("touchstart",C(this,Kr,RT).bind(this),{passive:!1,signal:u(this,Ol)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ka.pixelRatio}destroy(){var t,e;(t=u(this,Ll))==null||t.abort(),S(this,Ll,null),(e=u(this,sa))==null||e.abort(),S(this,sa,null)}};qc=new WeakMap,Dl=new WeakMap,Ld=new WeakMap,Nd=new WeakMap,kd=new WeakMap,Pd=new WeakMap,Bd=new WeakMap,sa=new WeakMap,Ol=new WeakMap,aa=new WeakMap,Ll=new WeakMap,ra=new WeakMap,Kr=new WeakSet,RT=function(t){var a,l,o;if((a=u(this,Nd))!=null&&a.call(this))return;if(t.touches.length===1){if(u(this,sa))return;const d=S(this,sa,new AbortController),f=AbortSignal.any([u(this,Ol),d.signal]),p=u(this,qc),m={capture:!0,signal:f,passive:!1},b=v=>{var A;v.pointerType==="touch"&&((A=u(this,sa))==null||A.abort(),S(this,sa,null))};p.addEventListener("pointerdown",v=>{v.pointerType==="touch"&&(Oe(v),b(v))},m),p.addEventListener("pointerup",b,m),p.addEventListener("pointercancel",b,m);return}if(!u(this,ra)){S(this,ra,new AbortController);const d=AbortSignal.any([u(this,Ol),u(this,ra).signal]),f=u(this,qc),p={signal:d,capture:!1,passive:!1};f.addEventListener("touchmove",C(this,Kr,MT).bind(this),p);const m=C(this,Kr,DT).bind(this);f.addEventListener("touchend",m,p),f.addEventListener("touchcancel",m,p),p.capture=!0,f.addEventListener("pointerdown",Oe,p),f.addEventListener("pointermove",Oe,p),f.addEventListener("pointercancel",Oe,p),f.addEventListener("pointerup",Oe,p),(l=u(this,kd))==null||l.call(this)}if(Oe(t),t.touches.length!==2||(o=u(this,Ld))!=null&&o.call(this)){S(this,aa,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),S(this,aa,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},MT=function(t){var k;if(!u(this,aa)||t.touches.length!==2)return;Oe(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:a,screenY:l}=e,{screenX:o,screenY:d}=n,f=u(this,aa),{touch0X:p,touch0Y:m,touch1X:b,touch1Y:v}=f,A=b-p,E=v-m,w=o-a,T=d-l,R=Math.hypot(w,T)||1,O=Math.hypot(A,E)||1;if(!u(this,Dl)&&Math.abs(O-R)<=SA.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(f.touch0X=a,f.touch0Y=l,f.touch1X=o,f.touch1Y=d,!u(this,Dl)){S(this,Dl,!0);return}const D=[(a+o)/2,(l+d)/2];(k=u(this,Pd))==null||k.call(this,D,O,R)},DT=function(t){var e;t.touches.length>=2||(u(this,ra)&&(u(this,ra).abort(),S(this,ra,null),(e=u(this,Bd))==null||e.call(this)),u(this,aa)&&(Oe(t),S(this,aa,null),S(this,Dl,!1)))};let um=SA;var Nl,jn,ce,Vc,wr,zd,kl,ei,Pl,la,_r,Hd,Bl,tn,Ud,zl,oa,Es,Xc,Yc,Mn,Hl,Fd,Sm,bt,$0,Id,K0,kg,OT,LT,W0,Pg,Q0,NT,kT,PT,Z0,BT,J0,zT,HT,UT,tv,td;const Mt=class Mt{constructor(t){x(this,bt);x(this,Nl,null);x(this,jn,null);x(this,ce,null);x(this,Vc,!1);x(this,wr,null);x(this,zd,"");x(this,kl,!1);x(this,ei,null);x(this,Pl,null);x(this,la,null);x(this,_r,null);x(this,Hd,"");x(this,Bl,!1);x(this,tn,null);x(this,Ud,!1);x(this,zl,!1);x(this,oa,!1);x(this,Es,null);x(this,Xc,0);x(this,Yc,0);x(this,Mn,null);x(this,Hl,null);et(this,"_isCopy",!1);et(this,"_editToolbar",null);et(this,"_initialOptions",Object.create(null));et(this,"_initialData",null);et(this,"_isVisible",!0);et(this,"_uiManager",null);et(this,"_focusEventsAllowed",!0);x(this,Fd,!1);x(this,Sm,Mt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:a,pageX:l,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,a],this.pageTranslation=[l,o];const[d,f]=this.parentDimensions;this.x=t.x/d,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Mt.prototype._resizeWithKeyboard,e=Mo.TRANSLATE_SMALL,n=Mo.TRANSLATE_BIG;return Bt(this,"_resizerKeyboardManager",new Wf([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Mt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Bt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new mL({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Mt._l10n??(Mt._l10n=t),Mt._l10nResizer||(Mt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Mt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Mt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ne("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,Fd)}set _isDraggable(t){var e;S(this,Fd,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,Sm)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):C(this,bt,td).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(u(this,Bl)?S(this,Bl,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,a){const[l,o]=this.parentDimensions;[n,a]=this.screenToPageTranslation(n,a),this.x=(t+n)/l,this.y=(e+a)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,a]=this.parentDimensions;this.setAt(t*n,e*a,this.width*n,this.height*a),this._onTranslated()}translate(t,e){C(this,bt,$0).call(this,this.parentDimensions,t,e)}translateInPage(t,e){u(this,tn)||S(this,tn,[this.x,this.y,this.width,this.height]),C(this,bt,$0).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){u(this,tn)||S(this,tn,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[a,l]}=this;if(this.x+=t/a,this.y+=e/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:b,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,b,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:d}=this;const[f,p]=this.getBaseTranslation();o+=f,d+=p;const{style:m}=n;m.left=`${(100*o).toFixed(2)}%`,m.top=`${(100*d).toFixed(2)}%`,this._onTranslating(o,d),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!u(this,tn)&&(u(this,tn)[0]!==this.x||u(this,tn)[1]!==this.y)}get _hasBeenResized(){return!!u(this,tn)&&(u(this,tn)[2]!==this.width||u(this,tn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Mt,a=n/t,l=n/e;switch(this.rotation){case 90:return[-a,l];case 180:return[a,l];case 270:return[a,-l];default:return[-a,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,a]}=this;let{x:l,y:o,width:d,height:f}=this;if(d*=n,f*=a,l*=n,o*=a,this._mustFixPosition)switch(t){case 0:l=Ci(l,0,n-d),o=Ci(o,0,a-f);break;case 90:l=Ci(l,0,n-f),o=Ci(o,d,a);break;case 180:l=Ci(l,d,n),o=Ci(o,f,a);break;case 270:l=Ci(l,f,n),o=Ci(o,0,a-d);break}this.x=l/=n,this.y=o/=a;const[p,m]=this.getBaseTranslation();l+=p,o+=m,e.left=`${(100*l).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return C(n=Mt,Id,K0).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return C(n=Mt,Id,K0).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,a]=this.parentDimensions,{style:l}=this.div;l.width=`${(100*t/n).toFixed(2)}%`,u(this,kl)||(l.height=`${(100*e/a).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,a=n.endsWith("%"),l=!u(this,kl)&&e.endsWith("%");if(a&&l)return;const[o,d]=this.parentDimensions;a||(t.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!u(this,kl)&&!l&&(t.height=`${(100*parseFloat(e)/d).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=u(this,ce))==null||t.finish()}async addEditToolbar(){return this._editToolbar||u(this,zl)?this._editToolbar:(this._editToolbar=new U0(this),this.div.append(this._editToolbar.render()),u(this,ce)&&await this._editToolbar.addAltText(u(this,ce)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=u(this,ce))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){u(this,ce)||(cm.initialize(Mt._l10n),S(this,ce,new cm(this)),u(this,Nl)&&(u(this,ce).data=u(this,Nl),S(this,Nl,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=u(this,ce))==null?void 0:t.data}set altTextData(t){u(this,ce)&&(u(this,ce).data=t)}get guessedAltText(){var t;return(t=u(this,ce))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=u(this,ce))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=u(this,ce))==null?void 0:e.serialize(t)}hasAltText(){return!!u(this,ce)&&!u(this,ce).isEmpty()}hasAltTextData(){var t;return((t=u(this,ce))==null?void 0:t.hasData())??!1}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=u(this,Vc)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),C(this,bt,J0).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[a,l]=this.getInitialTranslation();return this.translate(a,l),fA(this,t,["keydown","pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,Hl)||S(this,Hl,new um({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:C(this,bt,NT).bind(this),onPinching:C(this,bt,kT).bind(this),onPinchEnd:C(this,bt,PT).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=oi.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(S(this,Bl,!0),this._isDraggable){C(this,bt,BT).call(this,t);return}C(this,bt,Z0).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,Es)&&clearTimeout(u(this,Es)),S(this,Es,setTimeout(()=>{var t;S(this,Es,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const a=this.parentScale,[l,o]=this.pageDimensions,[d,f]=this.pageTranslation,p=t/a,m=e/a,b=this.x*l,v=this.y*o,A=this.width*l,E=this.height*o;switch(n){case 0:return[b+p+d,o-v-m-E+f,b+p+A+d,o-v-m+f];case 90:return[b+m+d,o-v+p+f,b+m+E+d,o-v+p+A+f];case 180:return[b-p-A+d,o-v+m+f,b-p+d,o-v+m+E+f];case 270:return[b-m-E+d,o-v-p-A+f,b-m+d,o-v-p+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,a,l,o]=t,d=l-n,f=o-a;switch(this.rotation){case 0:return[n,e-o,d,f];case 90:return[n,e-a,f,d];case 180:return[l,e-a,d,f];case 270:return[l,e-o,f,d];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){S(this,zl,!0)}disableEditMode(){S(this,zl,!1)}isInEditMode(){return u(this,zl)}shouldGetKeyboardEvents(){return u(this,oa)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:a}=this.getClientDimensions(),{innerHeight:l,innerWidth:o}=window;return e<o&&a>0&&t<l&&n>0}rebuild(){C(this,bt,J0).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){ne("An editor must be serializable")}static async deserialize(t,e,n){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});a.rotation=t.rotation,S(a,Nl,t.accessibilityData),a._isCopy=t.isCopy||!1;const[l,o]=a.pageDimensions,[d,f,p,m]=a.getRectInCurrentCoords(t.rect,o);return a.x=d/l,a.y=f/o,a.width=p/l,a.height=m/o,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=u(this,_r))==null||t.abort(),S(this,_r,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,Es)&&(clearTimeout(u(this,Es)),S(this,Es,null)),C(this,bt,td).call(this),this.removeEditToolbar(),u(this,Mn)){for(const n of u(this,Mn).values())clearTimeout(n);S(this,Mn,null)}this.parent=null,(e=u(this,Hl))==null||e.destroy(),S(this,Hl,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,bt,OT).call(this),u(this,ei).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),S(this,la,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=u(this,ei).children;if(!u(this,jn)){S(this,jn,Array.from(e));const o=C(this,bt,zT).bind(this),d=C(this,bt,HT).bind(this),f=this._uiManager._signal;for(const p of u(this,jn)){const m=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",o,{signal:f}),p.addEventListener("blur",d,{signal:f}),p.addEventListener("focus",C(this,bt,UT).bind(this,m),{signal:f}),p.setAttribute("data-l10n-id",Mt._l10nResizer[m])}}const n=u(this,jn)[0];let a=0;for(const o of e){if(o===n)break;a++}const l=(360-this.rotation+this.parentRotation)%360/90*(u(this,jn).length/4);if(l!==a){if(l<a)for(let d=0;d<a-l;d++)u(this,ei).append(u(this,ei).firstChild);else if(l>a)for(let d=0;d<l-a;d++)u(this,ei).firstChild.before(u(this,ei).lastChild);let o=0;for(const d of e){const p=u(this,jn)[o++].getAttribute("data-resizer-name");d.setAttribute("data-l10n-id",Mt._l10nResizer[p])}}C(this,bt,tv).call(this,0),S(this,oa,!0),u(this,ei).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){u(this,oa)&&C(this,bt,Q0).call(this,u(this,Hd),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){C(this,bt,td).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var a,l;(a=this.div)!=null&&a.classList.contains("selectedEditor")&&((l=this._editToolbar)==null||l.show())});return}(e=this._editToolbar)==null||e.show(),(n=u(this,ce))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,a,l;(t=u(this,ei))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(a=this._editToolbar)==null||a.hide(),(l=u(this,ce))==null||l.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,Ud)}set isEditing(t){S(this,Ud,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){S(this,kl,!0);const n=t/e,{style:a}=this.div;a.aspectRatio=n,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){u(this,Mn)||S(this,Mn,new Map);const{action:n}=t;let a=u(this,Mn).get(n);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),u(this,Mn).delete(n),u(this,Mn).size===0&&S(this,Mn,null)},Mt._telemetryTimeout),u(this,Mn).set(n,a);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),S(this,Vc,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,Vc,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Nl=new WeakMap,jn=new WeakMap,ce=new WeakMap,Vc=new WeakMap,wr=new WeakMap,zd=new WeakMap,kl=new WeakMap,ei=new WeakMap,Pl=new WeakMap,la=new WeakMap,_r=new WeakMap,Hd=new WeakMap,Bl=new WeakMap,tn=new WeakMap,Ud=new WeakMap,zl=new WeakMap,oa=new WeakMap,Es=new WeakMap,Xc=new WeakMap,Yc=new WeakMap,Mn=new WeakMap,Hl=new WeakMap,Fd=new WeakMap,Sm=new WeakMap,bt=new WeakSet,$0=function([t,e],n,a){[n,a]=this.screenToPageTranslation(n,a),this.x+=n/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Id=new WeakSet,K0=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},kg=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},OT=function(){if(u(this,ei))return;S(this,ei,document.createElement("div")),u(this,ei).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const a=document.createElement("div");u(this,ei).append(a),a.classList.add("resizer",n),a.setAttribute("data-resizer-name",n),a.addEventListener("pointerdown",C(this,bt,LT).bind(this,n),{signal:e}),a.addEventListener("contextmenu",Jn,{signal:e}),a.tabIndex=-1}this.div.prepend(u(this,ei))},LT=function(t,e){var m;e.preventDefault();const{isMac:n}=oi.platform;if(e.button!==0||e.ctrlKey&&n)return;(m=u(this,ce))==null||m.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,S(this,Pl,[e.screenX,e.screenY]);const l=new AbortController,o=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C(this,bt,Q0).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Oe,{passive:!1,signal:o}),window.addEventListener("contextmenu",Jn,{signal:o}),S(this,la,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const d=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{var b;l.abort(),this.parent.togglePointerEvents(!0),(b=u(this,ce))==null||b.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=d,this.div.style.cursor=f,C(this,bt,Pg).call(this)};window.addEventListener("pointerup",p,{signal:o}),window.addEventListener("blur",p,{signal:o})},W0=function(t,e,n,a){this.width=n,this.height=a,this.x=t,this.y=e;const[l,o]=this.parentDimensions;this.setDims(l*n,o*a),this.fixAndSetPosition(),this._onResized()},Pg=function(){if(!u(this,la))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:a}=u(this,la);S(this,la,null);const l=this.x,o=this.y,d=this.width,f=this.height;l===t&&o===e&&d===n&&f===a||this.addCommands({cmd:C(this,bt,W0).bind(this,l,o,d,f),undo:C(this,bt,W0).bind(this,t,e,n,a),mustExec:!0})},Q0=function(t,e){const[n,a]=this.parentDimensions,l=this.x,o=this.y,d=this.width,f=this.height,p=Mt.MIN_SIZE/n,m=Mt.MIN_SIZE/a,b=C(this,bt,kg).call(this,this.rotation),v=(z,X)=>[b[0]*z+b[2]*X,b[1]*z+b[3]*X],A=C(this,bt,kg).call(this,360-this.rotation),E=(z,X)=>[A[0]*z+A[2]*X,A[1]*z+A[3]*X];let w,T,R=!1,O=!1;switch(t){case"topLeft":R=!0,w=(z,X)=>[0,0],T=(z,X)=>[z,X];break;case"topMiddle":w=(z,X)=>[z/2,0],T=(z,X)=>[z/2,X];break;case"topRight":R=!0,w=(z,X)=>[z,0],T=(z,X)=>[0,X];break;case"middleRight":O=!0,w=(z,X)=>[z,X/2],T=(z,X)=>[0,X/2];break;case"bottomRight":R=!0,w=(z,X)=>[z,X],T=(z,X)=>[0,0];break;case"bottomMiddle":w=(z,X)=>[z/2,X],T=(z,X)=>[z/2,0];break;case"bottomLeft":R=!0,w=(z,X)=>[0,X],T=(z,X)=>[z,0];break;case"middleLeft":O=!0,w=(z,X)=>[0,X/2],T=(z,X)=>[z,X/2];break}const D=w(d,f),k=T(d,f);let L=v(...k);const U=Mt._round(l+L[0]),F=Mt._round(o+L[1]);let W=1,J=1,nt,st;if(e.fromKeyboard)({deltaX:nt,deltaY:st}=e);else{const{screenX:z,screenY:X}=e,[ut,Nt]=u(this,Pl);[nt,st]=this.screenToPageTranslation(z-ut,X-Nt),u(this,Pl)[0]=z,u(this,Pl)[1]=X}if([nt,st]=E(nt/n,st/a),R){const z=Math.hypot(d,f);W=J=Math.max(Math.min(Math.hypot(k[0]-D[0]-nt,k[1]-D[1]-st)/z,1/d,1/f),p/d,m/f)}else O?W=Ci(Math.abs(k[0]-D[0]-nt),p,1)/d:J=Ci(Math.abs(k[1]-D[1]-st),m,1)/f;const St=Mt._round(d*W),zt=Mt._round(f*J);L=v(...T(St,zt));const Et=U-L[0],Gt=F-L[1];u(this,tn)||S(this,tn,[this.x,this.y,this.width,this.height]),this.width=St,this.height=zt,this.x=Et,this.y=Gt,this.setDims(n*St,a*zt),this.fixAndSetPosition(),this._onResizing()},NT=function(){var t;S(this,la,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=u(this,ce))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},kT=function(t,e,n){let l=.7*(n/e)+1-.7;if(l===1)return;const o=C(this,bt,kg).call(this,this.rotation),d=(U,F)=>[o[0]*U+o[2]*F,o[1]*U+o[3]*F],[f,p]=this.parentDimensions,m=this.x,b=this.y,v=this.width,A=this.height,E=Mt.MIN_SIZE/f,w=Mt.MIN_SIZE/p;l=Math.max(Math.min(l,1/v,1/A),E/v,w/A);const T=Mt._round(v*l),R=Mt._round(A*l);if(T===v&&R===A)return;u(this,tn)||S(this,tn,[m,b,v,A]);const O=d(v/2,A/2),D=Mt._round(m+O[0]),k=Mt._round(b+O[1]),L=d(T/2,R/2);this.x=D-L[0],this.y=k-L[1],this.width=T,this.height=R,this.setDims(f*T,p*R),this.fixAndSetPosition(),this._onResizing()},PT=function(){var t;(t=u(this,ce))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),C(this,bt,Pg).call(this)},Z0=function(t){const{isMac:e}=oi.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},BT=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const a=new AbortController,l=this._uiManager.combinedSignal(a),o={capture:!0,passive:!1,signal:l},d=p=>{a.abort(),S(this,wr,null),S(this,Bl,!1),this._uiManager.endDragSession()||C(this,bt,Z0).call(this,p),n&&this._onStopDragging()};e&&(S(this,Xc,t.clientX),S(this,Yc,t.clientY),S(this,wr,t.pointerId),S(this,zd,t.pointerType),window.addEventListener("pointermove",p=>{n||(n=!0,this._onStartDragging());const{clientX:m,clientY:b,pointerId:v}=p;if(v!==u(this,wr)){Oe(p);return}const[A,E]=this.screenToPageTranslation(m-u(this,Xc),b-u(this,Yc));S(this,Xc,m),S(this,Yc,b),this._uiManager.dragSelectedEditors(A,E)},o),window.addEventListener("touchmove",Oe,o),window.addEventListener("pointerdown",p=>{p.pointerType===u(this,zd)&&(u(this,Hl)||p.isPrimary)&&d(p),Oe(p)},o));const f=p=>{if(!u(this,wr)||u(this,wr)===p.pointerId){d(p);return}Oe(p)};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})},J0=function(){if(u(this,_r)||!this.div)return;S(this,_r,new AbortController);const t=this._uiManager.combinedSignal(u(this,_r));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},zT=function(t){Mt._resizerKeyboardManager.exec(this,t)},HT=function(t){var e;u(this,oa)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==u(this,ei)&&C(this,bt,td).call(this)},UT=function(t){S(this,Hd,u(this,oa)?t:"")},tv=function(t){if(u(this,jn))for(const e of u(this,jn))e.tabIndex=t},td=function(){S(this,oa,!1),C(this,bt,tv).call(this,-1),C(this,bt,Pg).call(this)},x(Mt,Id),et(Mt,"_l10n",null),et(Mt,"_l10nResizer",null),et(Mt,"_borderLineWidth",-1),et(Mt,"_colorManager",new I0),et(Mt,"_zIndex",1),et(Mt,"_telemetryTimeout",1e3);let oe=Mt;class mL extends oe{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const W1=3285377520,Tn=4294901760,ds=65535;class FT{constructor(t){this.h1=t?t&4294967295:W1,this.h2=t?t&4294967295:W1}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let w=0,T=t.length;w<T;w++){const R=t.charCodeAt(w);R<=255?e[n++]=R:(e[n++]=R>>>8,e[n++]=R&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=n>>2,l=n-a*4,o=new Uint32Array(e.buffer,0,a);let d=0,f=0,p=this.h1,m=this.h2;const b=3432918353,v=461845907,A=b&ds,E=v&ds;for(let w=0;w<a;w++)w&1?(d=o[w],d=d*b&Tn|d*A&ds,d=d<<15|d>>>17,d=d*v&Tn|d*E&ds,p^=d,p=p<<13|p>>>19,p=p*5+3864292196):(f=o[w],f=f*b&Tn|f*A&ds,f=f<<15|f>>>17,f=f*v&Tn|f*E&ds,m^=f,m=m<<13|m>>>19,m=m*5+3864292196);switch(d=0,l){case 3:d^=e[a*4+2]<<16;case 2:d^=e[a*4+1]<<8;case 1:d^=e[a*4],d=d*b&Tn|d*A&ds,d=d<<15|d>>>17,d=d*v&Tn|d*E&ds,a&1?p^=d:m^=d}this.h1=p,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Tn|t*36045&ds,e=e*4283543511&Tn|((e<<16|t>>>16)*2950163797&Tn)>>>16,t^=e>>>1,t=t*444984403&Tn|t*60499&ds,e=e*3301882366&Tn|((e<<16|t>>>16)*3120437893&Tn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const ev=Object.freeze({map:null,hash:"",transfer:void 0});var Ul,Fl,ii,Em,IT;class pA{constructor(){x(this,Em);x(this,Ul,!1);x(this,Fl,null);x(this,ii,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=u(this,ii).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return u(this,ii).get(t)}remove(t){if(u(this,ii).delete(t),u(this,ii).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of u(this,ii).values())if(e instanceof oe)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=u(this,ii).get(t);let a=!1;if(n!==void 0)for(const[l,o]of Object.entries(e))n[l]!==o&&(a=!0,n[l]=o);else a=!0,u(this,ii).set(t,e);a&&C(this,Em,IT).call(this),e instanceof oe&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return u(this,ii).has(t)}get size(){return u(this,ii).size}resetModified(){u(this,Ul)&&(S(this,Ul,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new jT(this)}get serializable(){if(u(this,ii).size===0)return ev;const t=new Map,e=new FT,n=[],a=Object.create(null);let l=!1;for(const[o,d]of u(this,ii)){const f=d instanceof oe?d.serialize(!1,a):d;f&&(t.set(o,f),e.update(`${o}:${JSON.stringify(f)}`),l||(l=!!f.bitmap))}if(l)for(const o of t.values())o.bitmap&&n.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:ev}get editorStats(){let t=null;const e=new Map;for(const n of u(this,ii).values()){if(!(n instanceof oe))continue;const a=n.telemetryFinalData;if(!a)continue;const{type:l}=a;e.has(l)||e.set(l,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const o=t[l]||(t[l]=new Map);for(const[d,f]of Object.entries(a)){if(d==="type")continue;let p=o.get(d);p||(p=new Map,o.set(d,p));const m=p.get(f)??0;p.set(f,m+1)}}for(const[n,a]of e)t[n]=a.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){S(this,Fl,null)}get modifiedIds(){if(u(this,Fl))return u(this,Fl);const t=[];for(const e of u(this,ii).values())!(e instanceof oe)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return S(this,Fl,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return u(this,ii).entries()}}Ul=new WeakMap,Fl=new WeakMap,ii=new WeakMap,Em=new WeakSet,IT=function(){u(this,Ul)||(S(this,Ul,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var jd;class jT extends pA{constructor(e){super();x(this,jd);const{map:n,hash:a,transfer:l}=e.serializable,o=structuredClone(n,l?{transfer:l}:null);S(this,jd,{map:o,hash:a,transfer:l})}get print(){ne("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,jd)}get modifiedIds(){return Bt(this,"modifiedIds",{ids:new Set,hash:""})}}jd=new WeakMap;var $c;class yL{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){x(this,$c,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),u(this,$c).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||u(this,$c).has(t.loadedName))){if(Le(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:l,style:o}=t,d=new FontFace(a,l,o);this.addNativeFontFace(d);try{await d.load(),u(this,$c).add(a),n==null||n(t)}catch{_t(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(d)}return}ne("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(a){throw _t(`Failed to load font '${n.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const a=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Bt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Bt(this,"isSyncFontLoadingSupported",xi||oi.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Le(!a.done,"completeRequest() cannot be called twice."),a.done=!0;n.length>0&&n[0].done;){const l=n.shift();setTimeout(l.callback,0)}}const{loadingRequests:n}=this,a={done:!1,complete:e,callback:t};return n.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Bt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(k,L){return k.charCodeAt(L)<<24|k.charCodeAt(L+1)<<16|k.charCodeAt(L+2)<<8|k.charCodeAt(L+3)&255}function a(k,L,U,F){const W=k.substring(0,L),J=k.substring(L+U);return W+F+J}let l,o;const d=this._document.createElement("canvas");d.width=1,d.height=1;const f=d.getContext("2d");let p=0;function m(k,L){if(++p>30){_t("Load test font never loaded."),L();return}if(f.font="30px "+k,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(m.bind(null,k,L))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=a(v,976,b.length,b);const E=16,w=1482184792;let T=n(v,E);for(l=0,o=b.length-3;l<o;l+=4)T=T-w+n(b,l)|0;l<b.length&&(T=T-w+n(b+"XXX",l)|0),v=a(v,E,4,iL(T));const R=`url(data:font/opentype;base64,${btoa(v)});`,O=`@font-face {font-family:"${b}";src:${R}}`;this.insertRule(O);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const k of[t.loadedName,b]){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=k,D.append(L)}this._document.body.append(D),m(b,()=>{D.remove(),e.complete()})}}$c=new WeakMap;class bL{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${cT(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let a;try{a=t.get(n)}catch(o){_t(`getPathGenerator - ignoring character: "${o}".`)}const l=new Path2D(a||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=l}}const mg={DATA:1,ERROR:2},Me={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Q1(){}function ki(h){if(h instanceof Xr||h instanceof B0||h instanceof Y1||h instanceof om||h instanceof A0)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||ne('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new Xr(h.message);case"InvalidPDFException":return new B0(h.message);case"PasswordException":return new Y1(h.message,h.code);case"ResponseException":return new om(h.message,h.status,h.missing);case"UnknownErrorException":return new A0(h.message,h.details)}return new A0(h.message,h.toString())}var Kc,Pn,GT,qT,VT,Bg;class ed{constructor(t,e,n){x(this,Pn);x(this,Kc,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",C(this,Pn,GT).bind(this),{signal:u(this,Kc).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const a=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[a]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},n)}catch(o){l.reject(o)}return l.promise}sendWithStream(t,e,n,a){const l=this.streamId++,o=this.sourceName,d=this.targetName,f=this.comObj;return new ReadableStream({start:p=>{const m=Promise.withResolvers();return this.streamControllers[l]={controller:p,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:o,targetName:d,action:t,streamId:l,data:e,desiredSize:p.desiredSize},a),m.promise},pull:p=>{const m=Promise.withResolvers();return this.streamControllers[l].pullCall=m,f.postMessage({sourceName:o,targetName:d,stream:Me.PULL,streamId:l,desiredSize:p.desiredSize}),m.promise},cancel:p=>{Le(p instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[l].cancelCall=m,this.streamControllers[l].isClosed=!0,f.postMessage({sourceName:o,targetName:d,stream:Me.CANCEL,streamId:l,reason:ki(p)}),m.promise}},n)}destroy(){var t;(t=u(this,Kc))==null||t.abort(),S(this,Kc,null)}}Kc=new WeakMap,Pn=new WeakSet,GT=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){C(this,Pn,VT).call(this,t);return}if(t.callback){const n=t.callbackId,a=this.callbackCapabilities[n];if(!a)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===mg.DATA)a.resolve(t.data);else if(t.callback===mg.ERROR)a.reject(ki(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,a=t.sourceName,l=this.comObj;Promise.try(e,t.data).then(function(o){l.postMessage({sourceName:n,targetName:a,callback:mg.DATA,callbackId:t.callbackId,data:o})},function(o){l.postMessage({sourceName:n,targetName:a,callback:mg.ERROR,callbackId:t.callbackId,reason:ki(o)})});return}if(t.streamId){C(this,Pn,qT).call(this,t);return}e(t.data)},qT=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,l=this.comObj,o=this,d=this.actionHandler[t.action],f={enqueue(p,m=1,b){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:n,targetName:a,stream:Me.ENQUEUE,streamId:e,chunk:p},b)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:n,targetName:a,stream:Me.CLOSE,streamId:e}),delete o.streamSinks[e])},error(p){Le(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:n,targetName:a,stream:Me.ERROR,streamId:e,reason:ki(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[e]=f,Promise.try(d,t.data,f).then(function(){l.postMessage({sourceName:n,targetName:a,stream:Me.START_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:n,targetName:a,stream:Me.START_COMPLETE,streamId:e,reason:ki(p)})})},VT=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,l=this.comObj,o=this.streamControllers[e],d=this.streamSinks[e];switch(t.stream){case Me.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(ki(t.reason));break;case Me.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(ki(t.reason));break;case Me.PULL:if(!d){l.postMessage({sourceName:n,targetName:a,stream:Me.PULL_COMPLETE,streamId:e,success:!0});break}d.desiredSize<=0&&t.desiredSize>0&&d.sinkCapability.resolve(),d.desiredSize=t.desiredSize,Promise.try(d.onPull||Q1).then(function(){l.postMessage({sourceName:n,targetName:a,stream:Me.PULL_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:n,targetName:a,stream:Me.PULL_COMPLETE,streamId:e,reason:ki(p)})});break;case Me.ENQUEUE:if(Le(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Me.CLOSE:if(Le(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),C(this,Pn,Bg).call(this,o,e);break;case Me.ERROR:Le(o,"error should have stream controller"),o.controller.error(ki(t.reason)),C(this,Pn,Bg).call(this,o,e);break;case Me.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(ki(t.reason)),C(this,Pn,Bg).call(this,o,e);break;case Me.CANCEL:if(!d)break;const f=ki(t.reason);Promise.try(d.onCancel||Q1,f).then(function(){l.postMessage({sourceName:n,targetName:a,stream:Me.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:n,targetName:a,stream:Me.CANCEL_COMPLETE,streamId:e,reason:ki(p)})}),d.sinkCapability.reject(f),d.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Bg=async function(t,e){var n,a,l;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(a=t.pullCall)==null?void 0:a.promise,(l=t.cancelCall)==null?void 0:l.promise]),delete this.streamControllers[e]};var Gd;class XT{constructor({enableHWA:t=!1}){x(this,Gd,!1);S(this,Gd,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!u(this,Gd)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ne("Abstract method `_createCanvas` called.")}}Gd=new WeakMap;class vL extends XT{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class YT{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){ne("Abstract method `_fetch` called.")}}class Z1 extends YT{async _fetch(t){const e=await $f(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Yf(e)}}class $T{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,a,l){return"none"}destroy(t=!1){}}var Il,Wc,ca,ua,gi,jl,Gl,rt,fi,id,Ec,zg,wc,KT,iv,_c,nd,sd,nv,ad;class AL extends $T{constructor({docId:e,ownerDocument:n=globalThis.document}){super();x(this,rt);x(this,Il);x(this,Wc);x(this,ca);x(this,ua);x(this,gi);x(this,jl);x(this,Gl,0);S(this,ua,e),S(this,gi,n)}addFilter(e){if(!e)return"none";let n=u(this,rt,fi).get(e);if(n)return n;const[a,l,o]=C(this,rt,zg).call(this,e),d=e.length===1?a:`${a}${l}${o}`;if(n=u(this,rt,fi).get(d),n)return u(this,rt,fi).set(e,n),n;const f=`g_${u(this,ua)}_transfer_map_${Ai(this,Gl)._++}`,p=C(this,rt,wc).call(this,f);u(this,rt,fi).set(e,p),u(this,rt,fi).set(d,p);const m=C(this,rt,_c).call(this,f);return C(this,rt,sd).call(this,a,l,o,m),p}addHCMFilter(e,n){var E;const a=`${e}-${n}`,l="base";let o=u(this,rt,id).get(l);if((o==null?void 0:o.key)===a||(o?((E=o.filter)==null||E.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},u(this,rt,id).set(l,o)),!e||!n))return o.url;const d=C(this,rt,ad).call(this,e);e=ht.makeHexColor(...d);const f=C(this,rt,ad).call(this,n);if(n=ht.makeHexColor(...f),u(this,rt,Ec).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return o.url;const p=new Array(256);for(let w=0;w<=255;w++){const T=w/255;p[w]=T<=.03928?T/12.92:((T+.055)/1.055)**2.4}const m=p.join(","),b=`g_${u(this,ua)}_hcm_filter`,v=o.filter=C(this,rt,_c).call(this,b);C(this,rt,sd).call(this,m,m,m,v),C(this,rt,iv).call(this,v);const A=(w,T)=>{const R=d[w]/255,O=f[w]/255,D=new Array(T+1);for(let k=0;k<=T;k++)D[k]=R+k/T*(O-R);return D.join(",")};return C(this,rt,sd).call(this,A(0,5),A(1,5),A(2,5),v),o.url=C(this,rt,wc).call(this,b),o.url}addAlphaFilter(e){let n=u(this,rt,fi).get(e);if(n)return n;const[a]=C(this,rt,zg).call(this,[e]),l=`alpha_${a}`;if(n=u(this,rt,fi).get(l),n)return u(this,rt,fi).set(e,n),n;const o=`g_${u(this,ua)}_alpha_map_${Ai(this,Gl)._++}`,d=C(this,rt,wc).call(this,o);u(this,rt,fi).set(e,d),u(this,rt,fi).set(l,d);const f=C(this,rt,_c).call(this,o);return C(this,rt,nv).call(this,a,f),d}addLuminosityFilter(e){let n=u(this,rt,fi).get(e||"luminosity");if(n)return n;let a,l;if(e?([a]=C(this,rt,zg).call(this,[e]),l=`luminosity_${a}`):l="luminosity",n=u(this,rt,fi).get(l),n)return u(this,rt,fi).set(e,n),n;const o=`g_${u(this,ua)}_luminosity_map_${Ai(this,Gl)._++}`,d=C(this,rt,wc).call(this,o);u(this,rt,fi).set(e,d),u(this,rt,fi).set(l,d);const f=C(this,rt,_c).call(this,o);return C(this,rt,KT).call(this,f),e&&C(this,rt,nv).call(this,a,f),d}addHighlightHCMFilter(e,n,a,l,o){var O;const d=`${n}-${a}-${l}-${o}`;let f=u(this,rt,id).get(e);if((f==null?void 0:f.key)===d||(f?((O=f.filter)==null||O.remove(),f.key=d,f.url="none",f.filter=null):(f={key:d,url:"none",filter:null},u(this,rt,id).set(e,f)),!n||!a))return f.url;const[p,m]=[n,a].map(C(this,rt,ad).bind(this));let b=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),v=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[A,E]=[l,o].map(C(this,rt,ad).bind(this));v<b&&([b,v,A,E]=[v,b,E,A]),u(this,rt,Ec).style.color="";const w=(D,k,L)=>{const U=new Array(256),F=(v-b)/L,W=D/255,J=(k-D)/(255*L);let nt=0;for(let st=0;st<=L;st++){const St=Math.round(b+st*F),zt=W+st*J;for(let Et=nt;Et<=St;Et++)U[Et]=zt;nt=St+1}for(let st=nt;st<256;st++)U[st]=U[nt-1];return U.join(",")},T=`g_${u(this,ua)}_hcm_${e}_filter`,R=f.filter=C(this,rt,_c).call(this,T);return C(this,rt,iv).call(this,R),C(this,rt,sd).call(this,w(A[0],E[0],5),w(A[1],E[1],5),w(A[2],E[2],5),R),f.url=C(this,rt,wc).call(this,T),f.url}destroy(e=!1){var n,a,l,o;e&&((n=u(this,jl))!=null&&n.size)||((a=u(this,ca))==null||a.parentNode.parentNode.remove(),S(this,ca,null),(l=u(this,Wc))==null||l.clear(),S(this,Wc,null),(o=u(this,jl))==null||o.clear(),S(this,jl,null),S(this,Gl,0))}}Il=new WeakMap,Wc=new WeakMap,ca=new WeakMap,ua=new WeakMap,gi=new WeakMap,jl=new WeakMap,Gl=new WeakMap,rt=new WeakSet,fi=function(){return u(this,Wc)||S(this,Wc,new Map)},id=function(){return u(this,jl)||S(this,jl,new Map)},Ec=function(){if(!u(this,ca)){const e=u(this,gi).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const a=u(this,gi).createElementNS(Ks,"svg");a.setAttribute("width",0),a.setAttribute("height",0),S(this,ca,u(this,gi).createElementNS(Ks,"defs")),e.append(a),a.append(u(this,ca)),u(this,gi).body.append(e)}return u(this,ca)},zg=function(e){if(e.length===1){const p=e[0],m=new Array(256);for(let v=0;v<256;v++)m[v]=p[v]/255;const b=m.join(",");return[b,b,b]}const[n,a,l]=e,o=new Array(256),d=new Array(256),f=new Array(256);for(let p=0;p<256;p++)o[p]=n[p]/255,d[p]=a[p]/255,f[p]=l[p]/255;return[o.join(","),d.join(","),f.join(",")]},wc=function(e){if(u(this,Il)===void 0){S(this,Il,"");const n=u(this,gi).URL;n!==u(this,gi).baseURI&&(Ym(n)?_t('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,Il,rT(n,"")))}return`url(${u(this,Il)}#${e})`},KT=function(e){const n=u(this,gi).createElementNS(Ks,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},iv=function(e){const n=u(this,gi).createElementNS(Ks,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},_c=function(e){const n=u(this,gi).createElementNS(Ks,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),u(this,rt,Ec).append(n),n},nd=function(e,n,a){const l=u(this,gi).createElementNS(Ks,n);l.setAttribute("type","discrete"),l.setAttribute("tableValues",a),e.append(l)},sd=function(e,n,a,l){const o=u(this,gi).createElementNS(Ks,"feComponentTransfer");l.append(o),C(this,rt,nd).call(this,o,"feFuncR",e),C(this,rt,nd).call(this,o,"feFuncG",n),C(this,rt,nd).call(this,o,"feFuncB",a)},nv=function(e,n){const a=u(this,gi).createElementNS(Ks,"feComponentTransfer");n.append(a),C(this,rt,nd).call(this,a,"feFuncA",e)},ad=function(e){return u(this,rt,Ec).style.color=e,dA(getComputedStyle(u(this,rt,Ec)).getPropertyValue("color"))};class WT{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){ne("Abstract method `_fetch` called.")}}class J1 extends WT{async _fetch(t){const e=await $f(t,"arraybuffer");return new Uint8Array(e)}}class QT{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){ne("Abstract method `_fetch` called.")}}class t_ extends QT{async _fetch(t){const e=await $f(t,"arraybuffer");return new Uint8Array(e)}}xi&&_t("Please use the `legacy` build in Node.js environments.");async function gA(h){const e=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(e)}class SL extends $T{}class EL extends XT{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class wL extends YT{async _fetch(t){return gA(t)}}class _L extends WT{async _fetch(t){return gA(t)}}class TL extends QT{async _fetch(t){return gA(t)}}const ai={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function sv(h,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,n),h.clip(a)}class mA{isModifyingCurrentTransform(){return!1}getPattern(){ne("Abstract method `getPattern` called.")}}class xL extends mA{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,a){let l;if(a===ai.STROKE||a===ai.FILL){const o=e.current.getClippedPathBoundingBox(a,me(t))||[0,0,0,0],d=Math.ceil(o[2]-o[0])||1,f=Math.ceil(o[3]-o[1])||1,p=e.cachedCanvases.getCanvas("pattern",d,f),m=p.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-o[0],-o[1]),n=ht.transform(n,[1,0,0,1,o[0],o[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),sv(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),l=t.createPattern(p.canvas,"no-repeat");const b=new DOMMatrix(n);l.setTransform(b)}else sv(t,this._bbox),l=this._createGradient(t);return l}}function w0(h,t,e,n,a,l,o,d){const f=t.coords,p=t.colors,m=h.data,b=h.width*4;let v;f[e+1]>f[n+1]&&(v=e,e=n,n=v,v=l,l=o,o=v),f[n+1]>f[a+1]&&(v=n,n=a,a=v,v=o,o=d,d=v),f[e+1]>f[n+1]&&(v=e,e=n,n=v,v=l,l=o,o=v);const A=(f[e]+t.offsetX)*t.scaleX,E=(f[e+1]+t.offsetY)*t.scaleY,w=(f[n]+t.offsetX)*t.scaleX,T=(f[n+1]+t.offsetY)*t.scaleY,R=(f[a]+t.offsetX)*t.scaleX,O=(f[a+1]+t.offsetY)*t.scaleY;if(E>=O)return;const D=p[l],k=p[l+1],L=p[l+2],U=p[o],F=p[o+1],W=p[o+2],J=p[d],nt=p[d+1],st=p[d+2],St=Math.round(E),zt=Math.round(O);let Et,Gt,z,X,ut,Nt,P,Q;for(let it=St;it<=zt;it++){if(it<T){const Ht=it<E?0:(E-it)/(E-T);Et=A-(A-w)*Ht,Gt=D-(D-U)*Ht,z=k-(k-F)*Ht,X=L-(L-W)*Ht}else{let Ht;it>O?Ht=1:T===O?Ht=0:Ht=(T-it)/(T-O),Et=w-(w-R)*Ht,Gt=U-(U-J)*Ht,z=F-(F-nt)*Ht,X=W-(W-st)*Ht}let tt;it<E?tt=0:it>O?tt=1:tt=(E-it)/(E-O),ut=A-(A-R)*tt,Nt=D-(D-J)*tt,P=k-(k-nt)*tt,Q=L-(L-st)*tt;const ft=Math.round(Math.min(Et,ut)),Ct=Math.round(Math.max(Et,ut));let mt=b*it+ft*4;for(let Ht=ft;Ht<=Ct;Ht++)tt=(Et-Ht)/(Et-ut),tt<0?tt=0:tt>1&&(tt=1),m[mt++]=Gt-(Gt-Nt)*tt|0,m[mt++]=z-(z-P)*tt|0,m[mt++]=X-(X-Q)*tt|0,m[mt++]=255}}function CL(h,t,e){const n=t.coords,a=t.colors;let l,o;switch(t.type){case"lattice":const d=t.verticesPerRow,f=Math.floor(n.length/d)-1,p=d-1;for(l=0;l<f;l++){let m=l*d;for(let b=0;b<p;b++,m++)w0(h,e,n[m],n[m+1],n[m+d],a[m],a[m+1],a[m+d]),w0(h,e,n[m+d+1],n[m+1],n[m+d],a[m+d+1],a[m+1],a[m+d])}break;case"triangles":for(l=0,o=n.length;l<o;l+=3)w0(h,e,n[l],n[l+1],n[l+2],a[l],a[l+1],a[l+2]);break;default:throw new Error("illegal figure")}}class RL extends mA{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const d=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-d,m=Math.ceil(this._bounds[3])-f,b=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),A=p/b,E=m/v,w={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-f,scaleX:1/A,scaleY:1/E},T=b+2*2,R=v+2*2,O=n.getCanvas("mesh",T,R),D=O.context,k=D.createImageData(b,v);if(e){const U=k.data;for(let F=0,W=U.length;F<W;F+=4)U[F]=e[0],U[F+1]=e[1],U[F+2]=e[2],U[F+3]=255}for(const U of this._figures)CL(k,U,w);return D.putImageData(k,2,2),{canvas:O.canvas,offsetX:d-2*A,offsetY:f-2*E,scaleX:A,scaleY:E}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,a){sv(t,this._bbox);const l=new Float32Array(2);if(a===ai.SHADING)ht.singularValueDecompose2dScale(me(t),l);else if(this.matrix){ht.singularValueDecompose2dScale(this.matrix,l);const[d,f]=l;ht.singularValueDecompose2dScale(e.baseTransform,l),l[0]*=d,l[1]*=f}else ht.singularValueDecompose2dScale(e.baseTransform,l);const o=this._createMeshCanvas(l,a===ai.SHADING?null:this._background,e.cachedCanvases);return a!==ai.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class ML extends mA{getPattern(){return"hotpink"}}function DL(h){switch(h[0]){case"RadialAxial":return new xL(h);case"Mesh":return new RL(h);case"Dummy":return new ML}throw new Error(`Unknown IR type: ${h[0]}`)}const e_={COLORED:1,UNCOLORED:2},wm=class wm{constructor(t,e,n,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=a}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:a,tilingType:l,color:o,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),Xm("TilingType: "+l);const m=e[0],b=e[1],v=e[2],A=e[3],E=v-m,w=A-b,T=new Float32Array(2);ht.singularValueDecompose2dScale(this.matrix,T);const[R,O]=T;ht.singularValueDecompose2dScale(this.baseTransform,T);const D=R*T[0],k=O*T[1];let L=E,U=w,F=!1,W=!1;const J=Math.ceil(f*D),nt=Math.ceil(p*k),st=Math.ceil(E*D),St=Math.ceil(w*k);J>=st?L=f:F=!0,nt>=St?U=p:W=!0;const zt=this.getSizeAndScale(L,this.ctx.canvas.width,D),Et=this.getSizeAndScale(U,this.ctx.canvas.height,k),Gt=t.cachedCanvases.getCanvas("pattern",zt.size,Et.size),z=Gt.context,X=d.createCanvasGraphics(z);if(X.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(X,a,o),z.translate(-zt.scale*m,-Et.scale*b),X.transform(zt.scale,0,0,Et.scale,0,0),z.save(),this.clipBbox(X,m,b,v,A),X.baseTransform=me(X.ctx),X.executeOperatorList(n),X.endDrawing(),z.restore(),F||W){const ut=Gt.canvas;F&&(L=f),W&&(U=p);const Nt=this.getSizeAndScale(L,this.ctx.canvas.width,D),P=this.getSizeAndScale(U,this.ctx.canvas.height,k),Q=Nt.size,it=P.size,tt=t.cachedCanvases.getCanvas("pattern-workaround",Q,it),ft=tt.context,Ct=F?Math.floor(E/f):0,mt=W?Math.floor(w/p):0;for(let Ht=0;Ht<=Ct;Ht++)for(let Yt=0;Yt<=mt;Yt++)ft.drawImage(ut,Q*Ht,it*Yt,Q,it,0,0,Q,it);return{canvas:tt.canvas,scaleX:Nt.scale,scaleY:P.scale,offsetX:m,offsetY:b}}return{canvas:Gt.canvas,scaleX:zt.scale,scaleY:Et.scale,offsetX:m,offsetY:b}}getSizeAndScale(t,e,n){const a=Math.max(wm.MAX_PATTERN_SIZE,e);let l=Math.ceil(t*n);return l>=a?l=a:n=l/t,{scale:n,size:l}}clipBbox(t,e,n,a,l){const o=a-e,d=l-n;t.ctx.rect(e,n,o,d),ht.axialAlignedBoundingBox([e,n,a,l],me(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const a=t.ctx,l=t.current;switch(e){case e_.COLORED:const o=this.ctx;a.fillStyle=o.fillStyle,a.strokeStyle=o.strokeStyle,l.fillColor=o.fillStyle,l.strokeColor=o.strokeStyle;break;case e_.UNCOLORED:const d=ht.makeHexColor(n[0],n[1],n[2]);a.fillStyle=d,a.strokeStyle=d,l.fillColor=d,l.strokeColor=d;break;default:throw new eL(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,a){let l=n;a!==ai.SHADING&&(l=ht.transform(l,e.baseTransform),this.matrix&&(l=ht.transform(l,this.matrix)));const o=this.createPatternCanvas(e);let d=new DOMMatrix(l);d=d.translate(o.offsetX,o.offsetY),d=d.scale(1/o.scaleX,1/o.scaleY);const f=t.createPattern(o.canvas,"repeat");return f.setTransform(d),f}};et(wm,"MAX_PATTERN_SIZE",3e3);let av=wm;function OL({src:h,srcPos:t=0,dest:e,width:n,height:a,nonBlackColor:l=4294967295,inverseDecode:o=!1}){const d=oi.isLittleEndian?4278190080:255,[f,p]=o?[l,d]:[d,l],m=n>>3,b=n&7,v=h.length;e=new Uint32Array(e.buffer);let A=0;for(let E=0;E<a;E++){for(const T=t+m;t<T;t++){const R=t<v?h[t]:255;e[A++]=R&128?p:f,e[A++]=R&64?p:f,e[A++]=R&32?p:f,e[A++]=R&16?p:f,e[A++]=R&8?p:f,e[A++]=R&4?p:f,e[A++]=R&2?p:f,e[A++]=R&1?p:f}if(b===0)continue;const w=t<v?h[t++]:255;for(let T=0;T<b;T++)e[A++]=w&1<<7-T?p:f}return{srcPos:t,destPos:A}}const i_=16,n_=100,LL=15,s_=10,Ui=16,_0=new DOMMatrix,fn=new Float32Array(2),Rc=new Float32Array([1/0,1/0,-1/0,-1/0]);function NL(h,t){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){t.save(),this.__originalSave()},h.restore=function(){t.restore(),this.__originalRestore()},h.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},h.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},h.transform=function(e,n,a,l,o,d){t.transform(e,n,a,l,o,d),this.__originalTransform(e,n,a,l,o,d)},h.setTransform=function(e,n,a,l,o,d){t.setTransform(e,n,a,l,o,d),this.__originalSetTransform(e,n,a,l,o,d)},h.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},h.rotate=function(e){t.rotate(e),this.__originalRotate(e)},h.clip=function(e){t.clip(e),this.__originalClip(e)},h.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},h.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},h.bezierCurveTo=function(e,n,a,l,o,d){t.bezierCurveTo(e,n,a,l,o,d),this.__originalBezierCurveTo(e,n,a,l,o,d)},h.rect=function(e,n,a,l){t.rect(e,n,a,l),this.__originalRect(e,n,a,l)},h.closePath=function(){t.closePath(),this.__originalClosePath()},h.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class kL{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,n)):(a=this.canvasFactory.create(e,n),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function yg(h,t,e,n,a,l,o,d,f,p){const[m,b,v,A,E,w]=me(h);if(b===0&&v===0){const O=o*m+E,D=Math.round(O),k=d*A+w,L=Math.round(k),U=(o+f)*m+E,F=Math.abs(Math.round(U)-D)||1,W=(d+p)*A+w,J=Math.abs(Math.round(W)-L)||1;return h.setTransform(Math.sign(m),0,0,Math.sign(A),D,L),h.drawImage(t,e,n,a,l,0,0,F,J),h.setTransform(m,b,v,A,E,w),[F,J]}if(m===0&&A===0){const O=d*v+E,D=Math.round(O),k=o*b+w,L=Math.round(k),U=(d+p)*v+E,F=Math.abs(Math.round(U)-D)||1,W=(o+f)*b+w,J=Math.abs(Math.round(W)-L)||1;return h.setTransform(0,Math.sign(b),Math.sign(v),0,D,L),h.drawImage(t,e,n,a,l,0,0,J,F),h.setTransform(m,b,v,A,E,w),[J,F]}h.drawImage(t,e,n,a,l,o,d,f,p);const T=Math.hypot(m,b),R=Math.hypot(v,A);return[T*f,R*p]}class a_{constructor(t,e){et(this,"alphaIsShape",!1);et(this,"fontSize",0);et(this,"fontSizeScale",1);et(this,"textMatrix",null);et(this,"textMatrixScale",1);et(this,"fontMatrix",P0);et(this,"leading",0);et(this,"x",0);et(this,"y",0);et(this,"lineX",0);et(this,"lineY",0);et(this,"charSpacing",0);et(this,"wordSpacing",0);et(this,"textHScale",1);et(this,"textRenderingMode",di.FILL);et(this,"textRise",0);et(this,"fillColor","#000000");et(this,"strokeColor","#000000");et(this,"patternFill",!1);et(this,"patternStroke",!1);et(this,"fillAlpha",1);et(this,"strokeAlpha",1);et(this,"lineWidth",1);et(this,"activeSMask",null);et(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Rc.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=ai.FILL,e=null){const n=this.minMax.slice();if(t===ai.STROKE){e||ne("Stroke bounding box must include transform."),ht.singularValueDecompose2dScale(e,fn);const a=fn[0]*this.lineWidth/2,l=fn[1]*this.lineWidth/2;n[0]-=a,n[1]-=l,n[2]+=a,n[3]+=l}return n}updateClipFromPath(){const t=ht.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Rc,0)}getClippedPathBoundingBox(t=ai.FILL,e=null){return ht.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function r_(h,t){if(t instanceof ImageData){h.putImageData(t,0,0);return}const e=t.height,n=t.width,a=e%Ui,l=(e-a)/Ui,o=a===0?l:l+1,d=h.createImageData(n,Ui);let f=0,p;const m=t.data,b=d.data;let v,A,E,w;if(t.kind===Cg.GRAYSCALE_1BPP){const T=m.byteLength,R=new Uint32Array(b.buffer,0,b.byteLength>>2),O=R.length,D=n+7>>3,k=4294967295,L=oi.isLittleEndian?4278190080:255;for(v=0;v<o;v++){for(E=v<l?Ui:a,p=0,A=0;A<E;A++){const U=T-f;let F=0;const W=U>D?n:U*8-7,J=W&-8;let nt=0,st=0;for(;F<J;F+=8)st=m[f++],R[p++]=st&128?k:L,R[p++]=st&64?k:L,R[p++]=st&32?k:L,R[p++]=st&16?k:L,R[p++]=st&8?k:L,R[p++]=st&4?k:L,R[p++]=st&2?k:L,R[p++]=st&1?k:L;for(;F<W;F++)nt===0&&(st=m[f++],nt=128),R[p++]=st&nt?k:L,nt>>=1}for(;p<O;)R[p++]=0;h.putImageData(d,0,v*Ui)}}else if(t.kind===Cg.RGBA_32BPP){for(A=0,w=n*Ui*4,v=0;v<l;v++)b.set(m.subarray(f,f+w)),f+=w,h.putImageData(d,0,A),A+=Ui;v<o&&(w=n*a*4,b.set(m.subarray(f,f+w)),h.putImageData(d,0,A))}else if(t.kind===Cg.RGB_24BPP)for(E=Ui,w=n*E,v=0;v<o;v++){for(v>=l&&(E=a,w=n*E),p=0,A=w;A--;)b[p++]=m[f++],b[p++]=m[f++],b[p++]=m[f++],b[p++]=255;h.putImageData(d,0,v*Ui)}else throw new Error(`bad image kind: ${t.kind}`)}function l_(h,t){if(t.bitmap){h.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,a=e%Ui,l=(e-a)/Ui,o=a===0?l:l+1,d=h.createImageData(n,Ui);let f=0;const p=t.data,m=d.data;for(let b=0;b<o;b++){const v=b<l?Ui:a;({srcPos:f}=OL({src:p,srcPos:f,dest:m,width:n,height:v,nonBlackColor:0})),h.putImageData(d,0,b*Ui)}}function Yh(h,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)h[n]!==void 0&&(t[n]=h[n]);h.setLineDash!==void 0&&(t.setLineDash(h.getLineDash()),t.lineDashOffset=h.lineDashOffset)}function bg(h){h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0);const{filter:t}=h;t!=="none"&&t!==""&&(h.filter="none")}function o_(h,t){if(t)return!0;ht.singularValueDecompose2dScale(h,fn);const e=Math.fround(ka.pixelRatio*Yr.PDF_TO_CSS_UNITS);return fn[0]<=e&&fn[1]<=e}const PL=["butt","round","square"],BL=["miter","round","bevel"],zL={},c_={};var ts,rv,lv,ov;const EA=class EA{constructor(t,e,n,a,l,{optionalContentConfig:o,markedContentStack:d=null},f,p){x(this,ts);this.ctx=t,this.current=new a_(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=a,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=o,this.cachedCanvases=new kL(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:a=null}){const l=this.ctx.canvas.width,o=this.ctx.canvas.height,d=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,l,o),this.ctx.fillStyle=d,n){const f=this.cachedCanvases.getCanvas("transparent",l,o);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...me(this.compositeCtx))}this.ctx.save(),bg(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=me(this.ctx)}executeOperatorList(t,e,n,a){const l=t.argsArray,o=t.fnArray;let d=e||0;const f=l.length;if(f===d)return d;const p=f-d>s_&&typeof n=="function",m=p?Date.now()+LL:0;let b=0;const v=this.commonObjs,A=this.objs;let E;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,n),d;if(E=o[d],E!==lm.dependency)this[E].apply(this,l[d]);else for(const w of l[d]){const T=w.startsWith("g_")?v:A;if(!T.has(w))return T.get(w,n),d}if(d++,d===f)return d;if(p&&++b>s_){if(Date.now()>m)return n(),d;b=0}}}endDrawing(){C(this,ts,rv).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),C(this,ts,lv).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,a=t.height??t.displayHeight;let l=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),d=n,f=a,p="prescale1",m,b;for(;l>2&&d>1||o>2&&f>1;){let v=d,A=f;l>2&&d>1&&(v=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),l/=d/v),o>2&&f>1&&(A=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,o/=f/A),m=this.cachedCanvases.getCanvas(p,v,A),b=m.context,b.clearRect(0,0,v,A),b.drawImage(t,0,0,d,f,0,0,v,A),t=m.canvas,d=v,f=A,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:d,paintHeight:f}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:a}=t,l=this.current.fillColor,o=this.current.patternFill,d=me(e);let f,p,m,b;if((t.bitmap||t.data)&&t.count>1){const J=t.bitmap||t.data.buffer;p=JSON.stringify(o?d:[d.slice(0,4),l]),f=this._cachedBitmapsMap.get(J),f||(f=new Map,this._cachedBitmapsMap.set(J,f));const nt=f.get(p);if(nt&&!o){const st=Math.round(Math.min(d[0],d[2])+d[4]),St=Math.round(Math.min(d[1],d[3])+d[5]);return{canvas:nt,offsetX:st,offsetY:St}}m=nt}m||(b=this.cachedCanvases.getCanvas("maskCanvas",n,a),l_(b.context,t));let v=ht.transform(d,[1/n,0,0,-1/a,0,0]);v=ht.transform(v,[1,0,0,1,0,-a]);const A=Rc.slice();ht.axialAlignedBoundingBox([0,0,n,a],v,A);const[E,w,T,R]=A,O=Math.round(T-E)||1,D=Math.round(R-w)||1,k=this.cachedCanvases.getCanvas("fillCanvas",O,D),L=k.context,U=E,F=w;L.translate(-U,-F),L.transform(...v),m||(m=this._scaleImage(b.canvas,hs(L)),m=m.img,f&&o&&f.set(p,m)),L.imageSmoothingEnabled=o_(me(L),t.interpolate),yg(L,m,0,0,m.width,m.height,0,0,n,a),L.globalCompositeOperation="source-in";const W=ht.transform(hs(L),[1,0,0,1,-U,-F]);return L.fillStyle=o?l.getPattern(e,this,W,ai.FILL):l,L.fillRect(0,0,n,a),f&&!o&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,k.canvas)),{canvas:k.canvas,offsetX:Math.round(U),offsetY:Math.round(F)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=PL[t]}setLineJoin(t){this.ctx.lineJoin=BL[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx;const l=this.ctx=a.context;l.setTransform(this.suspendedCtx.getTransform()),Yh(this.suspendedCtx,l),NL(l,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Yh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,a){const l=a[0],o=a[1],d=a[2]-l,f=a[3]-o;d===0||f===0||(this.genericComposeSMask(e.context,n,d,f,e.subtype,e.backdrop,e.transferMap,l,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,a,l,o,d,f,p,m,b){let v=t.canvas,A=f-m,E=p-b;if(o){const T=ht.makeHexColor(...o);if(A<0||E<0||A+n>v.width||E+a>v.height){const R=this.cachedCanvases.getCanvas("maskExtension",n,a),O=R.context;O.drawImage(v,-A,-E),O.globalCompositeOperation="destination-atop",O.fillStyle=T,O.fillRect(0,0,n,a),O.globalCompositeOperation="source-over",v=R.canvas,A=E=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const R=new Path2D;R.rect(A,E,n,a),t.clip(R),t.globalCompositeOperation="destination-atop",t.fillStyle=T,t.fillRect(A,E,n,a),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),l==="Alpha"&&d?e.filter=this.filterFactory.addAlphaFilter(d):l==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(d));const w=new Path2D;w.rect(f,p,n,a),e.clip(w),e.globalCompositeOperation="destination-in",e.drawImage(v,A,E,n,a,f,p,n,a),e.restore()}save(){this.inSMaskMode&&Yh(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Yh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,a,l,o){this.ctx.transform(t,e,n,a,l,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){let[a]=e;if(!n){a||(a=e[0]=new Path2D),this[t](a);return}if(!(a instanceof Path2D)){const l=e[0]=new Path2D;for(let o=0,d=a.length;o<d;)switch(a[o++]){case gg.moveTo:l.moveTo(a[o++],a[o++]);break;case gg.lineTo:l.lineTo(a[o++],a[o++]);break;case gg.curveTo:l.bezierCurveTo(a[o++],a[o++],a[o++],a[o++],a[o++],a[o++]);break;case gg.closePath:l.closePath();break;default:_t(`Unrecognized drawing path operator: ${a[o-1]}`);break}a=l}ht.axialAlignedBoundingBox(n,me(this.ctx),this.current.minMax),this[t](a)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const n=this.ctx,a=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&(a!=null&&a.getPattern)){const l=a.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=a.getPattern(n,this,hs(n),ai.STROKE),l){const o=new Path2D;o.addPath(t,n.getTransform().invertSelf().multiplySelf(l)),t=o}this.rescaleAndStroke(t,!1),n.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(ai.STROKE,me(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const n=this.ctx,a=this.current.fillColor,l=this.current.patternFill;let o=!1;if(l){const f=a.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=a.getPattern(n,this,hs(n),ai.FILL),f){const p=new Path2D;p.addPath(t,n.getTransform().invertSelf().multiplySelf(f)),t=p}o=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(n.fill(t,"evenodd"),this.pendingEOFill=!1):n.fill(t)),o&&n.restore(),e&&this.consumePath(t,d)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=zL}eoClip(){this.pendingClip=c_}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const n=new Path2D,a=e.getTransform().invertSelf();for(const{transform:l,x:o,y:d,fontSize:f,path:p}of t)n.addPath(p,new DOMMatrix(l).preMultiplySelf(a).translate(o,d).scale(f,-f));e.clip(n),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var m;const n=this.commonObjs.get(t),a=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=n.fontMatrix||P0,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&_t("Invalid font matrix for font "+t),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const l=n.loadedName||"sans-serif",o=((m=n.systemFontInfo)==null?void 0:m.css)||`"${l}", ${n.fallbackName}`;let d="normal";n.black?d="900":n.bold&&(d="bold");const f=n.italic?"italic":"normal";let p=e;e<i_?p=i_:e>n_&&(p=n_),this.current.fontSizeScale=e/p,this.ctx.font=`${f} ${d} ${p}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,a,l){const o=this.ctx,d=this.current,f=d.font,p=d.textRenderingMode,m=d.fontSize/d.fontSizeScale,b=p&di.FILL_STROKE_MASK,v=!!(p&di.ADD_TO_PATH_FLAG),A=d.patternFill&&!f.missingFile,E=d.patternStroke&&!f.missingFile;let w;if((f.disableFontFace||v||A||E)&&(w=f.getPathGenerator(this.commonObjs,t)),f.disableFontFace||A||E){o.save(),o.translate(e,n),o.scale(m,-m);let T;if((b===di.FILL||b===di.FILL_STROKE)&&(a?(T=o.getTransform(),o.setTransform(...a),o.fill(C(this,ts,ov).call(this,w,T,a))):o.fill(w)),b===di.STROKE||b===di.FILL_STROKE)if(l){T||(T=o.getTransform()),o.setTransform(...l);const{a:R,b:O,c:D,d:k}=T,L=ht.inverseTransform(l),U=ht.transform([R,O,D,k,0,0],L);ht.singularValueDecompose2dScale(U,fn),o.lineWidth*=Math.max(fn[0],fn[1])/m,o.stroke(C(this,ts,ov).call(this,w,T,l))}else o.lineWidth/=m,o.stroke(w);o.restore()}else(b===di.FILL||b===di.FILL_STROKE)&&o.fillText(t,e,n),(b===di.STROKE||b===di.FILL_STROKE)&&o.strokeText(t,e,n);v&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:me(o),x:e,y:n,fontSize:m,path:w})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){n=!0;break}return Bt(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const a=e.fontSize;if(a===0)return;const l=this.ctx,o=e.fontSizeScale,d=e.charSpacing,f=e.wordSpacing,p=e.fontDirection,m=e.textHScale*p,b=t.length,v=n.vertical,A=v?1:-1,E=n.defaultVMetrics,w=a*e.fontMatrix[0],T=e.textRenderingMode===di.FILL&&!n.disableFontFace&&!e.patternFill;l.save(),e.textMatrix&&l.transform(...e.textMatrix),l.translate(e.x,e.y+e.textRise),p>0?l.scale(m,-1):l.scale(m,1);let R,O;if(e.patternFill){l.save();const F=e.fillColor.getPattern(l,this,hs(l),ai.FILL);R=me(l),l.restore(),l.fillStyle=F}if(e.patternStroke){l.save();const F=e.strokeColor.getPattern(l,this,hs(l),ai.STROKE);O=me(l),l.restore(),l.strokeStyle=F}let D=e.lineWidth;const k=e.textMatrixScale;if(k===0||D===0){const F=e.textRenderingMode&di.FILL_STROKE_MASK;(F===di.STROKE||F===di.FILL_STROKE)&&(D=this.getSinglePixelWidth())}else D/=k;if(o!==1&&(l.scale(o,o),D/=o),l.lineWidth=D,n.isInvalidPDFjsFont){const F=[];let W=0;for(const J of t)F.push(J.unicode),W+=J.width;l.fillText(F.join(""),0,0),e.x+=W*w*m,l.restore(),this.compose();return}let L=0,U;for(U=0;U<b;++U){const F=t[U];if(typeof F=="number"){L+=A*F*a/1e3;continue}let W=!1;const J=(F.isSpace?f:0)+d,nt=F.fontChar,st=F.accent;let St,zt,Et=F.width;if(v){const z=F.vmetric||E,X=-(F.vmetric?z[1]:Et*.5)*w,ut=z[2]*w;Et=z?-z[0]:Et,St=X/o,zt=(L+ut)/o}else St=L/o,zt=0;if(n.remeasure&&Et>0){const z=l.measureText(nt).width*1e3/a*o;if(Et<z&&this.isFontSubpixelAAEnabled){const X=Et/z;W=!0,l.save(),l.scale(X,1),St/=X}else Et!==z&&(St+=(Et-z)/2e3*a/o)}if(this.contentVisible&&(F.isInFont||n.missingFile)){if(T&&!st)l.fillText(nt,St,zt);else if(this.paintChar(nt,St,zt,R,O),st){const z=St+a*st.offset.x/o,X=zt-a*st.offset.y/o;this.paintChar(st.fontChar,z,X,R,O)}}const Gt=v?Et*w-J*p:Et*w+J*p;L+=Gt,W&&l.restore()}v?e.y-=L:e.x+=L*m,l.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,a=n.font,l=n.fontSize,o=n.fontDirection,d=a.vertical?1:-1,f=n.charSpacing,p=n.wordSpacing,m=n.textHScale*o,b=n.fontMatrix||P0,v=t.length,A=n.textRenderingMode===di.INVISIBLE;let E,w,T,R;if(!(A||l===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),n.textMatrix&&e.transform(...n.textMatrix),e.translate(n.x,n.y+n.textRise),e.scale(m,o),E=0;E<v;++E){if(w=t[E],typeof w=="number"){R=d*w*l/1e3,this.ctx.translate(R,0),n.x+=R*m;continue}const O=(w.isSpace?p:0)+f,D=a.charProcOperatorList[w.operatorListId];D?this.contentVisible&&(this.save(),e.scale(l,l),e.transform(...b),this.executeOperatorList(D),this.restore()):_t(`Type3 character "${w.operatorListId}" is not available.`);const k=[w.width,0];ht.applyTransform(k,b),T=k[0]*l+O,e.translate(T,0),n.x+=T*m}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,a,l,o){const d=new Path2D;d.rect(n,a,l-n,o-a),this.ctx.clip(d),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=this.baseTransform||me(this.ctx),a={createCanvasGraphics:l=>new EA(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new av(t,this.ctx,a,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=ht.makeHexColor(t,e,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=ht.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=DL(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,hs(e),ai.SHADING);const a=hs(e);if(a){const{width:l,height:o}=e.canvas,d=Rc.slice();ht.axialAlignedBoundingBox([0,0,l,o],a,d);const[f,p,m,b]=d;this.ctx.fillRect(f,p,m-f,b-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ne("Should not call beginInlineImage")}beginImageData(){ne("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=me(this.ctx),e)){ht.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[n,a,l,o]=e,d=new Path2D;d.rect(n,a,l-n,o-a),this.ctx.clip(d),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Xm("TODO: Support non-isolated groups."),t.knockout&&_t("Knockout groups not supported.");const n=me(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=Rc.slice();ht.axialAlignedBoundingBox(t.bbox,me(e),a);const l=[0,0,e.canvas.width,e.canvas.height];a=ht.intersect(a,l)||[0,0,0,0];const o=Math.floor(a[0]),d=Math.floor(a[1]),f=Math.max(Math.ceil(a[2])-o,1),p=Math.max(Math.ceil(a[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,p]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(m,f,p),v=b.context;v.translate(-o,-d),v.transform(...n);let A=new Path2D;const[E,w,T,R]=t.bbox;if(A.rect(E,w,T-E,R-w),t.matrix){const O=new Path2D;O.addPath(A,new DOMMatrix(t.matrix)),A=O}v.clip(A),t.smask?this.smaskStack.push({canvas:b.canvas,context:v,offsetX:o,offsetY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,d),e.save()),Yh(e,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=me(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const l=Rc.slice();ht.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a,l),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,n,a,l){if(C(this,ts,rv).call(this),bg(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],d=e[3]-e[1];if(l&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=d,ht.singularValueDecompose2dScale(me(this.ctx),fn);const{viewportScale:f}=this,p=Math.ceil(o*this.outputScaleX*f),m=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,m);const{canvas:b,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(t,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(fn[0],0,0,-fn[1],0,d*fn[1]),bg(this.ctx)}else{bg(this.ctx),this.endPath();const f=new Path2D;f.rect(e[0],e[1],o,d),this.ctx.clip(f)}}this.current=new a_(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),C(this,ts,lv).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,a=this._createMaskCanvas(t),l=a.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,a.offsetX,a.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,a=0,l,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const d=this.ctx;d.save();const f=me(d);d.transform(e,n,a,l,0,0);const p=this._createMaskCanvas(t);d.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]);for(let m=0,b=o.length;m<b;m+=2){const v=ht.transform(f,[e,n,a,l,o[m],o[m+1]]);d.drawImage(p.canvas,v[4],v[5])}d.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,a=this.current.patternFill;for(const l of t){const{data:o,width:d,height:f,transform:p}=l,m=this.cachedCanvases.getCanvas("maskCanvas",d,f),b=m.context;b.save();const v=this.getObject(o,l);l_(b,v),b.globalCompositeOperation="source-in",b.fillStyle=a?n.getPattern(b,this,hs(e),ai.FILL):n,b.fillRect(0,0,d,f),b.restore(),e.save(),e.transform(...p),e.scale(1,-1),yg(e,m.canvas,0,0,d,f,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){_t("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,a){if(!this.contentVisible)return;const l=this.getObject(t);if(!l){_t("Dependent image isn't ready yet");return}const o=l.width,d=l.height,f=[];for(let p=0,m=a.length;p<m;p+=2)f.push({transform:[e,0,0,n,a[p],a[p+1]],x:0,y:0,w:o,h:d});this.paintInlineImageXObjectGroup(l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:a}=t,l=this.cachedCanvases.getCanvas("inlineImage",n,a),o=l.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",l.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,a=this.ctx;this.save();const{filter:l}=a;l!=="none"&&l!==""&&(a.filter="none"),a.scale(1/e,-1/n);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const p=this.cachedCanvases.getCanvas("inlineImage",e,n).context;r_(p,t),o=this.applyTransferMapsToCanvas(p)}const d=this._scaleImage(o,hs(a));a.imageSmoothingEnabled=o_(me(a),t.interpolate),yg(a,d.img,0,0,d.paintWidth,d.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const l=t.width,o=t.height,f=this.cachedCanvases.getCanvas("inlineImage",l,o).context;r_(f,t),a=this.applyTransferMapsToCanvas(f)}for(const l of e)n.save(),n.transform(...l.transform),n.scale(1,-1),yg(n,a,l.x,l.y,l.w,l.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const a=this.ctx;this.pendingClip&&(n||(this.pendingClip===c_?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=me(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:a,d:l}=this.ctx.getTransform();let o,d;if(n===0&&a===0){const f=Math.abs(e),p=Math.abs(l);if(f===p)if(t===0)o=d=1/f;else{const m=f*t;o=d=m<1?1/m:1}else if(t===0)o=1/f,d=1/p;else{const m=f*t,b=p*t;o=m<1?1/m:1,d=b<1?1/b:1}}else{const f=Math.abs(e*l-n*a),p=Math.hypot(e,n),m=Math.hypot(a,l);if(t===0)o=m/f,d=p/f;else{const b=t*f;o=m>b?m/b:1,d=p>b?p/b:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=d}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:a}}=this,[l,o]=this.getScaleForStroking();if(l===o){n.lineWidth=(a||1)*l,n.stroke(t);return}const d=n.getLineDash();e&&n.save(),n.scale(l,o),_0.a=1/l,_0.d=1/o;const f=new Path2D;if(f.addPath(t,_0),d.length>0){const p=Math.max(l,o);n.setLineDash(d.map(m=>m/p)),n.lineDashOffset/=p}n.lineWidth=a||1,n.stroke(f),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};ts=new WeakSet,rv=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},lv=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},ov=function(t,e,n){const a=new Path2D;return a.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),a};let Oc=EA;for(const h in lm)Oc.prototype[h]!==void 0&&(Oc.prototype[lm[h]]=Oc.prototype[h]);var qd,Vd;class Ra{static get workerPort(){return u(this,qd)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");S(this,qd,t)}static get workerSrc(){return u(this,Vd)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");S(this,Vd,t)}}qd=new WeakMap,Vd=new WeakMap,x(Ra,qd,null),x(Ra,Vd,"");var Qc,Xd;class HL{constructor({parsedData:t,rawData:e}){x(this,Qc);x(this,Xd);S(this,Qc,t),S(this,Xd,e)}getRaw(){return u(this,Xd)}get(t){return u(this,Qc).get(t)??null}[Symbol.iterator](){return u(this,Qc).entries()}}Qc=new WeakMap,Xd=new WeakMap;const Tc=Symbol("INTERNAL");var Yd,$d,Kd,Zc;class UL{constructor(t,{name:e,intent:n,usage:a,rbGroups:l}){x(this,Yd,!1);x(this,$d,!1);x(this,Kd,!1);x(this,Zc,!0);S(this,Yd,!!(t&dn.DISPLAY)),S(this,$d,!!(t&dn.PRINT)),this.name=e,this.intent=n,this.usage=a,this.rbGroups=l}get visible(){if(u(this,Kd))return u(this,Zc);if(!u(this,Zc))return!1;const{print:t,view:e}=this.usage;return u(this,Yd)?(e==null?void 0:e.viewState)!=="OFF":u(this,$d)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Tc&&ne("Internal method `_setVisible` called."),S(this,Kd,n),S(this,Zc,e)}}Yd=new WeakMap,$d=new WeakMap,Kd=new WeakMap,Zc=new WeakMap;var Tr,ee,Jc,tu,Wd,cv;class FL{constructor(t,e=dn.DISPLAY){x(this,Wd);x(this,Tr,null);x(this,ee,new Map);x(this,Jc,null);x(this,tu,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,S(this,tu,t.order);for(const n of t.groups)u(this,ee).set(n.id,new UL(e,n));if(t.baseState==="OFF")for(const n of u(this,ee).values())n._setVisible(Tc,!1);for(const n of t.on)u(this,ee).get(n)._setVisible(Tc,!0);for(const n of t.off)u(this,ee).get(n)._setVisible(Tc,!1);S(this,Jc,this.getHash())}}isVisible(t){if(u(this,ee).size===0)return!0;if(!t)return Xm("Optional content group not defined."),!0;if(t.type==="OCG")return u(this,ee).has(t.id)?u(this,ee).get(t.id).visible:(_t(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return C(this,Wd,cv).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!u(this,ee).has(e))return _t(`Optional content group not found: ${e}`),!0;if(u(this,ee).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!u(this,ee).has(e))return _t(`Optional content group not found: ${e}`),!0;if(!u(this,ee).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!u(this,ee).has(e))return _t(`Optional content group not found: ${e}`),!0;if(!u(this,ee).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!u(this,ee).has(e))return _t(`Optional content group not found: ${e}`),!0;if(u(this,ee).get(e).visible)return!1}return!0}return _t(`Unknown optional content policy ${t.policy}.`),!0}return _t(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var l;const a=u(this,ee).get(t);if(!a){_t(`Optional content group not found: ${t}`);return}if(n&&e&&a.rbGroups.length)for(const o of a.rbGroups)for(const d of o)d!==t&&((l=u(this,ee).get(d))==null||l._setVisible(Tc,!1,!0));a._setVisible(Tc,!!e,!0),S(this,Tr,null)}setOCGState({state:t,preserveRB:e}){let n;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":n=a;continue}const l=u(this,ee).get(a);if(l)switch(n){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!l.visible,e);break}}S(this,Tr,null)}get hasInitialVisibility(){return u(this,Jc)===null||this.getHash()===u(this,Jc)}getOrder(){return u(this,ee).size?u(this,tu)?u(this,tu).slice():[...u(this,ee).keys()]:null}getGroup(t){return u(this,ee).get(t)||null}getHash(){if(u(this,Tr)!==null)return u(this,Tr);const t=new FT;for(const[e,n]of u(this,ee))t.update(`${e}:${n.visible}`);return S(this,Tr,t.hexdigest())}[Symbol.iterator](){return u(this,ee).entries()}}Tr=new WeakMap,ee=new WeakMap,Jc=new WeakMap,tu=new WeakMap,Wd=new WeakSet,cv=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let a=1;a<e;a++){const l=t[a];let o;if(Array.isArray(l))o=C(this,Wd,cv).call(this,l);else if(u(this,ee).has(l))o=u(this,ee).get(l).visible;else return _t(`Optional content group not found: ${l}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class IL{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Le(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:l,progressiveDone:o,contentDispositionFilename:d}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=d,(l==null?void 0:l.length)>0){const f=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((f,p)=>{this._onReceiveData({begin:f,chunk:p})}),t.addProgressListener((f,p)=>{this._onProgress({loaded:f,total:p})}),t.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const a=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(n),!0)});Le(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,a,l;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(l=(a=this._fullRequestReader)==null?void 0:a.onProgress)==null||l.call(a,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Le(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new jL(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new GL(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class jL{constructor(t,e,n=!1,a=null){this._stream=t,this._done=n||!1,this._filename=uA(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class GL{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function qL(h){let t=!0,e=n("filename\\*","i").exec(h);if(e){e=e[1];let m=d(e);return m=unescape(m),m=f(m),m=p(m),l(m)}if(e=o(h),e){const m=p(e);return l(m)}if(e=n("filename","i").exec(h),e){e=e[1];let m=d(e);return m=p(m),l(m)}function n(m,b){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function a(m,b){if(m){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const v=new TextDecoder(m,{fatal:!0}),A=Yf(b);b=v.decode(A),t=!1}catch{}}return b}function l(m){return t&&/[\x80-\xff]/.test(m)&&(m=a("utf-8",m),t&&(m=a("iso-8859-1",m))),m}function o(m){const b=[];let v;const A=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=A.exec(m))!==null;){let[,w,T,R]=v;if(w=parseInt(w,10),w in b){if(w===0)break;continue}b[w]=[T,R]}const E=[];for(let w=0;w<b.length&&w in b;++w){let[T,R]=b[w];R=d(R),T&&(R=unescape(R),w===0&&(R=f(R))),E.push(R)}return E.join("")}function d(m){if(m.startsWith('"')){const b=m.slice(1).split('\\"');for(let v=0;v<b.length;++v){const A=b[v].indexOf('"');A!==-1&&(b[v]=b[v].slice(0,A),b.length=v+1),b[v]=b[v].replaceAll(/\\(.)/g,"$1")}m=b.join('"')}return m}function f(m){const b=m.indexOf("'");if(b===-1)return m;const v=m.slice(0,b),E=m.slice(b+1).replace(/^[^']*'/,"");return a(v,E)}function p(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,v,A,E){if(A==="q"||A==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,T){return String.fromCharCode(parseInt(T,16))}),a(v,E);try{E=atob(E)}catch{}return a(v,E)})}return""}function ZT(h,t){const e=new Headers;if(!h||!t||typeof t!="object")return e;for(const n in t){const a=t[n];a!==void 0&&e.append(n,a)}return e}function $m(h){var t;return((t=URL.parse(h))==null?void 0:t.origin)??null}function JT({responseHeaders:h,isHttp:t,rangeChunkSize:e,disableRange:n}){const a={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(h.get("Content-Length"),10);return!Number.isInteger(l)||(a.suggestedLength=l,l<=2*e)||n||!t||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function tx(h){const t=h.get("Content-Disposition");if(t){let e=qL(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(uA(e))return e}return null}function Qf(h,t){return new om(`Unexpected server response (${h}) while retrieving PDF "${t}".`,h,h===404||h===0&&t.startsWith("file:"))}function ex(h){return h===200||h===206}function ix(h,t,e){return{method:"GET",headers:h,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function nx(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(_t(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class u_{constructor(t){et(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=ZT(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Le(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new VL(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new XL(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class VL{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),a=e.url;fetch(a,ix(n,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=$m(l.url),!ex(l.status))throw Qf(l.status,a);this._reader=l.body.getReader(),this._headersCapability.resolve();const o=l.headers,{allowRangeRequests:d,suggestedLength:f}=JT({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=f||this._contentLength,this._filename=tx(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Xr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:nx(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class XL{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${e}-${n-1}`);const o=a.url;fetch(o,ix(l,this._withCredentials,this._abortController)).then(d=>{const f=$m(d.url);if(f!==t._responseOrigin)throw new Error(`Expected range response-origin "${f}" to match "${t._responseOrigin}".`);if(!ex(d.status))throw Qf(d.status,o);this._readCapability.resolve(),this._reader=d.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:nx(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const T0=200,x0=206;function YL(h){const t=h.response;return typeof t!="string"?t:Yf(t).buffer}class $L{constructor({url:t,httpHeaders:e,withCredentials:n}){et(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=ZT(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,a=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[l,o]of this.headers)e.setRequestHeader(l,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=x0):a.expectedStatus=T0,e.responseType="arraybuffer",Le(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var a;const n=this.pendingRequests[t];n&&((a=n.onProgress)==null||a.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const a=n.xhr;if(a.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){n.onError(a.status);return}const l=a.status||T0;if(!(l===T0&&n.expectedStatus===x0)&&l!==n.expectedStatus){n.onError(a.status);return}const d=YL(a);if(l===x0){const f=a.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);p?n.onDone({begin:parseInt(p[1],10),chunk:d}):(_t('Missing or invalid "Content-Range" header.'),n.onError(0))}else d?n.onDone({begin:0,chunk:d}):n.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class KL{constructor(t){this._source=t,this._manager=new $L(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Le(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new WL(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new QL(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class WL{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=$m(e.responseURL);const n=e.getAllResponseHeaders(),a=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(d=>{const[f,...p]=d.split(": ");return[f,p.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:o}=JT({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=tx(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Qf(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class QL{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=$m((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Qf(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const ZL=/^[a-z][a-z0-9\-+.]+:/i;function JL(h){if(ZL.test(h))return new URL(h);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(h))}class tN{constructor(t){this.source=t,this.url=JL(t.url),Le(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Le(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new eN(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new iN(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class eN{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=Qf(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Xr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class iN{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const nN=1e5,h_=30;var g_,xr,zi,Qd,Zd,ql,ha,Jd,tf,Vl,eu,iu,Cr,nu,ef,su,Xl,nf,sf,au,Yl,af,Rr,ru,Pa,sx,ax,uv,gn,Hg,hv,rx,lx;const Be=class Be{constructor({textContentSource:t,container:e,viewport:n}){x(this,Pa);x(this,xr,Promise.withResolvers());x(this,zi,null);x(this,Qd,!1);x(this,Zd,!!((g_=globalThis.FontInspector)!=null&&g_.enabled));x(this,ql,null);x(this,ha,null);x(this,Jd,0);x(this,tf,0);x(this,Vl,null);x(this,eu,null);x(this,iu,0);x(this,Cr,0);x(this,nu,Object.create(null));x(this,ef,[]);x(this,su,null);x(this,Xl,[]);x(this,nf,new WeakMap);x(this,sf,null);var f;if(t instanceof ReadableStream)S(this,su,t);else if(typeof t=="object")S(this,su,new ReadableStream({start(p){p.enqueue(t),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,zi,S(this,eu,e)),S(this,Cr,n.scale*ka.pixelRatio),S(this,iu,n.rotation),S(this,ha,{div:null,properties:null,ctx:null});const{pageWidth:a,pageHeight:l,pageX:o,pageY:d}=n.rawDims;S(this,sf,[1,0,0,-1,-o,d+l]),S(this,tf,a),S(this,Jd,l),C(f=Be,gn,rx).call(f),Ro(e,n),u(this,xr).promise.finally(()=>{u(Be,ru).delete(this),S(this,ha,null),S(this,nu,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=oi.platform;return Bt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{u(this,Vl).read().then(({value:e,done:n})=>{if(n){u(this,xr).resolve();return}u(this,ql)??S(this,ql,e.lang),Object.assign(u(this,nu),e.styles),C(this,Pa,sx).call(this,e.items),t()},u(this,xr).reject)};return S(this,Vl,u(this,su).getReader()),u(Be,ru).add(this),t(),u(this,xr).promise}update({viewport:t,onBefore:e=null}){var l;const n=t.scale*ka.pixelRatio,a=t.rotation;if(a!==u(this,iu)&&(e==null||e(),S(this,iu,a),Ro(u(this,eu),{rotation:a})),n!==u(this,Cr)){e==null||e(),S(this,Cr,n);const o={div:null,properties:null,ctx:C(l=Be,gn,Hg).call(l,u(this,ql))};for(const d of u(this,Xl))o.properties=u(this,nf).get(d),o.div=d,C(this,Pa,uv).call(this,o)}}cancel(){var e;const t=new Xr("TextLayer task cancelled.");(e=u(this,Vl))==null||e.cancel(t).catch(()=>{}),S(this,Vl,null),u(this,xr).reject(t)}get textDivs(){return u(this,Xl)}get textContentItemsStr(){return u(this,ef)}static cleanup(){if(!(u(this,ru).size>0)){u(this,au).clear();for(const{canvas:t}of u(this,Yl).values())t.remove();u(this,Yl).clear()}}};xr=new WeakMap,zi=new WeakMap,Qd=new WeakMap,Zd=new WeakMap,ql=new WeakMap,ha=new WeakMap,Jd=new WeakMap,tf=new WeakMap,Vl=new WeakMap,eu=new WeakMap,iu=new WeakMap,Cr=new WeakMap,nu=new WeakMap,ef=new WeakMap,su=new WeakMap,Xl=new WeakMap,nf=new WeakMap,sf=new WeakMap,au=new WeakMap,Yl=new WeakMap,af=new WeakMap,Rr=new WeakMap,ru=new WeakMap,Pa=new WeakSet,sx=function(t){var a,l;if(u(this,Qd))return;(l=u(this,ha)).ctx??(l.ctx=C(a=Be,gn,Hg).call(a,u(this,ql)));const e=u(this,Xl),n=u(this,ef);for(const o of t){if(e.length>nN){_t("Ignoring additional textDivs for performance reasons."),S(this,Qd,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const d=u(this,zi);S(this,zi,document.createElement("span")),u(this,zi).classList.add("markedContent"),o.id!==null&&u(this,zi).setAttribute("id",`${o.id}`),d.append(u(this,zi))}else o.type==="endMarkedContent"&&S(this,zi,u(this,zi).parentNode);continue}n.push(o.str),C(this,Pa,ax).call(this,o)}},ax=function(t){var w;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};u(this,Xl).push(e);const a=ht.transform(u(this,sf),t.transform);let l=Math.atan2(a[1],a[0]);const o=u(this,nu)[t.fontName];o.vertical&&(l+=Math.PI/2);let d=u(this,Zd)&&o.fontSubstitution||o.fontFamily;d=Be.fontFamilyMap.get(d)||d;const f=Math.hypot(a[2],a[3]),p=f*C(w=Be,gn,lx).call(w,d,o,u(this,ql));let m,b;l===0?(m=a[4],b=a[5]-p):(m=a[4]+p*Math.sin(l),b=a[5]-p*Math.cos(l));const v="calc(var(--total-scale-factor) *",A=e.style;u(this,zi)===u(this,eu)?(A.left=`${(100*m/u(this,tf)).toFixed(2)}%`,A.top=`${(100*b/u(this,Jd)).toFixed(2)}%`):(A.left=`${v}${m.toFixed(2)}px)`,A.top=`${v}${b.toFixed(2)}px)`),A.fontSize=`${v}${(u(Be,Rr)*f).toFixed(2)}px)`,A.fontFamily=d,n.fontSize=f,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,u(this,Zd)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),l!==0&&(n.angle=l*(180/Math.PI));let E=!1;if(t.str.length>1)E=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const T=Math.abs(t.transform[0]),R=Math.abs(t.transform[3]);T!==R&&Math.max(T,R)/Math.min(T,R)>1.5&&(E=!0)}if(E&&(n.canvasWidth=o.vertical?t.height:t.width),u(this,nf).set(e,n),u(this,ha).div=e,u(this,ha).properties=n,C(this,Pa,uv).call(this,u(this,ha)),n.hasText&&u(this,zi).append(e),n.hasEOL){const T=document.createElement("br");T.setAttribute("role","presentation"),u(this,zi).append(T)}},uv=function(t){var d;const{div:e,properties:n,ctx:a}=t,{style:l}=e;let o="";if(u(Be,Rr)>1&&(o=`scale(${1/u(Be,Rr)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:f}=l,{canvasWidth:p,fontSize:m}=n;C(d=Be,gn,hv).call(d,a,m*u(this,Cr),f);const{width:b}=a.measureText(e.textContent);b>0&&(o=`scaleX(${p*u(this,Cr)/b}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(l.transform=o)},gn=new WeakSet,Hg=function(t=null){let e=u(this,Yl).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,Yl).set(t,e),u(this,af).set(e,{size:0,family:""})}return e},hv=function(t,e,n){const a=u(this,af).get(t);e===a.size&&n===a.family||(t.font=`${e}px ${n}`,a.size=e,a.family=n)},rx=function(){if(u(this,Rr)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),S(this,Rr,t.getBoundingClientRect().height),t.remove()},lx=function(t,e,n){const a=u(this,au).get(t);if(a)return a;const l=C(this,gn,Hg).call(this,n);l.canvas.width=l.canvas.height=h_,C(this,gn,hv).call(this,l,h_,t);const o=l.measureText(""),d=o.fontBoundingBoxAscent,f=Math.abs(o.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let p=.8;return d?p=d/(d+f):(oi.platform.isFirefox&&_t("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?p=e.ascent:e.descent&&(p=1+e.descent)),u(this,au).set(t,p),p},x(Be,gn),x(Be,au,new Map),x(Be,Yl,new Map),x(Be,af,new WeakMap),x(Be,Rr,null),x(Be,ru,new Set);let md=Be;class yd{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function a(l){var f;if(!l)return;let o=null;const d=l.name;if(d==="#text")o=l.value;else if(yd.shouldBuildText(d))(f=l==null?void 0:l.attributes)!=null&&f.textContent?o=l.attributes.textContent:l.value&&(o=l.value);else return;if(o!==null&&e.push({str:o}),!!l.children)for(const p of l.children)a(p)}return a(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const sN=65536,aN=100;function ox(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const t=new fv,{docId:e}=t,n=h.url?rN(h.url):null,a=h.data?lN(h.data):null,l=h.httpHeaders||null,o=h.withCredentials===!0,d=h.password??null,f=h.range instanceof cx?h.range:null,p=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:sN;let m=h.worker instanceof Lc?h.worker:null;const b=h.verbosity,v=typeof h.docBaseUrl=="string"&&!Ym(h.docBaseUrl)?h.docBaseUrl:null,A=vg(h.cMapUrl),E=h.cMapPacked!==!1,w=h.CMapReaderFactory||(xi?wL:Z1),T=vg(h.iccUrl),R=vg(h.standardFontDataUrl),O=h.StandardFontDataFactory||(xi?_L:J1),D=vg(h.wasmUrl),k=h.WasmFactory||(xi?TL:t_),L=h.stopAtErrors!==!0,U=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,F=h.isEvalSupported!==!1,W=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!xi,J=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!xi&&(oi.platform.isFirefox||!globalThis.chrome),nt=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,st=typeof h.disableFontFace=="boolean"?h.disableFontFace:xi,St=h.fontExtraProperties===!0,zt=h.enableXfa===!0,Et=h.ownerDocument||globalThis.document,Gt=h.disableRange===!0,z=h.disableStream===!0,X=h.disableAutoFetch===!0,ut=h.pdfBug===!0,Nt=h.CanvasFactory||(xi?EL:vL),P=h.FilterFactory||(xi?SL:AL),Q=h.enableHWA===!0,it=h.useWasm!==!1,tt=f?f.length:h.length??NaN,ft=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!xi&&!st,Ct=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:!!(w===Z1&&O===J1&&k===t_&&A&&R&&D&&Sc(A,document.baseURI)&&Sc(R,document.baseURI)&&Sc(D,document.baseURI)),mt=null;ZO(b);const Ht={canvasFactory:new Nt({ownerDocument:Et,enableHWA:Q}),filterFactory:new P({docId:e,ownerDocument:Et}),cMapReaderFactory:Ct?null:new w({baseUrl:A,isCompressed:E}),standardFontDataFactory:Ct?null:new O({baseUrl:R}),wasmFactory:Ct?null:new k({baseUrl:D})};if(!m){const Ns={verbosity:b,port:Ra.workerPort};m=Ns.port?Lc.fromPort(Ns):new Lc(Ns),t._worker=m}const Yt={docId:e,apiVersion:"5.2.133",data:a,password:d,disableAutoFetch:X,rangeChunkSize:p,length:tt,docBaseUrl:v,enableXfa:zt,evaluatorOptions:{maxImageSize:U,disableFontFace:st,ignoreErrors:L,isEvalSupported:F,isOffscreenCanvasSupported:W,isImageDecoderSupported:J,canvasMaxAreaInBytes:nt,fontExtraProperties:St,useSystemFonts:ft,useWasm:it,useWorkerFetch:Ct,cMapUrl:A,iccUrl:T,standardFontDataUrl:R,wasmUrl:D}},is={ownerDocument:Et,pdfBug:ut,styleElement:mt,loadingParams:{disableAutoFetch:X,enableXfa:zt}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Ns=m.messageHandler.sendWithPromise("GetDocRequest",Yt,a?[a.buffer]:null);let za;if(f)za=new IL(f,{disableRange:Gt,disableStream:z});else if(!a){if(!n)throw new Error("getDocument - no `url` parameter provided.");let ns;if(xi)if(Sc(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");ns=u_}else ns=tN;else ns=Sc(n)?u_:KL;za=new ns({url:n,length:tt,httpHeaders:l,withCredentials:o,rangeChunkSize:p,disableRange:Gt,disableStream:z})}return Ns.then(ns=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ko=new ed(e,ns,m.port),qu=new fN(ko,t,za,is,Ht);t._transport=qu,ko.send("Ready",null)})}).catch(t._capability.reject),t}function rN(h){if(h instanceof URL)return h.href;if(typeof h=="string"){if(xi)return h;const t=URL.parse(h,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function lN(h){if(xi&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return Yf(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h==null?void 0:h.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function vg(h){if(typeof h!="string")return null;if(h.endsWith("/"))return h;throw new Error(`Invalid factory url: "${h}" must include trailing slash.`)}const dv=h=>typeof h=="object"&&Number.isInteger(h==null?void 0:h.num)&&h.num>=0&&Number.isInteger(h==null?void 0:h.gen)&&h.gen>=0,oN=h=>typeof h=="object"&&typeof(h==null?void 0:h.name)=="string",cN=lL.bind(null,dv,oN);var _m;const Tm=class Tm{constructor(){et(this,"_capability",Promise.withResolvers());et(this,"_transport",null);et(this,"_worker",null);et(this,"docId",`d${Ai(Tm,_m)._++}`);et(this,"destroyed",!1);et(this,"onPassword",null);et(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,a;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(l){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,l}this._transport=null,(a=this._worker)==null||a.destroy(),this._worker=null}async getData(){return this._transport.getData()}};_m=new WeakMap,x(Tm,_m,0);let fv=Tm;class cx{constructor(t,e,n=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){ne("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class uN{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Bt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var da,$l,rd;class hN{constructor(t,e,n,a=!1){x(this,$l);x(this,da,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=a?new K1:null,this._pdfBug=a,this.commonObjs=n.commonObjs,this.objs=new ux,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:a=0,dontFlip:l=!1}={}){return new Kf({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Bt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:a=cr.ENABLE,transform:l=null,background:o=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:b=!1}){var k,L;(k=this._stats)==null||k.time("Overall");const v=this._transport.getRenderingIntent(n,a,m,b),{renderingIntent:A,cacheKey:E}=v;S(this,da,!1),d||(d=this._transport.getOptionalContentConfig(A));let w=this._intentStates.get(E);w||(w=Object.create(null),this._intentStates.set(E,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const T=!!(A&dn.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(L=this._stats)==null||L.time("Page Request"),this._pumpOperatorList(v));const R=U=>{var F;w.renderTasks.delete(O),T&&S(this,da,!0),C(this,$l,rd).call(this),U?(O.capability.reject(U),this._abortOperatorList({intentState:w,reason:U instanceof Error?U:new Error(U)})):O.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(F=globalThis.Stats)!=null&&F.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},O=new gv({callback:R,params:{canvasContext:t,viewport:e,transform:l,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:p});(w.renderTasks||(w.renderTasks=new Set)).add(O);const D=O.task;return Promise.all([w.displayReadyCapability.promise,d]).then(([U,F])=>{var W;if(this.destroyed){R();return}if((W=this._stats)==null||W.time("Rendering"),!(F.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");O.initializeGraphics({transparency:U,optionalContentConfig:F}),O.operatorListChanged()}).catch(R),D}getOperatorList({intent:t="display",annotationMode:e=cr.ENABLE,printAnnotationStorage:n=null,isEditing:a=!1}={}){var p;function l(){d.operatorList.lastChunk&&(d.opListReadCapability.resolve(d.operatorList),d.renderTasks.delete(f))}const o=this._transport.getRenderingIntent(t,e,n,a,!0);let d=this._intentStates.get(o.cacheKey);d||(d=Object.create(null),this._intentStates.set(o.cacheKey,d));let f;return d.opListReadCapability||(f=Object.create(null),f.operatorListChanged=l,d.opListReadCapability=Promise.withResolvers(),(d.renderTasks||(d.renderTasks=new Set)).add(f),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(o)),d.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>yd.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,a){function l(){o.read().then(function({value:f,done:p}){if(p){n(d);return}d.lang??(d.lang=f.lang),Object.assign(d.styles,f.styles),d.items.push(...f.items),l()},a)}const o=e.getReader(),d={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),S(this,da,!1),Promise.all(t)}cleanup(t=!1){S(this,da,!0);const e=C(this,$l,rd).call(this);return t&&e&&this._stats&&(this._stats=new K1),e}_startRenderPage(t,e){var a,l;const n=this._intentStates.get(e);n&&((a=this._stats)==null||a.timeEnd("Page Request"),(l=n.displayReadyCapability)==null||l.resolve(t))}_renderPageChunk(t,e){for(let n=0,a=t.length;n<a;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&C(this,$l,rd).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:a}){const{map:l,transfer:o}=n,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:l,modifiedIds:a},o).getReader(),p=this._intentStates.get(e);p.streamReader=f;const m=()=>{f.read().then(({value:b,done:v})=>{if(v){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(b,p),m())},b=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const v of p.renderTasks)v.operatorListChanged();C(this,$l,rd).call(this)}if(p.displayReadyCapability)p.displayReadyCapability.reject(b);else if(p.opListReadCapability)p.opListReadCapability.reject(b);else throw b}})};m()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof cA){let a=aN;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new Xr(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,l]of this._intentStates)if(l===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}da=new WeakMap,$l=new WeakSet,rd=function(){if(!u(this,da)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,da,!1),!0};var fa,xm;class dN{constructor(){x(this,fa,new Map);x(this,xm,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};u(this,xm).then(()=>{for(const[a]of u(this,fa))a.call(this,n)})}addEventListener(t,e,n=null){let a=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:l}=n;if(l.aborted){_t("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);a=()=>l.removeEventListener("abort",o),l.addEventListener("abort",o)}u(this,fa).set(e,a)}removeEventListener(t,e){const n=u(this,fa).get(e);n==null||n(),u(this,fa).delete(e)}terminate(){for(const[,t]of u(this,fa))t==null||t();u(this,fa).clear()}}fa=new WeakMap,xm=new WeakMap;var Cm,Kl,Wl,lu,Ug,ou,Fg;const he=class he{constructor({name:t=null,port:e=null,verbosity:n=JO()}={}){x(this,lu);var a;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((a=u(he,Wl))!=null&&a.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(u(he,Wl)||S(he,Wl,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new ed("main","worker",t),this._messageHandler.on("ready",function(){}),C(this,lu,Ug).call(this)}_initialize(){if(u(he,Kl)||u(he,ou,Fg)){this._setupFakeWorker();return}let{workerSrc:t}=he;try{he._isSameOrigin(window.location,t)||(t=he._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new ed("main","worker",e),a=()=>{l.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},l=new AbortController;e.addEventListener("error",()=>{this._webWorker||a()},{signal:l.signal}),n.on("test",d=>{if(l.abort(),this.destroyed||!d){a();return}this._messageHandler=n,this._port=e,this._webWorker=e,C(this,lu,Ug).call(this)}),n.on("ready",d=>{if(l.abort(),this.destroyed){a();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const d=new Uint8Array;n.send("test",d,[d.buffer])};o();return}catch{Xm("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){u(he,Kl)||(_t("Setting up fake worker."),S(he,Kl,!0)),he._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new dN;this._port=e;const n=`fake${Ai(he,Cm)._++}`,a=new ed(n+"_worker",n,e);t.setup(a,e),this._messageHandler=new ed(n,n+"_worker",e),C(this,lu,Ug).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,n;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=u(he,Wl))==null||e.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=u(this,Wl))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new he(t)}static get workerSrc(){if(Ra.workerSrc)return Ra.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Bt(this,"_setupFakeWorkerGlobal",(async()=>u(this,ou,Fg)?u(this,ou,Fg):(await import(this.workerSrc)).WorkerMessageHandler)())}};Cm=new WeakMap,Kl=new WeakMap,Wl=new WeakMap,lu=new WeakSet,Ug=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},ou=new WeakSet,Fg=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},x(he,ou),x(he,Cm,0),x(he,Kl,!1),x(he,Wl),xi&&(S(he,Kl,!0),Ra.workerSrc||(Ra.workerSrc="./pdf.worker.mjs")),he._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const a=new URL(e,n);return n.origin===a.origin},he._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let Lc=he;var pa,ws,cu,uu,ga,Ql,ld;class fN{constructor(t,e,n,a,l){x(this,Ql);x(this,pa,new Map);x(this,ws,new Map);x(this,cu,new Map);x(this,uu,new Map);x(this,ga,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new ux,this.fontLoader=new yL({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Bt(this,"annotationStorage",new pA)}getRenderingIntent(t,e=cr.ENABLE,n=null,a=!1,l=!1){let o=dn.DISPLAY,d=ev;switch(t){case"any":o=dn.ANY;break;case"display":break;case"print":o=dn.PRINT;break;default:_t(`getRenderingIntent - invalid intent: ${t}`)}const f=o&dn.PRINT&&n instanceof jT?n:this.annotationStorage;switch(e){case cr.DISABLE:o+=dn.ANNOTATIONS_DISABLE;break;case cr.ENABLE:break;case cr.ENABLE_FORMS:o+=dn.ANNOTATIONS_FORMS;break;case cr.ENABLE_STORAGE:o+=dn.ANNOTATIONS_STORAGE,d=f.serializable;break;default:_t(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(o+=dn.IS_EDITING),l&&(o+=dn.OPLIST);const{ids:p,hash:m}=f.modifiedIds,b=[o,d.hash,m];return{renderingIntent:o,cacheKey:b.join("_"),annotationStorageSerializable:d,modifiedIds:p}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=u(this,ga))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const a of u(this,ws).values())t.push(a._destroy());u(this,ws).clear(),u(this,cu).clear(),u(this,uu).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var a,l;this.commonObjs.clear(),this.fontLoader.clear(),u(this,pa).clear(),this.filterFactory.destroy(),md.cleanup(),(a=this._networkStream)==null||a.cancelAllRequests(new Xr("Worker was terminated.")),(l=this.messageHandler)==null||l.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,a)=>{Le(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},a.onPull=()=>{this._fullReader.read().then(function({value:l,done:o}){if(o){a.close();return}Le(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{this._fullReader.cancel(l),a.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async n=>{var d;await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:l,contentLength:o}=this._fullReader;return(!a||!l)&&(this._lastProgress&&((d=e.onProgress)==null||d.call(e,this._lastProgress)),this._fullReader.onProgress=f=>{var p;(p=e.onProgress)==null||p.call(e,{loaded:f.loaded,total:f.total})}),{isStreamingSupported:a,isRangeSupported:l,contentLength:o}}),t.on("GetRangeReader",(n,a)=>{Le(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(n.begin,n.end);if(!l){a.close();return}a.onPull=()=>{l.read().then(function({value:o,done:d}){if(d){a.close();return}Le(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{l.cancel(o),a.ready.catch(d=>{if(!this.destroyed)throw d})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new uN(n,this))}),t.on("DocException",n=>{e._capability.reject(ki(n))}),t.on("PasswordRequest",n=>{S(this,ga,Promise.withResolvers());try{if(!e.onPassword)throw ki(n);const a=l=>{l instanceof Error?u(this,ga).reject(l):u(this,ga).resolve({password:l})};e.onPassword(a,n.code)}catch(a){u(this,ga).reject(a)}return u(this,ga).promise}),t.on("DataLoaded",n=>{var a;(a=e.onProgress)==null||a.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;u(this,ws).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,a,l])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(a){case"Font":if("error"in l){const m=l.error;_t(`Error during font loading: ${m}`),this.commonObjs.resolve(n,m);break}const d=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(m,b)=>globalThis.FontInspector.fontAdded(m,b):null,f=new bL(l,d);this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!f.fontExtraProperties&&f.data&&(f.data=null),this.commonObjs.resolve(n,f)});break;case"CopyLocalImage":const{imageRef:p}=l;Le(p,"The imageRef must be defined.");for(const m of u(this,ws).values())for(const[,b]of m.objs)if((b==null?void 0:b.ref)===p)return b.dataLen?(this.commonObjs.resolve(n,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,l);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([n,a,l,o])=>{var f;if(this.destroyed)return;const d=u(this,ws).get(a);if(!d.objs.has(n)){if(d._intentStates.size===0){(f=o==null?void 0:o.bitmap)==null||f.close();return}switch(l){case"Image":case"Pattern":d.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",n=>{var a;this.destroyed||(a=e.onProgress)==null||a.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[n.type];if(!a)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&_t("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=u(this,cu).get(e);if(n)return n;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&u(this,uu).set(l.refStr,t);const o=new hN(e,l,this,this._params.pdfBug);return u(this,ws).set(e,o),o});return u(this,cu).set(e,a),a}getPageIndex(t){return dv(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return C(this,Ql,ld).call(this,"GetFieldObjects")}hasJSActions(){return C(this,Ql,ld).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return C(this,Ql,ld).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return C(this,Ql,ld).call(this,"GetOptionalContentConfig").then(e=>new FL(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=u(this,pa).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(a=>{var l,o;return{info:a[0],metadata:a[1]?new HL(a[1]):null,contentDispositionFilename:((l=this._fullReader)==null?void 0:l.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return u(this,pa).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of u(this,ws).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),u(this,pa).clear(),this.filterFactory.destroy(!0),md.cleanup()}}cachedPageNumber(t){if(!dv(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return u(this,uu).get(e)??null}}pa=new WeakMap,ws=new WeakMap,cu=new WeakMap,uu=new WeakMap,ga=new WeakMap,Ql=new WeakSet,ld=function(t,e=null){const n=u(this,pa).get(t);if(n)return n;const a=this.messageHandler.sendWithPromise(t,e);return u(this,pa).set(t,a),a};const $h=Symbol("INITIAL_DATA");var en,rf,pv;class ux{constructor(){x(this,rf);x(this,en,Object.create(null))}get(t,e=null){if(e){const a=C(this,rf,pv).call(this,t);return a.promise.then(()=>e(a.data)),null}const n=u(this,en)[t];if(!n||n.data===$h)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=u(this,en)[t];return!!e&&e.data!==$h}delete(t){const e=u(this,en)[t];return!e||e.data===$h?!1:(delete u(this,en)[t],!0)}resolve(t,e=null){const n=C(this,rf,pv).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in u(this,en)){const{data:n}=u(this,en)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}S(this,en,Object.create(null))}*[Symbol.iterator](){for(const t in u(this,en)){const{data:e}=u(this,en)[t];e!==$h&&(yield[t,e])}}}en=new WeakMap,rf=new WeakSet,pv=function(t){var e;return(e=u(this,en))[t]||(e[t]={...Promise.withResolvers(),data:$h})};var Mr;class pN{constructor(t){x(this,Mr,null);et(this,"onContinue",null);et(this,"onError",null);S(this,Mr,t)}get promise(){return u(this,Mr).capability.promise}cancel(t=0){u(this,Mr).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=u(this,Mr).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=u(this,Mr);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Mr=new WeakMap;var Dr,Zl;const vl=class vl{constructor({callback:t,params:e,objs:n,commonObjs:a,annotationCanvasMap:l,operatorList:o,pageIndex:d,canvasFactory:f,filterFactory:p,useRequestAnimationFrame:m=!1,pdfBug:b=!1,pageColors:v=null}){x(this,Dr,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=a,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=d,this.canvasFactory=f,this.filterFactory=p,this._pdfBug=b,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new pN(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var d,f;if(this.cancelled)return;if(this._canvas){if(u(vl,Zl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(vl,Zl).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:a,transform:l,background:o}=this.params;this.gfx=new Oc(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:a,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var n,a,l;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),u(this,Dr)&&(window.cancelAnimationFrame(u(this,Dr)),S(this,Dr,null)),u(vl,Zl).delete(this._canvas),t||(t=new cA(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(l=(a=this.task).onError)==null||l.call(a,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,Dr,window.requestAnimationFrame(()=>{S(this,Dr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(vl,Zl).delete(this._canvas),this.callback())))}};Dr=new WeakMap,Zl=new WeakMap,x(vl,Zl,new WeakSet);let gv=vl;const gN="5.2.133",mN="4f7761353";function d_(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function Kh(h){return Math.max(0,Math.min(255,255*h))}class f_{static CMYK_G([t,e,n,a]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Kh(t),[t,t,t]}static G_HTML([t]){const e=d_(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Kh)}static RGB_HTML(t){return`#${t.map(d_).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,n+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,n,a]){return[Kh(1-Math.min(1,t+a)),Kh(1-Math.min(1,n+a)),Kh(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const a=1-t,l=1-e,o=1-n,d=Math.min(a,l,o);return["CMYK",a,l,o,d]}}class yN{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),n||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ne("Abstract method `_createSVG` called.")}}class hm extends yN{_createSVG(t){return document.createElementNS(Ks,t)}}class hx{static setupStorage(t,e,n,a,l){const o=a.getValue(e,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),l==="print")break;t.addEventListener("input",d=>{a.setValue(e,{value:d.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?t.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",d=>{a.setValue(e,{value:d.target.checked?d.target.getAttribute("xfaOn"):d.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),l==="print")break;t.addEventListener("input",d=>{a.setValue(e,{value:d.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const d of n.children)d.attributes.value===o.value?d.attributes.selected=!0:d.attributes.hasOwnProperty("selected")&&delete d.attributes.selected}t.addEventListener("input",d=>{const f=d.target.options,p=f.selectedIndex===-1?"":f[f.selectedIndex].value;a.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:a,linkService:l}){const{attributes:o}=e,d=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${a}`);for(const[f,p]of Object.entries(o))if(p!=null)switch(f){case"class":p.length&&t.setAttribute(f,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!d||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,p)}d&&l.addLinkAttributes(t,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(t,o.dataId,e,n)}static render(t){var b,v;const e=t.annotationStorage,n=t.linkService,a=t.xfaHtml,l=t.intent||"display",o=document.createElement(a.name);a.attributes&&this.setAttributes({html:o,element:a,intent:l,linkService:n});const d=l!=="richText",f=t.div;if(f.append(o),t.viewport){const A=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=A}d&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(a.children.length===0){if(a.value){const A=document.createTextNode(a.value);o.append(A),d&&yd.shouldBuildText(a.name)&&p.push(A)}return{textDivs:p}}const m=[[a,-1,o]];for(;m.length>0;){const[A,E,w]=m.at(-1);if(E+1===A.children.length){m.pop();continue}const T=A.children[++m.at(-1)[1]];if(T===null)continue;const{name:R}=T;if(R==="#text"){const D=document.createTextNode(T.value);p.push(D),w.append(D);continue}const O=(b=T==null?void 0:T.attributes)!=null&&b.xmlns?document.createElementNS(T.attributes.xmlns,R):document.createElement(R);if(w.append(O),T.attributes&&this.setAttributes({html:O,element:T,storage:e,intent:l,linkService:n}),((v=T.children)==null?void 0:v.length)>0)m.push([T,-1,O]);else if(T.value){const D=document.createTextNode(T.value);d&&yd.shouldBuildText(R)&&p.push(D),O.append(D)}}for(const A of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Zf=1e3,bN=9,Do=new WeakSet;class p_{static create(t){switch(t.data.annotationType){case De.LINK:return new dx(t);case De.TEXT:return new vN(t);case De.WIDGET:switch(t.data.fieldType){case"Tx":return new AN(t);case"Btn":return t.data.radioButton?new gx(t):t.data.checkBox?new EN(t):new wN(t);case"Ch":return new _N(t);case"Sig":return new SN(t)}return new No(t);case De.POPUP:return new yv(t);case De.FREETEXT:return new Ax(t);case De.LINE:return new xN(t);case De.SQUARE:return new CN(t);case De.CIRCLE:return new RN(t);case De.POLYLINE:return new Sx(t);case De.CARET:return new DN(t);case De.INK:return new yA(t);case De.POLYGON:return new MN(t);case De.HIGHLIGHT:return new Ex(t);case De.UNDERLINE:return new ON(t);case De.SQUIGGLY:return new LN(t);case De.STRIKEOUT:return new NN(t);case De.STAMP:return new wx(t);case De.FILEATTACHMENT:return new kN(t);default:return new xe(t)}}}var Jl,hu,du,lf,mv;const wA=class wA{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:a=!1}={}){x(this,lf);x(this,Jl,null);x(this,hu,!1);x(this,du,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),a&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return wA._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;u(this,Jl)||S(this,Jl,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&C(this,lf,mv).call(this,e),(n=u(this,du))==null||n.popup.updateEdited(t)}resetEdited(){var t;u(this,Jl)&&(C(this,lf,mv).call(this,u(this,Jl).rect),(t=u(this,du))==null||t.popup.resetEdited(),S(this,Jl,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:a}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",e.id),this instanceof No||(l.tabIndex=Zf);const{style:o}=l;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(l.title=e.alternativeText),e.noRotate&&l.classList.add("norotate"),!e.rect||this instanceof yv){const{rotation:w}=e;return!e.hasOwnCanvas&&w!==0&&this.setRotation(w,l),l}const{width:d,height:f}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const w=e.borderStyle.horizontalCornerRadius,T=e.borderStyle.verticalCornerRadius;if(w>0||T>0){const O=`calc(${w}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;o.borderRadius=O}else if(this instanceof gx){const O=`calc(${d}px * var(--total-scale-factor)) / calc(${f}px * var(--total-scale-factor))`;o.borderRadius=O}switch(e.borderStyle.style){case Ac.SOLID:o.borderStyle="solid";break;case Ac.DASHED:o.borderStyle="dashed";break;case Ac.BEVELED:_t("Unimplemented border style: beveled");break;case Ac.INSET:_t("Unimplemented border style: inset");break;case Ac.UNDERLINE:o.borderBottomStyle="solid";break}const R=e.borderColor||null;R?(S(this,hu,!0),o.borderColor=ht.makeHexColor(R[0]|0,R[1]|0,R[2]|0)):o.borderWidth=0}const p=ht.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:b,pageX:v,pageY:A}=a.rawDims;o.left=`${100*(p[0]-v)/m}%`,o.top=`${100*(p[1]-A)/b}%`;const{rotation:E}=e;return e.hasOwnCanvas||E===0?(o.width=`${100*d/m}%`,o.height=`${100*f/b}%`):this.setRotation(E,l),l}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:a}=this.parent.viewport.rawDims;let{width:l,height:o}=this;t%180!==0&&([l,o]=[o,l]),e.style.width=`${100*l/n}%`,e.style.height=`${100*o/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,a)=>{const l=a.detail[e],o=l[0],d=l.slice(1);a.target.style[n]=f_[`${o}_HTML`](d),this.annotationStorage.setValue(this.data.id,{[n]:f_[`${o}_rgb`](d)})};return Bt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,a=n%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const a of Object.keys(e.detail)){const l=t[a]||n[a];l==null||l(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[a,l]of Object.entries(e)){const o=n[a];if(o){const d={detail:{[a]:l},target:t};o(d),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,a,l]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,T,R,O]=t.subarray(2,6);if(a===w&&l===T&&e===R&&n===O)return}const{style:o}=this.container;let d;if(u(this,hu)){const{borderColor:w,borderWidth:T}=o;o.borderWidth=0,d=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const f=a-e,p=l-n,{svgFactory:m}=this,b=m.createElement("svg");b.classList.add("quadrilateralsContainer"),b.setAttribute("width",0),b.setAttribute("height",0);const v=m.createElement("defs");b.append(v);const A=m.createElement("clipPath"),E=`clippath_${this.data.id}`;A.setAttribute("id",E),A.setAttribute("clipPathUnits","objectBoundingBox"),v.append(A);for(let w=2,T=t.length;w<T;w+=8){const R=t[w],O=t[w+1],D=t[w+2],k=t[w+3],L=m.createElement("rect"),U=(D-e)/f,F=(l-O)/p,W=(R-D)/f,J=(O-k)/p;L.setAttribute("x",U),L.setAttribute("y",F),L.setAttribute("width",W),L.setAttribute("height",J),A.append(L),d==null||d.push(`<rect vector-effect="non-scaling-stroke" x="${U}" y="${F}" width="${W}" height="${J}"/>`)}u(this,hu)&&(d.push("</g></svg>')"),o.backgroundImage=d.join("")),this.container.append(b),this.container.style.clipPath=`url(#${E})`}_createPopup(){const{data:t}=this,e=S(this,du,new yv({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){ne("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:l,id:o,exportValues:d}of a){if(l===-1||o===e)continue;const f=typeof d=="string"?d:null,p=document.querySelector(`[data-element-id="${o}"]`);if(p&&!Do.has(p)){_t(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:f,domElement:p})}return n}for(const a of document.getElementsByName(t)){const{exportValue:l}=a,o=a.getAttribute("data-element-id");o!==e&&Do.has(a)&&n.push({id:o,exportValue:l,domElement:a})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Jl=new WeakMap,hu=new WeakMap,du=new WeakMap,lf=new WeakSet,mv=function(t){const{container:{style:e},data:{rect:n,rotation:a},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:o,pageX:d,pageY:f}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-d)/l}%`,e.top=`${100*(o-t[3]+f)/o}%`,a===0?(e.width=`${100*(t[2]-t[0])/l}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(a)};let xe=wA;var pn,gl,fx,px;class dx extends xe{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});x(this,pn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,a=document.createElement("a");a.setAttribute("data-element-id",e.id);let l=!1;return e.url?(n.addLinkAttributes(a,e.url,e.newWindow),l=!0):e.action?(this._bindNamedAction(a,e.action),l=!0):e.attachment?(C(this,pn,fx).call(this,a,e.attachment,e.attachmentDest),l=!0):e.setOCGState?(C(this,pn,px).call(this,a,e.setOCGState),l=!0):e.dest?(this._bindLink(a,e.dest),l=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(a,e),l=!0),e.resetForm?(this._bindResetFormAction(a,e.resetForm),l=!0):this.isTooltipOnly&&!l&&(this._bindLink(a,""),l=!0)),this.container.classList.add("linkAnnotation"),l&&this.container.append(a),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&C(this,pn,gl).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),C(this,pn,gl).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const l of Object.keys(n.actions)){const o=a.get(l);o&&(e[o]=()=>{var d;return(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:l}}),!1})}e.onclick||(e.onclick=()=>!1),C(this,pn,gl).call(this)}_bindResetFormAction(e,n){const a=e.onclick;if(a||(e.href=this.linkService.getAnchorUrl("")),C(this,pn,gl).call(this),!this._fieldObjects){_t('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),a||(e.onclick=()=>!1);return}e.onclick=()=>{var b;a==null||a();const{fields:l,refs:o,include:d}=n,f=[];if(l.length!==0||o.length!==0){const v=new Set(o);for(const A of l){const E=this._fieldObjects[A]||[];for(const{id:w}of E)v.add(w)}for(const A of Object.values(this._fieldObjects))for(const E of A)v.has(E.id)===d&&f.push(E)}else for(const v of Object.values(this._fieldObjects))f.push(...v);const p=this.annotationStorage,m=[];for(const v of f){const{id:A}=v;switch(m.push(A),v.type){case"text":{const w=v.defaultValue||"";p.setValue(A,{value:w});break}case"checkbox":case"radiobutton":{const w=v.defaultValue===v.exportValues;p.setValue(A,{value:w});break}case"combobox":case"listbox":{const w=v.defaultValue||"";p.setValue(A,{value:w});break}default:continue}const E=document.querySelector(`[data-element-id="${A}"]`);if(E){if(!Do.has(E)){_t(`_bindResetFormAction - element not allowed: ${A}`);continue}}else continue;E.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}pn=new WeakSet,gl=function(){this.container.setAttribute("data-internal-link","")},fx=function(e,n,a=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var l;return(l=this.downloadManager)==null||l.openOrDownloadData(n.content,n.filename,a),!1},C(this,pn,gl).call(this)},px=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),C(this,pn,gl).call(this)};class vN extends xe{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class No extends xe{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return oi.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,a,l){n.includes("mouse")?t.addEventListener(n,o=>{var d;(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(n,o=>{var d;if(n==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}l&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(o)}}))})}_setEventListeners(t,e,n,a){var l,o,d;for(const[f,p]of n)(p==="Action"||(l=this.data.actions)!=null&&l[p])&&((p==="Focus"||p==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,f,p,a),p==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):p==="Blur"&&!((d=this.data.actions)!=null&&d.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ht.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||bN,l=t.style;let o;const d=2,f=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-d),m=Math.round(p/(v0*a))||1,b=p/m;o=Math.min(a,f(b/v0))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-d);o=Math.min(a,f(p/v0))}l.fontSize=`calc(${o}px * var(--total-scale-factor))`,l.color=ht.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(l.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class AN extends No{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,a){const l=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=n),l.setValue(o.id,{[a]:n})}render(){var a,l;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let d=o.value||"";const f=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;f&&d.length>f&&(d=d.slice(0,f));let p=o.formattedValue||((a=this.data.textContent)==null?void 0:a.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const m={userValue:d,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=p??d,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",p??d),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Do.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Zf,this._setRequired(n,this.data.required),f&&(n.maxLength=f),n.addEventListener("input",v=>{t.setValue(e,{value:v.target.value}),this.setPropertyOnSiblings(n,"value",v.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",v=>{const A=this.data.defaultFieldValue??"";n.value=m.userValue=A,m.formattedValue=null});let b=v=>{const{formattedValue:A}=m;A!=null&&(v.target.value=A),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",A=>{var w;if(m.focused)return;const{target:E}=A;m.userValue&&(E.value=m.userValue),m.lastCommittedValue=E.value,m.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",A=>{this.showElementAndHideCanvas(A.target);const E={value(w){m.userValue=w.detail.value??"",t.setValue(e,{value:m.userValue.toString()}),w.target.value=m.userValue},formattedValue(w){const{formattedValue:T}=w.detail;m.formattedValue=T,T!=null&&w.target!==document.activeElement&&(w.target.value=T),t.setValue(e,{formattedValue:T})},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var D;const{charLimit:T}=w.detail,{target:R}=w;if(T===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",T);let O=m.userValue;!O||O.length<=T||(O=O.slice(0,T),R.value=m.userValue=O,t.setValue(e,{value:O}),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(E,A)}),n.addEventListener("keydown",A=>{var T;m.commitKey=1;let E=-1;if(A.key==="Escape"?E=0:A.key==="Enter"&&!this.data.multiLine?E=2:A.key==="Tab"&&(m.commitKey=3),E===-1)return;const{value:w}=A.target;m.lastCommittedValue!==w&&(m.lastCommittedValue=w,m.userValue=w,(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:E,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}))});const v=b;b=null,n.addEventListener("blur",A=>{var w,T;if(!m.focused||!A.relatedTarget)return;(w=this.data.actions)!=null&&w.Blur||(m.focused=!1);const{value:E}=A.target;m.userValue=E,m.lastCommittedValue!==E&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:m.commitKey,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}})),v(A)}),(l=this.data.actions)!=null&&l.Keystroke&&n.addEventListener("beforeinput",A=>{var L;m.lastCommittedValue=null;const{data:E,target:w}=A,{value:T,selectionStart:R,selectionEnd:O}=w;let D=R,k=O;switch(A.inputType){case"deleteWordBackward":{const U=T.substring(0,R).match(/\w*[^\w]*$/);U&&(D-=U[0].length);break}case"deleteWordForward":{const U=T.substring(R).match(/^[^\w]*\w*/);U&&(k+=U[0].length);break}case"deleteContentBackward":R===O&&(D-=1);break;case"deleteContentForward":R===O&&(k+=1);break}A.preventDefault(),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:E||"",willCommit:!1,selStart:D,selEnd:k}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],A=>A.target.value)}if(b&&n.addEventListener("blur",b),this.data.comb){const A=(this.data.rect[2]-this.data.rect[0])/f;n.classList.add("comb"),n.style.letterSpacing=`calc(${A}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class SN extends No{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class EN extends No{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(n,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return Do.add(l),l.setAttribute("data-element-id",n),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.setAttribute("exportValue",e.exportValue),l.tabIndex=Zf,l.addEventListener("change",o=>{const{name:d,checked:f}=o.target;for(const p of this._getElementsByName(d,n)){const m=f&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}t.setValue(n,{value:f})}),l.addEventListener("resetform",o=>{const d=e.defaultFieldValue||"Off";o.target.checked=d===e.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",o=>{const d={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(n,{value:f.target.checked})}};this._dispatchEventFromSandbox(d,o)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class gx extends No{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(n,{value:a})),a)for(const o of this._getElementsByName(e.fieldName,n))t.setValue(o.id,{value:!1});const l=document.createElement("input");if(Do.add(l),l.setAttribute("data-element-id",n),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.tabIndex=Zf,l.addEventListener("change",o=>{const{name:d,checked:f}=o.target;for(const p of this._getElementsByName(d,n))t.setValue(p.id,{value:!1});t.setValue(n,{value:f})}),l.addEventListener("resetform",o=>{const d=e.defaultFieldValue;o.target.checked=d!=null&&d===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;l.addEventListener("updatefromsandbox",d=>{const f={value:p=>{const m=o===p.detail.value;for(const b of this._getElementsByName(p.target.name)){const v=m&&b.id===n;b.domElement&&(b.domElement.checked=v),t.setValue(b.id,{value:v})}}};this._dispatchEventFromSandbox(f,d)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class wN extends dx{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class _N extends No{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");Do.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=Zf;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",m=>{const b=this.data.defaultFieldValue;for(const v of a.options)v.selected=v.value===b});for(const m of this.data.options){const b=document.createElement("option");b.textContent=m.displayValue,b.value=m.exportValue,n.value.includes(m.exportValue)&&(b.setAttribute("selected",!0),l=!1),a.append(b)}let o=null;if(l){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),a.prepend(m),o=()=>{m.remove(),a.removeEventListener("input",o),o=null},a.addEventListener("input",o)}const d=m=>{const b=m?"value":"textContent",{options:v,multiple:A}=a;return A?Array.prototype.filter.call(v,E=>E.selected).map(E=>E[b]):v.selectedIndex===-1?null:v[v.selectedIndex][b]};let f=d(!1);const p=m=>{const b=m.target.options;return Array.prototype.map.call(b,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",m=>{const b={value(v){o==null||o();const A=v.detail.value,E=new Set(Array.isArray(A)?A:[A]);for(const w of a.options)w.selected=E.has(w.value);t.setValue(e,{value:d(!0)}),f=d(!1)},multipleSelection(v){a.multiple=!0},remove(v){const A=a.options,E=v.detail.remove;A[E].selected=!1,a.remove(E),A.length>0&&Array.prototype.findIndex.call(A,T=>T.selected)===-1&&(A[0].selected=!0),t.setValue(e,{value:d(!0),items:p(v)}),f=d(!1)},clear(v){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),f=d(!1)},insert(v){const{index:A,displayValue:E,exportValue:w}=v.detail.insert,T=a.children[A],R=document.createElement("option");R.textContent=E,R.value=w,T?T.before(R):a.append(R),t.setValue(e,{value:d(!0),items:p(v)}),f=d(!1)},items(v){const{items:A}=v.detail;for(;a.length!==0;)a.remove(0);for(const E of A){const{displayValue:w,exportValue:T}=E,R=document.createElement("option");R.textContent=w,R.value=T,a.append(R)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:d(!0),items:p(v)}),f=d(!1)},indices(v){const A=new Set(v.detail.indices);for(const E of v.target.options)E.selected=A.has(E.index);t.setValue(e,{value:d(!0)}),f=d(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(b,m)}),a.addEventListener("input",m=>{var A;const b=d(!0),v=d(!1);t.setValue(e,{value:b}),m.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,change:v,changeEx:b,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):a.addEventListener("input",function(m){t.setValue(e,{value:d(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class yv extends xe{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:xe._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new TN({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${oA}${n}`).join(",")),this.container}}var fu,Rm,Mm,pu,gu,Ae,ma,mu,of,cf,yu,ya,Gn,ba,uf,va,hf,to,eo,se,Ig,bv,mx,yx,bx,vx,jg,Gg,vv;class TN{constructor({container:t,color:e,elements:n,titleObj:a,modificationDate:l,contentsObj:o,richText:d,parent:f,rect:p,parentRect:m,open:b}){x(this,se);x(this,fu,C(this,se,bx).bind(this));x(this,Rm,C(this,se,vv).bind(this));x(this,Mm,C(this,se,Gg).bind(this));x(this,pu,C(this,se,jg).bind(this));x(this,gu,null);x(this,Ae,null);x(this,ma,null);x(this,mu,null);x(this,of,null);x(this,cf,null);x(this,yu,null);x(this,ya,!1);x(this,Gn,null);x(this,ba,null);x(this,uf,null);x(this,va,null);x(this,hf,null);x(this,to,null);x(this,eo,!1);var v;S(this,Ae,t),S(this,hf,a),S(this,ma,o),S(this,va,d),S(this,cf,f),S(this,gu,e),S(this,uf,p),S(this,yu,m),S(this,of,n),S(this,mu,hA.toDateObject(l)),this.trigger=n.flatMap(A=>A.getElementsToTriggerPopup());for(const A of this.trigger)A.addEventListener("click",u(this,pu)),A.addEventListener("mouseenter",u(this,Mm)),A.addEventListener("mouseleave",u(this,Rm)),A.classList.add("popupTriggerArea");for(const A of n)(v=A.container)==null||v.addEventListener("keydown",u(this,fu));u(this,Ae).hidden=!0,b&&C(this,se,jg).call(this)}render(){if(u(this,Gn))return;const t=S(this,Gn,document.createElement("div"));if(t.className="popup",u(this,gu)){const l=t.style.outlineColor=ht.makeHexColor(...u(this,gu));t.style.backgroundColor=`color-mix(in srgb, ${l} 30%, white)`}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=u(this,hf),t.append(e),u(this,mu)){const l=document.createElement("span");l.classList.add("popupDate"),l.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),l.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,mu).valueOf()})),e.append(l)}const a=u(this,se,Ig);if(a)hx.render({xfaHtml:a,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const l=this._formatContents(u(this,ma));t.append(l)}u(this,Ae).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const a=t.split(/(?:\r\n?|\n)/);for(let l=0,o=a.length;l<o;++l){const d=a[l];n.append(document.createTextNode(d)),l<o-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;u(this,to)||S(this,to,{contentsObj:u(this,ma),richText:u(this,va)}),t&&S(this,ba,null),e&&(S(this,va,C(this,se,yx).call(this,e)),S(this,ma,null)),(n=u(this,Gn))==null||n.remove(),S(this,Gn,null)}resetEdited(){var t;u(this,to)&&({contentsObj:Ai(this,ma)._,richText:Ai(this,va)._}=u(this,to),S(this,to,null),(t=u(this,Gn))==null||t.remove(),S(this,Gn,null),S(this,ba,null))}forceHide(){S(this,eo,this.isVisible),u(this,eo)&&(u(this,Ae).hidden=!0)}maybeShow(){u(this,eo)&&(u(this,Gn)||C(this,se,Gg).call(this),S(this,eo,!1),u(this,Ae).hidden=!1)}get isVisible(){return u(this,Ae).hidden===!1}}fu=new WeakMap,Rm=new WeakMap,Mm=new WeakMap,pu=new WeakMap,gu=new WeakMap,Ae=new WeakMap,ma=new WeakMap,mu=new WeakMap,of=new WeakMap,cf=new WeakMap,yu=new WeakMap,ya=new WeakMap,Gn=new WeakMap,ba=new WeakMap,uf=new WeakMap,va=new WeakMap,hf=new WeakMap,to=new WeakMap,eo=new WeakMap,se=new WeakSet,Ig=function(){const t=u(this,va),e=u(this,ma);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&u(this,va).html||null},bv=function(){var t,e,n;return((n=(e=(t=u(this,se,Ig))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},mx=function(){var t,e,n;return((n=(e=(t=u(this,se,Ig))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},yx=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:u(this,se,mx),fontSize:u(this,se,bv)?`calc(${u(this,se,bv)}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))e.push({name:"span",value:l,attributes:a});return n},bx=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&u(this,ya))&&C(this,se,jg).call(this)},vx=function(){if(u(this,ba)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:a,pageY:l}}}=u(this,cf);let o=!!u(this,yu),d=o?u(this,yu):u(this,uf);for(const E of u(this,of))if(!d||ht.intersect(E.data.rect,d)!==null){d=E.data.rect,o=!0;break}const f=ht.normalizeRect([d[0],t[3]-d[1]+t[1],d[2],t[3]-d[3]+t[1]]),m=o?d[2]-d[0]+5:0,b=f[0]+m,v=f[1];S(this,ba,[100*(b-a)/e,100*(v-l)/n]);const{style:A}=u(this,Ae);A.left=`${u(this,ba)[0]}%`,A.top=`${u(this,ba)[1]}%`},jg=function(){S(this,ya,!u(this,ya)),u(this,ya)?(C(this,se,Gg).call(this),u(this,Ae).addEventListener("click",u(this,pu)),u(this,Ae).addEventListener("keydown",u(this,fu))):(C(this,se,vv).call(this),u(this,Ae).removeEventListener("click",u(this,pu)),u(this,Ae).removeEventListener("keydown",u(this,fu)))},Gg=function(){u(this,Gn)||this.render(),this.isVisible?u(this,ya)&&u(this,Ae).classList.add("focused"):(C(this,se,vx).call(this),u(this,Ae).hidden=!1,u(this,Ae).style.zIndex=parseInt(u(this,Ae).style.zIndex)+1e3)},vv=function(){u(this,Ae).classList.remove("focused"),!(u(this,ya)||!this.isVisible)&&(u(this,Ae).hidden=!0,u(this,Ae).style.zIndex=parseInt(u(this,Ae).style.zIndex)-1e3)};class Ax extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=wt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var df;class xN extends xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,df,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:a}=this,l=this.svgFactory.create(n,a,!0),o=S(this,df,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),l.append(o),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,df)}addHighlightArea(){this.container.classList.add("highlightArea")}}df=new WeakMap;var ff;class CN extends xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,ff,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:a}=this,l=this.svgFactory.create(n,a,!0),o=e.borderStyle.width,d=S(this,ff,this.svgFactory.createElement("svg:rect"));return d.setAttribute("x",o/2),d.setAttribute("y",o/2),d.setAttribute("width",n-o),d.setAttribute("height",a-o),d.setAttribute("stroke-width",o||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,ff)}addHighlightArea(){this.container.classList.add("highlightArea")}}ff=new WeakMap;var pf;class RN extends xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,pf,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:a}=this,l=this.svgFactory.create(n,a,!0),o=e.borderStyle.width,d=S(this,pf,this.svgFactory.createElement("svg:ellipse"));return d.setAttribute("cx",n/2),d.setAttribute("cy",a/2),d.setAttribute("rx",n/2-o/2),d.setAttribute("ry",a/2-o/2),d.setAttribute("stroke-width",o||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,pf)}addHighlightArea(){this.container.classList.add("highlightArea")}}pf=new WeakMap;var gf;class Sx extends xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,gf,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:a,popupRef:l},width:o,height:d}=this;if(!n)return this.container;const f=this.svgFactory.create(o,d,!0);let p=[];for(let b=0,v=n.length;b<v;b+=2){const A=n[b]-e[0],E=e[3]-n[b+1];p.push(`${A},${E}`)}p=p.join(" ");const m=S(this,gf,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",p),m.setAttribute("stroke-width",a.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),f.append(m),this.container.append(f),!l&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,gf)}addHighlightArea(){this.container.classList.add("highlightArea")}}gf=new WeakMap;class MN extends Sx{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class DN extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var mf,io,yf,Av;class yA extends xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,yf);x(this,mf,null);x(this,io,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?wt.HIGHLIGHT:wt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:a,borderStyle:l,popupRef:o}}=this,{transform:d,width:f,height:p}=C(this,yf,Av).call(this,n,e),m=this.svgFactory.create(f,p,!0),b=S(this,mf,this.svgFactory.createElement("svg:g"));m.append(b),b.setAttribute("stroke-width",l.width||1),b.setAttribute("stroke-linecap","round"),b.setAttribute("stroke-linejoin","round"),b.setAttribute("stroke-miterlimit",10),b.setAttribute("stroke","transparent"),b.setAttribute("fill","transparent"),b.setAttribute("transform",d);for(let v=0,A=a.length;v<A;v++){const E=this.svgFactory.createElement(this.svgElementName);u(this,io).push(E),E.setAttribute("points",a[v].join(",")),b.append(E)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:a,rect:l}=e,o=u(this,mf);if(n>=0&&o.setAttribute("stroke-width",n||1),a)for(let d=0,f=u(this,io).length;d<f;d++)u(this,io)[d].setAttribute("points",a[d].join(","));if(l){const{transform:d,width:f,height:p}=C(this,yf,Av).call(this,this.data.rotation,l);o.parentElement.setAttribute("viewBox",`0 0 ${f} ${p}`),o.setAttribute("transform",d)}}getElementsToTriggerPopup(){return u(this,io)}addHighlightArea(){this.container.classList.add("highlightArea")}}mf=new WeakMap,io=new WeakMap,yf=new WeakSet,Av=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class Ex extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=wt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class ON extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class LN extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class NN extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class wx extends xe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=wt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var bf,vf,Sv;class kN extends xe{constructor(e){var a;super(e,{isRenderable:!0});x(this,vf);x(this,bf,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(a=this.linkService.eventBus)==null||a.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let a;n.hasAppearance||n.fillAlpha===0?a=document.createElement("div"):(a=document.createElement("img"),a.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(a.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),a.addEventListener("dblclick",C(this,vf,Sv).bind(this)),S(this,bf,a);const{isMac:l}=oi.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(l?o.metaKey:o.ctrlKey)&&C(this,vf,Sv).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():a.classList.add("popupTriggerArea"),e.append(a),e}getElementsToTriggerPopup(){return u(this,bf)}addHighlightArea(){this.container.classList.add("highlightArea")}}bf=new WeakMap,vf=new WeakSet,Sv=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Af,no,Or,Sf,Wr,wv,_v;const _A=class _A{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:a,page:l,viewport:o,structTreeLayer:d}){x(this,Wr);x(this,Af,null);x(this,no,null);x(this,Or,new Map);x(this,Sf,null);this.div=t,S(this,Af,e),S(this,no,n),S(this,Sf,d||null),this.page=l,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=a}hasEditableAnnotations(){return u(this,Or).size>0}async render(t){var o;const{annotations:e}=t,n=this.div;Ro(n,this.viewport);const a=new Map,l={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new hm,annotationStorage:t.annotationStorage||new pA,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const d of e){if(d.noHTML)continue;const f=d.annotationType===De.POPUP;if(f){const b=a.get(d.id);if(!b)continue;l.elements=b}else if(d.rect[2]===d.rect[0]||d.rect[3]===d.rect[1])continue;l.data=d;const p=p_.create(l);if(!p.isRenderable)continue;if(!f&&d.popupRef){const b=a.get(d.popupRef);b?b.push(p):a.set(d.popupRef,[p])}const m=p.render();d.hidden&&(m.style.visibility="hidden"),await C(this,Wr,wv).call(this,m,d.id),p._isEditable&&(u(this,Or).set(p.data.id,p),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(p))}C(this,Wr,_v).call(this)}async addLinkAnnotations(t,e){const n={data:null,layer:this.div,linkService:e,svgFactory:new hm,parent:this};for(const a of t){a.borderStyle||(a.borderStyle=_A._defaultBorderStyle),n.data=a;const l=p_.create(n);if(!l.isRenderable)continue;const o=l.render();await C(this,Wr,wv).call(this,o,a.id)}}update({viewport:t}){const e=this.div;this.viewport=t,Ro(e,{rotation:t.rotation}),C(this,Wr,_v).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(u(this,Or).values())}getEditableAnnotation(t){return u(this,Or).get(t)}static get _defaultBorderStyle(){return Bt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ac.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Af=new WeakMap,no=new WeakMap,Or=new WeakMap,Sf=new WeakMap,Wr=new WeakSet,wv=async function(t,e){var o,d;const n=t.firstChild||t,a=n.id=`${oA}${e}`,l=await((o=u(this,Sf))==null?void 0:o.getAriaAttributes(a));if(l)for(const[f,p]of l)n.setAttribute(f,p);this.div.append(t),(d=u(this,Af))==null||d.moveElementInDOM(this.div,t,n,!1)},_v=function(){var e;if(!u(this,no))return;const t=this.div;for(const[n,a]of u(this,no)){const l=t.querySelector(`[data-annotation-id="${n}"]`);if(!l)continue;a.className="annotationContent";const{firstChild:o}=l;o?o.nodeName==="CANVAS"?o.replaceWith(a):o.classList.contains("annotationContent")?o.after(a):o.before(a):l.append(a);const d=u(this,Or).get(n);d&&(d._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,l.id,a),d._hasNoCanvas=!1):d.canvas=a)}u(this,no).clear()};let Ev=_A;const Ag=/\r\n?|\n/g;var qn,nn,Ef,so,sn,Ne,_x,Tx,xx,qg,La,Vg,Xg,Cx,xv,Rx;const le=class le extends oe{constructor(e){super({...e,name:"freeTextEditor"});x(this,Ne);x(this,qn);x(this,nn,"");x(this,Ef,`${this.id}-editor`);x(this,so,null);x(this,sn);S(this,qn,e.color||le._defaultColor||oe._defaultLineColor),S(this,sn,e.fontSize||le._defaultFontSize)}static get _keyboardManager(){const e=le.prototype,n=o=>o.isEmpty(),a=Mo.TRANSLATE_SMALL,l=Mo.TRANSLATE_BIG;return Bt(this,"_keyboardManager",new Wf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-l,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[l,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-l],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,l],checker:n}]]))}static initialize(e,n){oe.initialize(e,n);const a=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(a.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Ut.FREETEXT_SIZE:le._defaultFontSize=n;break;case Ut.FREETEXT_COLOR:le._defaultColor=n;break}}updateParams(e,n){switch(e){case Ut.FREETEXT_SIZE:C(this,Ne,_x).call(this,n);break;case Ut.FREETEXT_COLOR:C(this,Ne,Tx).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ut.FREETEXT_SIZE,le._defaultFontSize],[Ut.FREETEXT_COLOR,le._defaultColor||oe._defaultLineColor]]}get propertiesToUpdate(){return[[Ut.FREETEXT_SIZE,u(this,sn)],[Ut.FREETEXT_COLOR,u(this,qn)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-le._internalPadding*e,-(le._internalPadding+u(this,sn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(wt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,so,new AbortController);const e=this._uiManager.combinedSignal(u(this,so));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Ef)),this._isDraggable=!0,(e=u(this,so))==null||e.abort(),S(this,so,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=u(this,nn),n=S(this,nn,C(this,Ne,xx).call(this).trimEnd());if(e===n)return;const a=l=>{if(S(this,nn,l),!l){this.remove();return}C(this,Ne,Xg).call(this),this._uiManager.rebuild(this),C(this,Ne,qg).call(this)};this.addCommands({cmd:()=>{a(n)},undo:()=>{a(e)},mustExec:!1}),C(this,Ne,qg).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){le._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Ef)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:a}=this.editorDiv;if(a.fontSize=`calc(${u(this,sn)}px * var(--total-scale-factor))`,a.color=u(this,qn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),fA(this,this.div,["dblclick","keydown"]),this._isCopy||this.annotationElementId){const[l,o]=this.parentDimensions;if(this.annotationElementId){const{position:d}=this._initialData;let[f,p]=this.getInitialTranslation();[f,p]=this.pageTranslationToScreen(f,p);const[m,b]=this.pageDimensions,[v,A]=this.pageTranslation;let E,w;switch(this.rotation){case 0:E=e+(d[0]-v)/m,w=n+this.height-(d[1]-A)/b;break;case 90:E=e+(d[0]-v)/m,w=n-(d[1]-A)/b,[f,p]=[p,-f];break;case 180:E=e-this.width+(d[0]-v)/m,w=n-(d[1]-A)/b,[f,p]=[-f,-p];break;case 270:E=e+(d[0]-v-this.height*b)/m,w=n+(d[1]-A-this.width*m)/b,[f,p]=[-p,f];break}this.setAt(E*l,w*o,f,p)}else this._moveAfterPaste(e,n);C(this,Ne,Xg).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var E,w,T;const n=e.clipboardData||window.clipboardData,{types:a}=n;if(a.length===1&&a[0]==="text/plain")return;e.preventDefault();const l=C(E=le,La,xv).call(E,n.getData("text")||"").replaceAll(Ag,`
`);if(!l)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const d=o.getRangeAt(0);if(!l.includes(`
`)){d.insertNode(document.createTextNode(l)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:f,startOffset:p}=d,m=[],b=[];if(f.nodeType===Node.TEXT_NODE){const R=f.parentElement;if(b.push(f.nodeValue.slice(p).replaceAll(Ag,"")),R!==this.editorDiv){let O=m;for(const D of this.editorDiv.childNodes){if(D===R){O=b;continue}O.push(C(w=le,La,Vg).call(w,D))}}m.push(f.nodeValue.slice(0,p).replaceAll(Ag,""))}else if(f===this.editorDiv){let R=m,O=0;for(const D of this.editorDiv.childNodes)O++===p&&(R=b),R.push(C(T=le,La,Vg).call(T,D))}S(this,nn,`${m.join(`
`)}${l}${b.join(`
`)}`),C(this,Ne,Xg).call(this);const v=new Range;let A=Math.sumPrecise(m.map(R=>R.length));for(const{firstChild:R}of this.editorDiv.childNodes)if(R.nodeType===Node.TEXT_NODE){const O=R.nodeValue.length;if(A<=O){v.setStart(R,A),v.setEnd(R,A);break}A-=O}o.removeAllRanges(),o.addRange(v)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,a){var d;let l=null;if(e instanceof Ax){const{data:{defaultAppearanceData:{fontSize:f,fontColor:p},rect:m,rotation:b,id:v,popupRef:A},textContent:E,textPosition:w,parent:{page:{pageNumber:T}}}=e;if(!E||E.length===0)return null;l=e={annotationType:wt.FREETEXT,color:Array.from(p),fontSize:f,value:E.join(`
`),position:w,pageIndex:T-1,rect:m.slice(0),rotation:b,id:v,deleted:!1,popupRef:A}}const o=await super.deserialize(e,n,a);return S(o,sn,e.fontSize),S(o,qn,ht.makeHexColor(...e.color)),S(o,nn,C(d=le,La,xv).call(d,e.value)),o.annotationElementId=e.id||null,o._initialData=l,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=le._internalPadding*this.parentScale,a=this.getRect(n,n),l=oe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,qn)),o={annotationType:wt.FREETEXT,color:l,fontSize:u(this,sn),value:C(this,Ne,Cx).call(this),pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!C(this,Ne,Rx).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:a}=n;a.fontSize=`calc(${u(this,sn)}px * var(--total-scale-factor))`,a.color=u(this,qn),n.replaceChildren();for(const o of u(this,nn).split(`
`)){const d=document.createElement("div");d.append(o?document.createTextNode(o):document.createElement("br")),n.append(d)}const l=le._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(l,l),popupContent:u(this,nn)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};qn=new WeakMap,nn=new WeakMap,Ef=new WeakMap,so=new WeakMap,sn=new WeakMap,Ne=new WeakSet,_x=function(e){const n=l=>{this.editorDiv.style.fontSize=`calc(${l}px * var(--total-scale-factor))`,this.translate(0,-(l-u(this,sn))*this.parentScale),S(this,sn,l),C(this,Ne,qg).call(this)},a=u(this,sn);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ut.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Tx=function(e){const n=l=>{S(this,qn,this.editorDiv.style.color=l)},a=u(this,qn);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ut.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},xx=function(){var a;const e=[];this.editorDiv.normalize();let n=null;for(const l of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&l.nodeName==="BR"||(e.push(C(a=le,La,Vg).call(a,l)),n=l);return e.join(`
`)},qg=function(){const[e,n]=this.parentDimensions;let a;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{const{currentLayer:l,div:o}=this,d=o.style.display,f=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",l.div.append(this.div),a=o.getBoundingClientRect(),o.remove(),o.style.display=d,o.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=a.width/e,this.height=a.height/n):(this.width=a.height/e,this.height=a.width/n),this.fixAndSetPosition()},La=new WeakSet,Vg=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Ag,"")},Xg=function(){if(this.editorDiv.replaceChildren(),!!u(this,nn))for(const e of u(this,nn).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},Cx=function(){return u(this,nn).replaceAll(" "," ")},xv=function(e){return e.replaceAll(" "," ")},Rx=function(e){const{value:n,fontSize:a,color:l,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==a||e.color.some((d,f)=>d!==l[f])||e.pageIndex!==o},x(le,La),et(le,"_freeTextDefaultContent",""),et(le,"_internalPadding",0),et(le,"_defaultColor",null),et(le,"_defaultFontSize",10),et(le,"_type","freetext"),et(le,"_editorType",wt.FREETEXT);let Tv=le;class lt{toSVGPath(){ne("Abstract method `toSVGPath` must be implemented.")}get box(){ne("Abstract getter `box` must be implemented.")}serialize(t,e){ne("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,a,l,o){o||(o=new Float32Array(t.length));for(let d=0,f=t.length;d<f;d+=2)o[d]=e+t[d]*a,o[d+1]=n+t[d+1]*l;return o}static _rescaleAndSwap(t,e,n,a,l,o){o||(o=new Float32Array(t.length));for(let d=0,f=t.length;d<f;d+=2)o[d]=e+t[d+1]*a,o[d+1]=n+t[d]*l;return o}static _translate(t,e,n,a){a||(a=new Float32Array(t.length));for(let l=0,o=t.length;l<o;l+=2)a[l]=e+t[l],a[l+1]=n+t[l+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,a,l){switch(l){case 90:return[1-e/n,t/a];case 180:return[1-t/n,1-e/a];case 270:return[e/n,1-t/a];default:return[t/n,e/a]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,a,l,o){return[(t+5*n)/6,(e+5*a)/6,(5*n+l)/6,(5*a+o)/6,(n+l)/2,(a+o)/2]}}et(lt,"PRECISION",1e-4);var an,Vn,bu,vu,_s,Lt,ao,ro,wf,_f,Au,Su,Lr,Tf,Dm,Om,Fe,od,Mx,Dx,Ox,Lx,Nx,kx;const Js=class Js{constructor({x:t,y:e},n,a,l,o,d=0){x(this,Fe);x(this,an);x(this,Vn,[]);x(this,bu);x(this,vu);x(this,_s,[]);x(this,Lt,new Float32Array(18));x(this,ao);x(this,ro);x(this,wf);x(this,_f);x(this,Au);x(this,Su);x(this,Lr,[]);S(this,an,n),S(this,Su,l*a),S(this,vu,o),u(this,Lt).set([NaN,NaN,NaN,NaN,t,e],6),S(this,bu,d),S(this,_f,u(Js,Tf)*a),S(this,wf,u(Js,Om)*a),S(this,Au,a),u(this,Lr).push(t,e)}isEmpty(){return isNaN(u(this,Lt)[8])}add({x:t,y:e}){var J;S(this,ao,t),S(this,ro,e);const[n,a,l,o]=u(this,an);let[d,f,p,m]=u(this,Lt).subarray(8,12);const b=t-p,v=e-m,A=Math.hypot(b,v);if(A<u(this,wf))return!1;const E=A-u(this,_f),w=E/A,T=w*b,R=w*v;let O=d,D=f;d=p,f=m,p+=T,m+=R,(J=u(this,Lr))==null||J.push(t,e);const k=-R/E,L=T/E,U=k*u(this,Su),F=L*u(this,Su);return u(this,Lt).set(u(this,Lt).subarray(2,8),0),u(this,Lt).set([p+U,m+F],4),u(this,Lt).set(u(this,Lt).subarray(14,18),12),u(this,Lt).set([p-U,m-F],16),isNaN(u(this,Lt)[6])?(u(this,_s).length===0&&(u(this,Lt).set([d+U,f+F],2),u(this,_s).push(NaN,NaN,NaN,NaN,(d+U-n)/l,(f+F-a)/o),u(this,Lt).set([d-U,f-F],14),u(this,Vn).push(NaN,NaN,NaN,NaN,(d-U-n)/l,(f-F-a)/o)),u(this,Lt).set([O,D,d,f,p,m],6),!this.isEmpty()):(u(this,Lt).set([O,D,d,f,p,m],6),Math.abs(Math.atan2(D-f,O-d)-Math.atan2(R,T))<Math.PI/2?([d,f,p,m]=u(this,Lt).subarray(2,6),u(this,_s).push(NaN,NaN,NaN,NaN,((d+p)/2-n)/l,((f+m)/2-a)/o),[d,f,O,D]=u(this,Lt).subarray(14,18),u(this,Vn).push(NaN,NaN,NaN,NaN,((O+d)/2-n)/l,((D+f)/2-a)/o),!0):([O,D,d,f,p,m]=u(this,Lt).subarray(0,6),u(this,_s).push(((O+5*d)/6-n)/l,((D+5*f)/6-a)/o,((5*d+p)/6-n)/l,((5*f+m)/6-a)/o,((d+p)/2-n)/l,((f+m)/2-a)/o),[p,m,d,f,O,D]=u(this,Lt).subarray(12,18),u(this,Vn).push(((O+5*d)/6-n)/l,((D+5*f)/6-a)/o,((5*d+p)/6-n)/l,((5*f+m)/6-a)/o,((d+p)/2-n)/l,((f+m)/2-a)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=u(this,_s),e=u(this,Vn);if(isNaN(u(this,Lt)[6])&&!this.isEmpty())return C(this,Fe,Mx).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?n.push(`L${t[a+4]} ${t[a+5]}`):n.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);C(this,Fe,Ox).call(this,n);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?n.push(`L${e[a+4]} ${e[a+5]}`):n.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return C(this,Fe,Dx).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,a,l,o){return new Px(t,e,n,a,l,o)}getOutlines(){var b;const t=u(this,_s),e=u(this,Vn),n=u(this,Lt),[a,l,o,d]=u(this,an),f=new Float32Array((((b=u(this,Lr))==null?void 0:b.length)??0)+2);for(let v=0,A=f.length-2;v<A;v+=2)f[v]=(u(this,Lr)[v]-a)/o,f[v+1]=(u(this,Lr)[v+1]-l)/d;if(f[f.length-2]=(u(this,ao)-a)/o,f[f.length-1]=(u(this,ro)-l)/d,isNaN(n[6])&&!this.isEmpty())return C(this,Fe,Lx).call(this,f);const p=new Float32Array(u(this,_s).length+24+u(this,Vn).length);let m=t.length;for(let v=0;v<m;v+=2){if(isNaN(t[v])){p[v]=p[v+1]=NaN;continue}p[v]=t[v],p[v+1]=t[v+1]}m=C(this,Fe,kx).call(this,p,m);for(let v=e.length-6;v>=6;v-=6)for(let A=0;A<6;A+=2){if(isNaN(e[v+A])){p[m]=p[m+1]=NaN,m+=2;continue}p[m]=e[v+A],p[m+1]=e[v+A+1],m+=2}return C(this,Fe,Nx).call(this,p,m),this.newFreeDrawOutline(p,f,u(this,an),u(this,Au),u(this,bu),u(this,vu))}};an=new WeakMap,Vn=new WeakMap,bu=new WeakMap,vu=new WeakMap,_s=new WeakMap,Lt=new WeakMap,ao=new WeakMap,ro=new WeakMap,wf=new WeakMap,_f=new WeakMap,Au=new WeakMap,Su=new WeakMap,Lr=new WeakMap,Tf=new WeakMap,Dm=new WeakMap,Om=new WeakMap,Fe=new WeakSet,od=function(){const t=u(this,Lt).subarray(4,6),e=u(this,Lt).subarray(16,18),[n,a,l,o]=u(this,an);return[(u(this,ao)+(t[0]-e[0])/2-n)/l,(u(this,ro)+(t[1]-e[1])/2-a)/o,(u(this,ao)+(e[0]-t[0])/2-n)/l,(u(this,ro)+(e[1]-t[1])/2-a)/o]},Mx=function(){const[t,e,n,a]=u(this,an),[l,o,d,f]=C(this,Fe,od).call(this);return`M${(u(this,Lt)[2]-t)/n} ${(u(this,Lt)[3]-e)/a} L${(u(this,Lt)[4]-t)/n} ${(u(this,Lt)[5]-e)/a} L${l} ${o} L${d} ${f} L${(u(this,Lt)[16]-t)/n} ${(u(this,Lt)[17]-e)/a} L${(u(this,Lt)[14]-t)/n} ${(u(this,Lt)[15]-e)/a} Z`},Dx=function(t){const e=u(this,Vn);t.push(`L${e[4]} ${e[5]} Z`)},Ox=function(t){const[e,n,a,l]=u(this,an),o=u(this,Lt).subarray(4,6),d=u(this,Lt).subarray(16,18),[f,p,m,b]=C(this,Fe,od).call(this);t.push(`L${(o[0]-e)/a} ${(o[1]-n)/l} L${f} ${p} L${m} ${b} L${(d[0]-e)/a} ${(d[1]-n)/l}`)},Lx=function(t){const e=u(this,Lt),[n,a,l,o]=u(this,an),[d,f,p,m]=C(this,Fe,od).call(this),b=new Float32Array(36);return b.set([NaN,NaN,NaN,NaN,(e[2]-n)/l,(e[3]-a)/o,NaN,NaN,NaN,NaN,(e[4]-n)/l,(e[5]-a)/o,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(e[16]-n)/l,(e[17]-a)/o,NaN,NaN,NaN,NaN,(e[14]-n)/l,(e[15]-a)/o],0),this.newFreeDrawOutline(b,t,u(this,an),u(this,Au),u(this,bu),u(this,vu))},Nx=function(t,e){const n=u(this,Vn);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},kx=function(t,e){const n=u(this,Lt).subarray(4,6),a=u(this,Lt).subarray(16,18),[l,o,d,f]=u(this,an),[p,m,b,v]=C(this,Fe,od).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-l)/d,(n[1]-o)/f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,b,v,NaN,NaN,NaN,NaN,(a[0]-l)/d,(a[1]-o)/f],e),e+=24},x(Js,Tf,8),x(Js,Dm,2),x(Js,Om,u(Js,Tf)+u(Js,Dm));let dm=Js;var Eu,lo,Aa,xf,rn,Cf,Te,Lm,Bx;class Px extends lt{constructor(e,n,a,l,o,d){super();x(this,Lm);x(this,Eu);x(this,lo,new Float32Array(4));x(this,Aa);x(this,xf);x(this,rn);x(this,Cf);x(this,Te);S(this,Te,e),S(this,rn,n),S(this,Eu,a),S(this,Cf,l),S(this,Aa,o),S(this,xf,d),this.lastPoint=[NaN,NaN],C(this,Lm,Bx).call(this,d);const[f,p,m,b]=u(this,lo);for(let v=0,A=e.length;v<A;v+=2)e[v]=(e[v]-f)/m,e[v+1]=(e[v+1]-p)/b;for(let v=0,A=n.length;v<A;v+=2)n[v]=(n[v]-f)/m,n[v+1]=(n[v+1]-p)/b}toSVGPath(){const e=[`M${u(this,Te)[4]} ${u(this,Te)[5]}`];for(let n=6,a=u(this,Te).length;n<a;n+=6){if(isNaN(u(this,Te)[n])){e.push(`L${u(this,Te)[n+4]} ${u(this,Te)[n+5]}`);continue}e.push(`C${u(this,Te)[n]} ${u(this,Te)[n+1]} ${u(this,Te)[n+2]} ${u(this,Te)[n+3]} ${u(this,Te)[n+4]} ${u(this,Te)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,a,l],o){const d=a-e,f=l-n;let p,m;switch(o){case 0:p=lt._rescale(u(this,Te),e,l,d,-f),m=lt._rescale(u(this,rn),e,l,d,-f);break;case 90:p=lt._rescaleAndSwap(u(this,Te),e,n,d,f),m=lt._rescaleAndSwap(u(this,rn),e,n,d,f);break;case 180:p=lt._rescale(u(this,Te),a,n,-d,f),m=lt._rescale(u(this,rn),a,n,-d,f);break;case 270:p=lt._rescaleAndSwap(u(this,Te),a,l,-d,-f),m=lt._rescaleAndSwap(u(this,rn),a,l,-d,-f);break}return{outline:Array.from(p),points:[Array.from(m)]}}get box(){return u(this,lo)}newOutliner(e,n,a,l,o,d=0){return new dm(e,n,a,l,o,d)}getNewOutline(e,n){const[a,l,o,d]=u(this,lo),[f,p,m,b]=u(this,Eu),v=o*m,A=d*b,E=a*m+f,w=l*b+p,T=this.newOutliner({x:u(this,rn)[0]*v+E,y:u(this,rn)[1]*A+w},u(this,Eu),u(this,Cf),e,u(this,xf),n??u(this,Aa));for(let R=2;R<u(this,rn).length;R+=2)T.add({x:u(this,rn)[R]*v+E,y:u(this,rn)[R+1]*A+w});return T.getOutlines()}}Eu=new WeakMap,lo=new WeakMap,Aa=new WeakMap,xf=new WeakMap,rn=new WeakMap,Cf=new WeakMap,Te=new WeakMap,Lm=new WeakSet,Bx=function(e){const n=u(this,Te);let a=n[4],l=n[5];const o=[a,l,a,l];let d=a,f=l;const p=e?Math.max:Math.min;for(let b=6,v=n.length;b<v;b+=6){const A=n[b+4],E=n[b+5];if(isNaN(n[b]))ht.pointBoundingBox(A,E,o),f<E?(d=A,f=E):f===E&&(d=p(d,A));else{const w=[1/0,1/0,-1/0,-1/0];ht.bezierBoundingBox(a,l,...n.slice(b,b+6),w),ht.rectBoundingBox(...w,o),f<w[3]?(d=w[2],f=w[3]):f===w[3]&&(d=p(d,w[2]))}a=A,l=E}const m=u(this,lo);m[0]=o[0]-u(this,Aa),m[1]=o[1]-u(this,Aa),m[2]=o[2]-o[0]+2*u(this,Aa),m[3]=o[3]-o[1]+2*u(this,Aa),this.lastPoint=[d,f]};var Rf,Mf,Nr,Xn,Ri,zx,Yg,Hx,Ux,Rv;class Cv{constructor(t,e=0,n=0,a=!0){x(this,Ri);x(this,Rf);x(this,Mf);x(this,Nr,[]);x(this,Xn,[]);const l=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:A,y:E,width:w,height:T}of t){const R=Math.floor((A-e)/o)*o,O=Math.ceil((A+w+e)/o)*o,D=Math.floor((E-e)/o)*o,k=Math.ceil((E+T+e)/o)*o,L=[R,D,k,!0],U=[O,D,k,!1];u(this,Nr).push(L,U),ht.rectBoundingBox(R,D,O,k,l)}const d=l[2]-l[0]+2*n,f=l[3]-l[1]+2*n,p=l[0]-n,m=l[1]-n,b=u(this,Nr).at(a?-1:-2),v=[b[0],b[2]];for(const A of u(this,Nr)){const[E,w,T]=A;A[0]=(E-p)/d,A[1]=(w-m)/f,A[2]=(T-m)/f}S(this,Rf,new Float32Array([p,m,d,f])),S(this,Mf,v)}getOutlines(){u(this,Nr).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of u(this,Nr))e[3]?(t.push(...C(this,Ri,Rv).call(this,e)),C(this,Ri,Hx).call(this,e)):(C(this,Ri,Ux).call(this,e),t.push(...C(this,Ri,Rv).call(this,e)));return C(this,Ri,zx).call(this,t)}}Rf=new WeakMap,Mf=new WeakMap,Nr=new WeakMap,Xn=new WeakMap,Ri=new WeakSet,zx=function(t){const e=[],n=new Set;for(const o of t){const[d,f,p]=o;e.push([d,f,o],[d,p,o])}e.sort((o,d)=>o[1]-d[1]||o[0]-d[0]);for(let o=0,d=e.length;o<d;o+=2){const f=e[o][2],p=e[o+1][2];f.push(p),p.push(f),n.add(f),n.add(p)}const a=[];let l;for(;n.size>0;){const o=n.values().next().value;let[d,f,p,m,b]=o;n.delete(o);let v=d,A=f;for(l=[d,p],a.push(l);;){let E;if(n.has(m))E=m;else if(n.has(b))E=b;else break;n.delete(E),[d,f,p,m,b]=E,v!==d&&(l.push(v,A,d,A===f?f:p),v=d),A=A===f?p:f}l.push(v,A)}return new PN(a,u(this,Rf),u(this,Mf))},Yg=function(t){const e=u(this,Xn);let n=0,a=e.length-1;for(;n<=a;){const l=n+a>>1,o=e[l][0];if(o===t)return l;o<t?n=l+1:a=l-1}return a+1},Hx=function([,t,e]){const n=C(this,Ri,Yg).call(this,t);u(this,Xn).splice(n,0,[t,e])},Ux=function([,t,e]){const n=C(this,Ri,Yg).call(this,t);for(let a=n;a<u(this,Xn).length;a++){const[l,o]=u(this,Xn)[a];if(l!==t)break;if(l===t&&o===e){u(this,Xn).splice(a,1);return}}for(let a=n-1;a>=0;a--){const[l,o]=u(this,Xn)[a];if(l!==t)break;if(l===t&&o===e){u(this,Xn).splice(a,1);return}}},Rv=function(t){const[e,n,a]=t,l=[[e,n,a]],o=C(this,Ri,Yg).call(this,a);for(let d=0;d<o;d++){const[f,p]=u(this,Xn)[d];for(let m=0,b=l.length;m<b;m++){const[,v,A]=l[m];if(!(p<=v||A<=f)){if(v>=f){if(A>p)l[m][1]=p;else{if(b===1)return[];l.splice(m,1),m--,b--}continue}l[m][2]=f,A>p&&l.push([e,p,A])}}}return l};var Df,wu;class PN extends lt{constructor(e,n,a){super();x(this,Df);x(this,wu);S(this,wu,e),S(this,Df,n),this.lastPoint=a}toSVGPath(){const e=[];for(const n of u(this,wu)){let[a,l]=n;e.push(`M${a} ${l}`);for(let o=2;o<n.length;o+=2){const d=n[o],f=n[o+1];d===a?(e.push(`V${f}`),l=f):f===l&&(e.push(`H${d}`),a=d)}e.push("Z")}return e.join(" ")}serialize([e,n,a,l],o){const d=[],f=a-e,p=l-n;for(const m of u(this,wu)){const b=new Array(m.length);for(let v=0;v<m.length;v+=2)b[v]=e+m[v]*f,b[v+1]=l-m[v+1]*p;d.push(b)}return d}get box(){return u(this,Df)}get classNamesForOutlining(){return["highlightOutline"]}}Df=new WeakMap,wu=new WeakMap;class Mv extends dm{newFreeDrawOutline(t,e,n,a,l,o){return new BN(t,e,n,a,l,o)}}class BN extends Px{newOutliner(t,e,n,a,l,o=0){return new Mv(t,e,n,a,l,o)}}var Yn,oo,_u,Ue,Of,Tu,Lf,Nf,kr,$n,xu,kf,ie,Dv,Ov,Lv,ml,Fx,or;const Pi=class Pi{constructor({editor:t=null,uiManager:e=null}){x(this,ie);x(this,Yn,null);x(this,oo,null);x(this,_u);x(this,Ue,null);x(this,Of,!1);x(this,Tu,!1);x(this,Lf,null);x(this,Nf);x(this,kr,null);x(this,$n,null);x(this,xu);var n;t?(S(this,Tu,!1),S(this,xu,Ut.HIGHLIGHT_COLOR),S(this,Lf,t)):(S(this,Tu,!0),S(this,xu,Ut.HIGHLIGHT_DEFAULT_COLOR)),S(this,$n,(t==null?void 0:t._uiManager)||e),S(this,Nf,u(this,$n)._eventBus),S(this,_u,(t==null?void 0:t.color)||((n=u(this,$n))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),u(Pi,kf)||S(Pi,kf,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Bt(this,"_keyboardManager",new Wf([[["Escape","mac+Escape"],Pi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Pi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Pi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Pi.prototype._moveToPrevious],[["Home","mac+Home"],Pi.prototype._moveToBeginning],[["End","mac+End"],Pi.prototype._moveToEnd]]))}renderButton(){const t=S(this,Yn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=u(this,$n)._signal;t.addEventListener("click",C(this,ie,ml).bind(this),{signal:e}),t.addEventListener("keydown",C(this,ie,Lv).bind(this),{signal:e});const n=S(this,oo,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=u(this,_u),t.append(n),t}renderMainDropdown(){const t=S(this,Ue,C(this,ie,Dv).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===u(this,Yn)){C(this,ie,ml).call(this,t);return}const e=t.target.getAttribute("data-color");e&&C(this,ie,Ov).call(this,e,t)}_moveToNext(t){var e,n;if(!u(this,ie,or)){C(this,ie,ml).call(this,t);return}if(t.target===u(this,Yn)){(e=u(this,Ue).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=u(this,Ue))==null?void 0:e.firstChild)||t.target===u(this,Yn)){u(this,ie,or)&&this._hideDropdownFromKeyboard();return}u(this,ie,or)||C(this,ie,ml).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!u(this,ie,or)){C(this,ie,ml).call(this,t);return}(e=u(this,Ue).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!u(this,ie,or)){C(this,ie,ml).call(this,t);return}(e=u(this,Ue).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=u(this,Ue))==null||t.classList.add("hidden"),(e=u(this,kr))==null||e.abort(),S(this,kr,null)}_hideDropdownFromKeyboard(){var t;if(!u(this,Tu)){if(!u(this,ie,or)){(t=u(this,Lf))==null||t.unselect();return}this.hideDropdown(),u(this,Yn).focus({preventScroll:!0,focusVisible:u(this,Of)})}}updateColor(t){if(u(this,oo)&&(u(this,oo).style.backgroundColor=t),!u(this,Ue))return;const e=u(this,$n).highlightColors.values();for(const n of u(this,Ue).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=u(this,Yn))==null||t.remove(),S(this,Yn,null),S(this,oo,null),(e=u(this,Ue))==null||e.remove(),S(this,Ue,null)}};Yn=new WeakMap,oo=new WeakMap,_u=new WeakMap,Ue=new WeakMap,Of=new WeakMap,Tu=new WeakMap,Lf=new WeakMap,Nf=new WeakMap,kr=new WeakMap,$n=new WeakMap,xu=new WeakMap,kf=new WeakMap,ie=new WeakSet,Dv=function(){const t=document.createElement("div"),e=u(this,$n)._signal;t.addEventListener("contextmenu",Jn,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,a]of u(this,$n).highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",a),l.title=n,l.setAttribute("data-l10n-id",u(Pi,kf)[n]);const o=document.createElement("span");l.append(o),o.className="swatch",o.style.backgroundColor=a,l.setAttribute("aria-selected",a===u(this,_u)),l.addEventListener("click",C(this,ie,Ov).bind(this,a),{signal:e}),t.append(l)}return t.addEventListener("keydown",C(this,ie,Lv).bind(this),{signal:e}),t},Ov=function(t,e){e.stopPropagation(),u(this,Nf).dispatch("switchannotationeditorparams",{source:this,type:u(this,xu),value:t})},Lv=function(t){Pi._keyboardManager.exec(this,t)},ml=function(t){if(u(this,ie,or)){this.hideDropdown();return}if(S(this,Of,t.detail===0),u(this,kr)||(S(this,kr,new AbortController),window.addEventListener("pointerdown",C(this,ie,Fx).bind(this),{signal:u(this,$n).combinedSignal(u(this,kr))})),u(this,Ue)){u(this,Ue).classList.remove("hidden");return}const e=S(this,Ue,C(this,ie,Dv).call(this));u(this,Yn).append(e)},Fx=function(t){var e;(e=u(this,Ue))!=null&&e.contains(t.target)||this.hideDropdown()},or=function(){return u(this,Ue)&&!u(this,Ue).classList.contains("hidden")},x(Pi,kf,null);let fm=Pi;var Cu,Pf,Sa,co,Ru,Hi,Bf,zf,uo,Dn,ln,ni,Mu,Ea,mi,Du,On,Hf,xt,Nv,$g,Ix,jx,Gx,kv,yl,kn,xc,qx,Kg,cd,Vx,Xx,Yx,$x,Kx;const Xt=class Xt extends oe{constructor(e){super({...e,name:"highlightEditor"});x(this,xt);x(this,Cu,null);x(this,Pf,0);x(this,Sa);x(this,co,null);x(this,Ru,null);x(this,Hi,null);x(this,Bf,null);x(this,zf,0);x(this,uo,null);x(this,Dn,null);x(this,ln,null);x(this,ni,!1);x(this,Mu,null);x(this,Ea);x(this,mi,null);x(this,Du,"");x(this,On);x(this,Hf,"");this.color=e.color||Xt._defaultColor,S(this,On,e.thickness||Xt._defaultThickness),S(this,Ea,e.opacity||Xt._defaultOpacity),S(this,Sa,e.boxes||null),S(this,Hf,e.methodOfCreation||""),S(this,Du,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(S(this,ni,!0),C(this,xt,$g).call(this,e),C(this,xt,yl).call(this)):u(this,Sa)&&(S(this,Cu,e.anchorNode),S(this,Pf,e.anchorOffset),S(this,Bf,e.focusNode),S(this,zf,e.focusOffset),C(this,xt,Nv).call(this),C(this,xt,yl).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Xt.prototype;return Bt(this,"_keyboardManager",new Wf([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,ni)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:u(this,On),methodOfCreation:u(this,Hf)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var a;oe.initialize(e,n),Xt._defaultColor||(Xt._defaultColor=((a=n.highlightColors)==null?void 0:a.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Ut.HIGHLIGHT_DEFAULT_COLOR:Xt._defaultColor=n;break;case Ut.HIGHLIGHT_THICKNESS:Xt._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return u(this,Mu)}updateParams(e,n){switch(e){case Ut.HIGHLIGHT_COLOR:C(this,xt,Ix).call(this,n);break;case Ut.HIGHLIGHT_THICKNESS:C(this,xt,jx).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ut.HIGHLIGHT_DEFAULT_COLOR,Xt._defaultColor],[Ut.HIGHLIGHT_THICKNESS,Xt._defaultThickness]]}get propertiesToUpdate(){return[[Ut.HIGHLIGHT_COLOR,this.color||Xt._defaultColor],[Ut.HIGHLIGHT_THICKNESS,u(this,On)||Xt._defaultThickness],[Ut.HIGHLIGHT_FREE,u(this,ni)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(S(this,Ru,new fm({editor:this})),e.addColorPicker(u(this,Ru))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,xt,cd).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,C(this,xt,cd).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){C(this,xt,kv).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,xt,yl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let n=!1;this.parent&&!e?C(this,xt,kv).call(this):e&&(C(this,xt,yl).call(this,e),n=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var l,o,d;const{drawLayer:n}=this.parent;let a;u(this,ni)?(e=(e-this.rotation+360)%360,a=C(l=Xt,kn,xc).call(l,u(this,Dn).box,e)):a=C(o=Xt,kn,xc).call(o,[this.x,this.y,this.width,this.height],e),n.updateProperties(u(this,ln),{bbox:a,root:{"data-main-rotation":e}}),n.updateProperties(u(this,mi),{bbox:C(d=Xt,kn,xc).call(d,u(this,Hi).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();u(this,Du)&&(e.setAttribute("aria-label",u(this,Du)),e.setAttribute("role","mark")),u(this,ni)?e.classList.add("free"):this.div.addEventListener("keydown",C(this,xt,qx).bind(this),{signal:this._uiManager._signal});const n=S(this,uo,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=u(this,co);const[a,l]=this.parentDimensions;return this.setDims(this.width*a,this.height*l),fA(this,u(this,uo),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(u(this,mi),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(u(this,mi),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:C(this,xt,Kg).call(this,!0);break;case 1:case 3:C(this,xt,Kg).call(this,!1);break}}select(){var e;super.select(),u(this,mi)&&((e=this.parent)==null||e.drawLayer.updateProperties(u(this,mi),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),u(this,mi)&&((e=this.parent)==null||e.drawLayer.updateProperties(u(this,mi),{rootClass:{selected:!1}}),u(this,ni)||C(this,xt,Kg).call(this,!1))}get _mustFixPosition(){return!u(this,ni)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(u(this,ln),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(u(this,mi),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:a,x:l,y:o}){const{x:d,y:f,width:p,height:m}=a.getBoundingClientRect(),b=new AbortController,v=e.combinedSignal(b),A=E=>{b.abort(),C(this,kn,$x).call(this,e,E)};window.addEventListener("blur",A,{signal:v}),window.addEventListener("pointerup",A,{signal:v}),window.addEventListener("pointerdown",Oe,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Jn,{signal:v}),a.addEventListener("pointermove",C(this,kn,Yx).bind(this,e),{signal:v}),this._freeHighlight=new Mv({x:l,y:o},[d,f,p,m],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,a){var w,T,R,O;let l=null;if(e instanceof Ex){const{data:{quadPoints:D,rect:k,rotation:L,id:U,color:F,opacity:W,popupRef:J},parent:{page:{pageNumber:nt}}}=e;l=e={annotationType:wt.HIGHLIGHT,color:Array.from(F),opacity:W,quadPoints:D,boxes:null,pageIndex:nt-1,rect:k.slice(0),rotation:L,id:U,deleted:!1,popupRef:J}}else if(e instanceof yA){const{data:{inkLists:D,rect:k,rotation:L,id:U,color:F,borderStyle:{rawWidth:W},popupRef:J},parent:{page:{pageNumber:nt}}}=e;l=e={annotationType:wt.HIGHLIGHT,color:Array.from(F),thickness:W,inkLists:D,boxes:null,pageIndex:nt-1,rect:k.slice(0),rotation:L,id:U,deleted:!1,popupRef:J}}const{color:o,quadPoints:d,inkLists:f,opacity:p}=e,m=await super.deserialize(e,n,a);m.color=ht.makeHexColor(...o),S(m,Ea,p||1),f&&S(m,On,e.thickness),m.annotationElementId=e.id||null,m._initialData=l;const[b,v]=m.pageDimensions,[A,E]=m.pageTranslation;if(d){const D=S(m,Sa,[]);for(let k=0;k<d.length;k+=8)D.push({x:(d[k]-A)/b,y:1-(d[k+1]-E)/v,width:(d[k+2]-d[k])/b,height:(d[k+1]-d[k+5])/v});C(w=m,xt,Nv).call(w),C(T=m,xt,yl).call(T),m.rotate(m.rotation)}else if(f){S(m,ni,!0);const D=f[0],k={x:D[0]-A,y:v-(D[1]-E)},L=new Mv(k,[0,0,b,v],1,u(m,On)/2,!0,.001);for(let W=0,J=D.length;W<J;W+=2)k.x=D[W]-A,k.y=v-(D[W+1]-E),L.add(k);const{id:U,clipPathId:F}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:L.toSVGPath()}},!0,!0);C(R=m,xt,$g).call(R,{highlightOutlines:L.getOutlines(),highlightId:U,clipPathId:F}),C(O=m,xt,yl).call(O),m.rotate(m.parentRotation)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),a=oe._colorManager.convert(this.color),l={annotationType:wt.HIGHLIGHT,color:a,opacity:u(this,Ea),thickness:u(this,On),quadPoints:C(this,xt,Vx).call(this),outlines:C(this,xt,Xx).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:C(this,xt,cd).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!C(this,xt,Kx).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Cu=new WeakMap,Pf=new WeakMap,Sa=new WeakMap,co=new WeakMap,Ru=new WeakMap,Hi=new WeakMap,Bf=new WeakMap,zf=new WeakMap,uo=new WeakMap,Dn=new WeakMap,ln=new WeakMap,ni=new WeakMap,Mu=new WeakMap,Ea=new WeakMap,mi=new WeakMap,Du=new WeakMap,On=new WeakMap,Hf=new WeakMap,xt=new WeakSet,Nv=function(){const e=new Cv(u(this,Sa),.001);S(this,Dn,e.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,Dn).box;const n=new Cv(u(this,Sa),.0025,.001,this._uiManager.direction==="ltr");S(this,Hi,n.getOutlines());const{lastPoint:a}=u(this,Hi);S(this,Mu,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height])},$g=function({highlightOutlines:e,highlightId:n,clipPathId:a}){var b,v;if(S(this,Dn,e),S(this,Hi,e.getNewOutline(u(this,On)/2+1.5,.0025)),n>=0)S(this,ln,n),S(this,co,a),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),S(this,mi,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,Hi).box,path:{d:u(this,Hi).toSVGPath()}},!0));else if(this.parent){const A=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,ln),{bbox:C(b=Xt,kn,xc).call(b,u(this,Dn).box,(A-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,mi),{bbox:C(v=Xt,kn,xc).call(v,u(this,Hi).box,A),path:{d:u(this,Hi).toSVGPath()}})}const[o,d,f,p]=e.box;switch(this.rotation){case 0:this.x=o,this.y=d,this.width=f,this.height=p;break;case 90:{const[A,E]=this.parentDimensions;this.x=d,this.y=1-o,this.width=f*E/A,this.height=p*A/E;break}case 180:this.x=1-o,this.y=1-d,this.width=f,this.height=p;break;case 270:{const[A,E]=this.parentDimensions;this.x=1-d,this.y=o,this.width=f*E/A,this.height=p*A/E;break}}const{lastPoint:m}=u(this,Hi);S(this,Mu,[(m[0]-o)/f,(m[1]-d)/p])},Ix=function(e){const n=(o,d)=>{var f,p;this.color=o,S(this,Ea,d),(f=this.parent)==null||f.drawLayer.updateProperties(u(this,ln),{root:{fill:o,"fill-opacity":d}}),(p=u(this,Ru))==null||p.updateColor(o)},a=this.color,l=u(this,Ea);this.addCommands({cmd:n.bind(this,e,Xt._defaultOpacity),undo:n.bind(this,a,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ut.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},jx=function(e){const n=u(this,On),a=l=>{S(this,On,l),C(this,xt,Gx).call(this,l)};this.addCommands({cmd:a.bind(this,e),undo:a.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ut.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},Gx=function(e){if(!u(this,ni))return;C(this,xt,$g).call(this,{highlightOutlines:u(this,Dn).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,a]=this.parentDimensions;this.setDims(this.width*n,this.height*a)},kv=function(){u(this,ln)===null||!this.parent||(this.parent.drawLayer.remove(u(this,ln)),S(this,ln,null),this.parent.drawLayer.remove(u(this,mi)),S(this,mi,null))},yl=function(e=this.parent){u(this,ln)===null&&({id:Ai(this,ln)._,clipPathId:Ai(this,co)._}=e.drawLayer.draw({bbox:u(this,Dn).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":u(this,Ea)},rootClass:{highlight:!0,free:u(this,ni)},path:{d:u(this,Dn).toSVGPath()}},!1,!0),S(this,mi,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,ni)},bbox:u(this,Hi).box,path:{d:u(this,Hi).toSVGPath()}},u(this,ni))),u(this,uo)&&(u(this,uo).style.clipPath=u(this,co)))},kn=new WeakSet,xc=function([e,n,a,l],o){switch(o){case 90:return[1-n-l,e,l,a];case 180:return[1-e-a,1-n-l,a,l];case 270:return[n,1-e-a,l,a]}return[e,n,a,l]},qx=function(e){Xt._keyboardManager.exec(this,e)},Kg=function(e){if(!u(this,Cu))return;const n=window.getSelection();e?n.setPosition(u(this,Cu),u(this,Pf)):n.setPosition(u(this,Bf),u(this,zf))},cd=function(){return u(this,ni)?this.rotation:0},Vx=function(){if(u(this,ni))return null;const[e,n]=this.pageDimensions,[a,l]=this.pageTranslation,o=u(this,Sa),d=new Float32Array(o.length*8);let f=0;for(const{x:p,y:m,width:b,height:v}of o){const A=p*e+a,E=(1-m)*n+l;d[f]=d[f+4]=A,d[f+1]=d[f+3]=E,d[f+2]=d[f+6]=A+b*e,d[f+5]=d[f+7]=E-v*n,f+=8}return d},Xx=function(e){return u(this,Dn).serialize(e,C(this,xt,cd).call(this))},Yx=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},$x=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Kx=function(e){const{color:n}=this._initialData;return e.color.some((a,l)=>a!==n[l])},x(Xt,kn),et(Xt,"_defaultColor",null),et(Xt,"_defaultOpacity",1),et(Xt,"_defaultThickness",12),et(Xt,"_type","highlight"),et(Xt,"_editorType",wt.HIGHLIGHT),et(Xt,"_freeHighlightId",-1),et(Xt,"_freeHighlight",null),et(Xt,"_freeHighlightClipId","");let pm=Xt;var ho;class Wx{constructor(){x(this,ho,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){u(this,ho)[t]=e}toSVGProperties(){const t=u(this,ho);return S(this,ho,Object.create(null)),{root:t}}reset(){S(this,ho,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){ne("Not implemented")}}ho=new WeakMap;var on,Ou,Ye,fo,po,Pr,Br,zr,go,It,Pv,Bv,zv,ud,Qx,Wg,hd,Cc;const ot=class ot extends oe{constructor(e){super(e);x(this,It);x(this,on,null);x(this,Ou);et(this,"_drawId",null);S(this,Ou,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(C(this,It,Pv).call(this,e),C(this,It,ud).call(this))}static _mergeSVGProperties(e,n){const a=new Set(Object.keys(e));for(const[l,o]of Object.entries(n))a.has(l)?Object.assign(e[l],o):e[l]=o;return e}static getDefaultDrawingOptions(e){ne("Not implemented")}static get typesMap(){ne("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const a=this.typesMap.get(e);a&&this._defaultDrawingOptions.updateProperty(a,n),this._currentParent&&(u(ot,Ye).updateProperty(a,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const a=this.constructor.typesMap.get(e);a&&this._updateProperty(e,a,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[a,l]of this.typesMap)e.push([a,n[l]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[a,l]of this.constructor.typesMap)e.push([a,n[l]]);return e}_updateProperty(e,n,a){const l=this._drawingOptions,o=l[n],d=f=>{var m;l.updateProperty(n,f);const p=u(this,on).updateProperty(n,f);p&&C(this,It,hd).call(this,p),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,l.toSVGProperties())};this.addCommands({cmd:d.bind(this,a),undo:d.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ot._mergeSVGProperties(u(this,on).getPathResizingSVGProperties(C(this,It,Wg).call(this)),{bbox:C(this,It,Cc).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ot._mergeSVGProperties(u(this,on).getPathResizedSVGProperties(C(this,It,Wg).call(this)),{bbox:C(this,It,Cc).call(this)}))}_onTranslating(e,n){var a;(a=this.parent)==null||a.drawLayer.updateProperties(this._drawId,{bbox:C(this,It,Cc).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ot._mergeSVGProperties(u(this,on).getPathTranslatedSVGProperties(C(this,It,Wg).call(this),this.parentDimensions),{bbox:C(this,It,Cc).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,Ou)&&(S(this,Ou,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){C(this,It,zv).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,It,ud).call(this),C(this,It,hd).call(this,u(this,on).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),C(this,It,zv).call(this)):e&&(this._uiManager.addShouldRescale(this),C(this,It,ud).call(this,e),n=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ot._mergeSVGProperties({bbox:C(this,It,Cc).call(this)},u(this,on).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&C(this,It,hd).call(this,u(this,on).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const a=super.render();a.classList.add("draw");const l=document.createElement("div");a.append(l),l.setAttribute("aria-hidden","true"),l.className="internal";const[o,d]=this.parentDimensions;return this.setDims(this.width*o,this.height*d),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),a}static createDrawerInstance(e,n,a,l,o){ne("Not implemented")}static startDrawing(e,n,a,l){var T;const{target:o,offsetX:d,offsetY:f,pointerId:p,pointerType:m}=l;if(u(ot,Br)&&u(ot,Br)!==m)return;const{viewport:{rotation:b}}=e,{width:v,height:A}=o.getBoundingClientRect(),E=S(ot,fo,new AbortController),w=e.combinedSignal(E);if(u(ot,Pr)||S(ot,Pr,p),u(ot,Br)??S(ot,Br,m),window.addEventListener("pointerup",R=>{var O;u(ot,Pr)===R.pointerId?this._endDraw(R):(O=u(ot,zr))==null||O.delete(R.pointerId)},{signal:w}),window.addEventListener("pointercancel",R=>{var O;u(ot,Pr)===R.pointerId?this._currentParent.endDrawingSession():(O=u(ot,zr))==null||O.delete(R.pointerId)},{signal:w}),window.addEventListener("pointerdown",R=>{u(ot,Br)===R.pointerType&&((u(ot,zr)||S(ot,zr,new Set)).add(R.pointerId),u(ot,Ye).isCancellable()&&(u(ot,Ye).removeLastElement(),u(ot,Ye).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Jn,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",R=>{R.timeStamp===u(ot,go)&&Oe(R)},{signal:w}),e.toggleDrawing(),(T=n._editorUndoBar)==null||T.hide(),u(ot,Ye)){e.drawLayer.updateProperties(this._currentDrawId,u(ot,Ye).startNew(d,f,v,A,b));return}n.updateUIForDefaultProperties(this),S(ot,Ye,this.createDrawerInstance(d,f,v,A,b)),S(ot,po,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(u(ot,po).toSVGProperties(),u(ot,Ye).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(S(ot,go,-1),!u(ot,Ye))return;const{offsetX:n,offsetY:a,pointerId:l}=e;if(u(ot,Pr)===l){if(((o=u(ot,zr))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(ot,Ye).add(n,a)),S(ot,go,e.timeStamp),Oe(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,S(ot,Ye,null),S(ot,po,null),S(ot,Br,null),S(ot,go,NaN)),u(ot,fo)&&(u(ot,fo).abort(),S(ot,fo,null),S(ot,Pr,NaN),S(ot,zr,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,u(ot,Ye).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const a=u(ot,Ye),l=this._currentDrawId,o=a.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(l,a.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(l,a.removeLastElement())},mustExec:!1,type:Ut.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Ut.DRAW_STEP),!u(ot,Ye).isEmpty()){const{pageDimensions:[a,l],scale:o}=n,d=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(ot,Ye).getOutlines(a*o,l*o,o,this._INNER_MARGIN),drawingOptions:u(ot,po),mustBeCommitted:!e});return this._cleanup(!0),d}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,a,l,o,d){ne("Not implemented")}static async deserialize(e,n,a){var b,v;const{rawDims:{pageWidth:l,pageHeight:o,pageX:d,pageY:f}}=n.viewport,p=this.deserializeDraw(d,f,l,o,this._INNER_MARGIN,e),m=await super.deserialize(e,n,a);return m.createDrawingOptions(e),C(b=m,It,Pv).call(b,{drawOutlines:p}),C(v=m,It,ud).call(v),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[n,a]=this.pageTranslation,[l,o]=this.pageDimensions;return u(this,on).serialize([n,a,l,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};on=new WeakMap,Ou=new WeakMap,Ye=new WeakMap,fo=new WeakMap,po=new WeakMap,Pr=new WeakMap,Br=new WeakMap,zr=new WeakMap,go=new WeakMap,It=new WeakSet,Pv=function({drawOutlines:e,drawId:n,drawingOptions:a}){S(this,on,e),this._drawingOptions||(this._drawingOptions=a),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=C(this,It,Bv).call(this,e,this.parent),C(this,It,hd).call(this,e.box)},Bv=function(e,n){const{id:a}=n.drawLayer.draw(ot._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return a},zv=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},ud=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=C(this,It,Bv).call(this,u(this,on),e)}},Qx=function([e,n,a,l]){const{parentDimensions:[o,d],rotation:f}=this;switch(f){case 90:return[n,1-e,a*(d/o),l*(o/d)];case 180:return[1-e,1-n,a,l];case 270:return[1-n,e,a*(d/o),l*(o/d)];default:return[e,n,a,l]}},Wg=function(){const{x:e,y:n,width:a,height:l,parentDimensions:[o,d],rotation:f}=this;switch(f){case 90:return[1-n,e,a*(o/d),l*(d/o)];case 180:return[1-e,1-n,a,l];case 270:return[n,1-e,a*(o/d),l*(d/o)];default:return[e,n,a,l]}},hd=function(e){if([this.x,this.y,this.width,this.height]=C(this,It,Qx).call(this,e),this.div){this.fixAndSetPosition();const[n,a]=this.parentDimensions;this.setDims(this.width*n,this.height*a)}this._onResized()},Cc=function(){const{x:e,y:n,width:a,height:l,rotation:o,parentRotation:d,parentDimensions:[f,p]}=this;switch((o*4+d)/90){case 1:return[1-n-l,e,l,a];case 2:return[1-e-a,1-n-l,a,l];case 3:return[n,1-e-a,l,a];case 4:return[e,n-a*(f/p),l*(p/f),a*(f/p)];case 5:return[1-n,e,a*(f/p),l*(p/f)];case 6:return[1-e-l*(p/f),1-n,l*(p/f),a*(f/p)];case 7:return[n-a*(f/p),1-e-l*(p/f),a*(f/p),l*(p/f)];case 8:return[e-a,n-l,a,l];case 9:return[1-n,e-a,l,a];case 10:return[1-e,1-n,a,l];case 11:return[n-l,1-e,l,a];case 12:return[e-l*(p/f),n,l*(p/f),a*(f/p)];case 13:return[1-n-a*(f/p),e-l*(p/f),a*(f/p),l*(p/f)];case 14:return[1-e,1-n-a*(f/p),l*(p/f),a*(f/p)];case 15:return[n,1-e,a*(f/p),l*(p/f)];default:return[e,n,a,l]}},et(ot,"_currentDrawId",-1),et(ot,"_currentParent",null),x(ot,Ye,null),x(ot,fo,null),x(ot,po,null),x(ot,Pr,NaN),x(ot,Br,null),x(ot,zr,null),x(ot,go,NaN),et(ot,"_INNER_MARGIN",3);let gm=ot;var Ts,$e,Ke,mo,Lu,wi,si,Ln,yo,bo,vo,Nu,Qg;class zN{constructor(t,e,n,a,l,o){x(this,Nu);x(this,Ts,new Float64Array(6));x(this,$e);x(this,Ke);x(this,mo);x(this,Lu);x(this,wi);x(this,si,"");x(this,Ln,0);x(this,yo,new Jf);x(this,bo);x(this,vo);S(this,bo,n),S(this,vo,a),S(this,mo,l),S(this,Lu,o),[t,e]=C(this,Nu,Qg).call(this,t,e);const d=S(this,$e,[NaN,NaN,NaN,NaN,t,e]);S(this,wi,[t,e]),S(this,Ke,[{line:d,points:u(this,wi)}]),u(this,Ts).set(d,0)}updateProperty(t,e){t==="stroke-width"&&S(this,Lu,e)}isEmpty(){return!u(this,Ke)||u(this,Ke).length===0}isCancellable(){return u(this,wi).length<=10}add(t,e){[t,e]=C(this,Nu,Qg).call(this,t,e);const[n,a,l,o]=u(this,Ts).subarray(2,6),d=t-l,f=e-o;return Math.hypot(u(this,bo)*d,u(this,vo)*f)<=2?null:(u(this,wi).push(t,e),isNaN(n)?(u(this,Ts).set([l,o,t,e],2),u(this,$e).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(u(this,Ts)[0])&&u(this,$e).splice(6,6),u(this,Ts).set([n,a,l,o,t,e],0),u(this,$e).push(...lt.createBezierPoints(n,a,l,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(u(this,wi).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,a,l){S(this,bo,n),S(this,vo,a),S(this,mo,l),[t,e]=C(this,Nu,Qg).call(this,t,e);const o=S(this,$e,[NaN,NaN,NaN,NaN,t,e]);S(this,wi,[t,e]);const d=u(this,Ke).at(-1);return d&&(d.line=new Float32Array(d.line),d.points=new Float32Array(d.points)),u(this,Ke).push({line:o,points:u(this,wi)}),u(this,Ts).set(o,0),S(this,Ln,0),this.toSVGPath(),null}getLastElement(){return u(this,Ke).at(-1)}setLastElement(t){return u(this,Ke)?(u(this,Ke).push(t),S(this,$e,t.line),S(this,wi,t.points),S(this,Ln,0),{path:{d:this.toSVGPath()}}):u(this,yo).setLastElement(t)}removeLastElement(){if(!u(this,Ke))return u(this,yo).removeLastElement();u(this,Ke).pop(),S(this,si,"");for(let t=0,e=u(this,Ke).length;t<e;t++){const{line:n,points:a}=u(this,Ke)[t];S(this,$e,n),S(this,wi,a),S(this,Ln,0),this.toSVGPath()}return{path:{d:u(this,si)}}}toSVGPath(){const t=lt.svgRound(u(this,$e)[4]),e=lt.svgRound(u(this,$e)[5]);if(u(this,wi).length===2)return S(this,si,`${u(this,si)} M ${t} ${e} Z`),u(this,si);if(u(this,wi).length<=6){const a=u(this,si).lastIndexOf("M");S(this,si,`${u(this,si).slice(0,a)} M ${t} ${e}`),S(this,Ln,6)}if(u(this,wi).length===4){const a=lt.svgRound(u(this,$e)[10]),l=lt.svgRound(u(this,$e)[11]);return S(this,si,`${u(this,si)} L ${a} ${l}`),S(this,Ln,12),u(this,si)}const n=[];u(this,Ln)===0&&(n.push(`M ${t} ${e}`),S(this,Ln,6));for(let a=u(this,Ln),l=u(this,$e).length;a<l;a+=6){const[o,d,f,p,m,b]=u(this,$e).slice(a,a+6).map(lt.svgRound);n.push(`C${o} ${d} ${f} ${p} ${m} ${b}`)}return S(this,si,u(this,si)+n.join(" ")),S(this,Ln,u(this,$e).length),u(this,si)}getOutlines(t,e,n,a){const l=u(this,Ke).at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),u(this,yo).build(u(this,Ke),t,e,n,u(this,mo),u(this,Lu),a),S(this,Ts,null),S(this,$e,null),S(this,Ke,null),S(this,si,null),u(this,yo)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ts=new WeakMap,$e=new WeakMap,Ke=new WeakMap,mo=new WeakMap,Lu=new WeakMap,wi=new WeakMap,si=new WeakMap,Ln=new WeakMap,yo=new WeakMap,bo=new WeakMap,vo=new WeakMap,Nu=new WeakSet,Qg=function(t,e){return lt._normalizePoint(t,e,u(this,bo),u(this,vo),u(this,mo))};var _i,Uf,Ff,cn,xs,Cs,ku,Pu,Ao,ri,Qs,Zx,Jx,tC;class Jf extends lt{constructor(){super(...arguments);x(this,ri);x(this,_i);x(this,Uf,0);x(this,Ff);x(this,cn);x(this,xs);x(this,Cs);x(this,ku);x(this,Pu);x(this,Ao)}build(e,n,a,l,o,d,f){S(this,xs,n),S(this,Cs,a),S(this,ku,l),S(this,Pu,o),S(this,Ao,d),S(this,Ff,f??0),S(this,cn,e),C(this,ri,Jx).call(this)}get thickness(){return u(this,Ao)}setLastElement(e){return u(this,cn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,cn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of u(this,cn)){if(e.push(`M${lt.svgRound(n[4])} ${lt.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${lt.svgRound(n[10])} ${lt.svgRound(n[11])}`);continue}for(let a=6,l=n.length;a<l;a+=6){const[o,d,f,p,m,b]=n.subarray(a,a+6).map(lt.svgRound);e.push(`C${o} ${d} ${f} ${p} ${m} ${b}`)}}return e.join("")}serialize([e,n,a,l],o){const d=[],f=[],[p,m,b,v]=C(this,ri,Zx).call(this);let A,E,w,T,R,O,D,k,L;switch(u(this,Pu)){case 0:L=lt._rescale,A=e,E=n+l,w=a,T=-l,R=e+p*a,O=n+(1-m-v)*l,D=e+(p+b)*a,k=n+(1-m)*l;break;case 90:L=lt._rescaleAndSwap,A=e,E=n,w=a,T=l,R=e+m*a,O=n+p*l,D=e+(m+v)*a,k=n+(p+b)*l;break;case 180:L=lt._rescale,A=e+a,E=n,w=-a,T=l,R=e+(1-p-b)*a,O=n+m*l,D=e+(1-p)*a,k=n+(m+v)*l;break;case 270:L=lt._rescaleAndSwap,A=e+a,E=n+l,w=-a,T=-l,R=e+(1-m-v)*a,O=n+(1-p-b)*l,D=e+(1-m)*a,k=n+(1-p)*l;break}for(const{line:U,points:F}of u(this,cn))d.push(L(U,A,E,w,T,o?new Array(U.length):null)),f.push(L(F,A,E,w,T,o?new Array(F.length):null));return{lines:d,points:f,rect:[R,O,D,k]}}static deserialize(e,n,a,l,o,{paths:{lines:d,points:f},rotation:p,thickness:m}){const b=[];let v,A,E,w,T;switch(p){case 0:T=lt._rescale,v=-e/a,A=n/l+1,E=1/a,w=-1/l;break;case 90:T=lt._rescaleAndSwap,v=-n/l,A=-e/a,E=1/l,w=1/a;break;case 180:T=lt._rescale,v=e/a+1,A=-n/l,E=-1/a,w=1/l;break;case 270:T=lt._rescaleAndSwap,v=n/l+1,A=e/a+1,E=-1/l,w=-1/a;break}if(!d){d=[];for(const O of f){const D=O.length;if(D===2){d.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1]]));continue}if(D===4){d.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1],NaN,NaN,NaN,NaN,O[2],O[3]]));continue}const k=new Float32Array(3*(D-2));d.push(k);let[L,U,F,W]=O.subarray(0,4);k.set([NaN,NaN,NaN,NaN,L,U],0);for(let J=4;J<D;J+=2){const nt=O[J],st=O[J+1];k.set(lt.createBezierPoints(L,U,F,W,nt,st),(J-2)*3),[L,U,F,W]=[F,W,nt,st]}}}for(let O=0,D=d.length;O<D;O++)b.push({line:T(d[O].map(k=>k??NaN),v,A,E,w),points:T(f[O].map(k=>k??NaN),v,A,E,w)});const R=new this.prototype.constructor;return R.build(b,a,l,1,p,m,o),R}get box(){return u(this,_i)}updateProperty(e,n){return e==="stroke-width"?C(this,ri,tC).call(this,n):null}updateParentDimensions([e,n],a){const[l,o]=C(this,ri,Qs).call(this);S(this,xs,e),S(this,Cs,n),S(this,ku,a);const[d,f]=C(this,ri,Qs).call(this),p=d-l,m=f-o,b=u(this,_i);return b[0]-=p,b[1]-=m,b[2]+=2*p,b[3]+=2*m,b}updateRotation(e){return S(this,Uf,e),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,_i).map(lt.svgRound).join(" ")}get defaultProperties(){const[e,n]=u(this,_i);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=u(this,_i);let a=0,l=0,o=0,d=0,f=0,p=0;switch(u(this,Uf)){case 90:l=n/e,o=-e/n,f=e;break;case 180:a=-1,d=-1,f=e,p=n;break;case 270:l=-n/e,o=e/n,p=n;break;default:return""}return`matrix(${a} ${l} ${o} ${d} ${lt.svgRound(f)} ${lt.svgRound(p)})`}getPathResizingSVGProperties([e,n,a,l]){const[o,d]=C(this,ri,Qs).call(this),[f,p,m,b]=u(this,_i);if(Math.abs(m-o)<=lt.PRECISION||Math.abs(b-d)<=lt.PRECISION){const T=e+a/2-(f+m/2),R=n+l/2-(p+b/2);return{path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${T} ${R})`}}}const v=(a-2*o)/(m-2*o),A=(l-2*d)/(b-2*d),E=m/a,w=b/l;return{path:{"transform-origin":`${lt.svgRound(f)} ${lt.svgRound(p)}`,transform:`${this.rotationTransform} scale(${E} ${w}) translate(${lt.svgRound(o)} ${lt.svgRound(d)}) scale(${v} ${A}) translate(${lt.svgRound(-o)} ${lt.svgRound(-d)})`}}}getPathResizedSVGProperties([e,n,a,l]){const[o,d]=C(this,ri,Qs).call(this),f=u(this,_i),[p,m,b,v]=f;if(f[0]=e,f[1]=n,f[2]=a,f[3]=l,Math.abs(b-o)<=lt.PRECISION||Math.abs(v-d)<=lt.PRECISION){const R=e+a/2-(p+b/2),O=n+l/2-(m+v/2);for(const{line:D,points:k}of u(this,cn))lt._translate(D,R,O,D),lt._translate(k,R,O,k);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const A=(a-2*o)/(b-2*o),E=(l-2*d)/(v-2*d),w=-A*(p+o)+e+o,T=-E*(m+d)+n+d;if(A!==1||E!==1||w!==0||T!==0)for(const{line:R,points:O}of u(this,cn))lt._rescale(R,w,T,A,E,R),lt._rescale(O,w,T,A,E,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],a){const[l,o]=a,d=u(this,_i),f=e-d[0],p=n-d[1];if(u(this,xs)===l&&u(this,Cs)===o)for(const{line:m,points:b}of u(this,cn))lt._translate(m,f,p,m),lt._translate(b,f,p,b);else{const m=u(this,xs)/l,b=u(this,Cs)/o;S(this,xs,l),S(this,Cs,o);for(const{line:v,points:A}of u(this,cn))lt._rescale(v,f,p,m,b,v),lt._rescale(A,f,p,m,b,A);d[2]*=m,d[3]*=b}return d[0]=e,d[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(n)}`}}}get defaultSVGProperties(){const e=u(this,_i);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${lt.svgRound(e[0])} ${lt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}_i=new WeakMap,Uf=new WeakMap,Ff=new WeakMap,cn=new WeakMap,xs=new WeakMap,Cs=new WeakMap,ku=new WeakMap,Pu=new WeakMap,Ao=new WeakMap,ri=new WeakSet,Qs=function(e=u(this,Ao)){const n=u(this,Ff)+e/2*u(this,ku);return u(this,Pu)%180===0?[n/u(this,xs),n/u(this,Cs)]:[n/u(this,Cs),n/u(this,xs)]},Zx=function(){const[e,n,a,l]=u(this,_i),[o,d]=C(this,ri,Qs).call(this,0);return[e+o,n+d,a-2*o,l-2*d]},Jx=function(){const e=S(this,_i,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:l}of u(this,cn)){if(l.length<=12){for(let f=4,p=l.length;f<p;f+=6)ht.pointBoundingBox(l[f],l[f+1],e);continue}let o=l[4],d=l[5];for(let f=6,p=l.length;f<p;f+=6){const[m,b,v,A,E,w]=l.subarray(f,f+6);ht.bezierBoundingBox(o,d,m,b,v,A,E,w,e),o=E,d=w}}const[n,a]=C(this,ri,Qs).call(this);e[0]=Ci(e[0]-n,0,1),e[1]=Ci(e[1]-a,0,1),e[2]=Ci(e[2]+n,0,1),e[3]=Ci(e[3]+a,0,1),e[2]-=e[0],e[3]-=e[1]},tC=function(e){const[n,a]=C(this,ri,Qs).call(this);S(this,Ao,e);const[l,o]=C(this,ri,Qs).call(this),[d,f]=[l-n,o-a],p=u(this,_i);return p[0]-=d,p[1]-=f,p[2]+=2*d,p[3]+=2*f,p};class Km extends Wx{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:oe._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Km(this._viewParameters);return t.updateAll(this),t}}var Nm,eC;const Dc=class Dc extends gm{constructor(e){super({...e,name:"inkEditor"});x(this,Nm);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){oe.initialize(e,n),this._defaultDrawingOptions=new Km(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Bt(this,"typesMap",new Map([[Ut.INK_THICKNESS,"stroke-width"],[Ut.INK_COLOR,"stroke"],[Ut.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,a,l,o){return new zN(e,n,a,l,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,a,l,o,d){return Jf.deserialize(e,n,a,l,o,d)}static async deserialize(e,n,a){let l=null;if(e instanceof yA){const{data:{inkLists:d,rect:f,rotation:p,id:m,color:b,opacity:v,borderStyle:{rawWidth:A},popupRef:E},parent:{page:{pageNumber:w}}}=e;l=e={annotationType:wt.INK,color:Array.from(b),thickness:A,opacity:v,paths:{points:d},boxes:null,pageIndex:w-1,rect:f.slice(0),rotation:p,id:m,deleted:!1,popupRef:E}}const o=await super.deserialize(e,n,a);return o.annotationElementId=e.id||null,o._initialData=l,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:a}=this;n.updateSVGProperty("stroke-width"),a.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:a}){this._drawingOptions=Dc.getDefaultDrawingOptions({stroke:ht.makeHexColor(...e),"stroke-width":n,"stroke-opacity":a})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:a,rect:l}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":d,"stroke-width":f}}=this,p={annotationType:wt.INK,color:oe._colorManager.convert(o),opacity:d,thickness:f,paths:{lines:n,points:a},pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(p.isCopy=!0,p):this.annotationElementId&&!C(this,Nm,eC).call(this,p)?null:(p.id=this.annotationElementId,p)}renderAnnotationElement(e){const{points:n,rect:a}=this.serializeDraw(!1);return e.updateEdited({rect:a,thickness:this._drawingOptions["stroke-width"],points:n}),null}};Nm=new WeakSet,eC=function(e){const{color:n,thickness:a,opacity:l,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((d,f)=>d!==n[f])||e.thickness!==a||e.opacity!==l||e.pageIndex!==o},et(Dc,"_type","ink"),et(Dc,"_editorType",wt.INK),et(Dc,"_defaultDrawingOptions",null);let Hv=Dc;class Uv extends Jf{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Sg=8,Wh=3;var So,$t,Fv,Kn,iC,nC,Iv,Zg,sC,aC,rC,jv,Gv,lC;class Ma{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:a},l,o,d,f){let p=new OffscreenCanvas(1,1),m=p.getContext("2d",{alpha:!1});const b=200,v=m.font=`${n} ${a} ${b}px ${e}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:E,actualBoundingBoxAscent:w,actualBoundingBoxDescent:T,fontBoundingBoxAscent:R,fontBoundingBoxDescent:O,width:D}=m.measureText(t),k=1.5,L=Math.ceil(Math.max(Math.abs(A)+Math.abs(E)||0,D)*k),U=Math.ceil(Math.max(Math.abs(w)+Math.abs(T)||b,Math.abs(R)+Math.abs(O)||b)*k);p=new OffscreenCanvas(L,U),m=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=v,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,L,U),m.fillStyle="black",m.fillText(t,L*(k-1)/2,U*(3-k)/2);const F=C(this,$t,jv).call(this,m.getImageData(0,0,L,U).data),W=C(this,$t,rC).call(this,F),J=C(this,$t,Gv).call(this,W),nt=C(this,$t,Iv).call(this,F,L,U,J);return this.processDrawnLines({lines:{curves:nt,width:L,height:U},pageWidth:l,pageHeight:o,rotation:d,innerMargin:f,mustSmooth:!0,areContours:!0})}static process(t,e,n,a,l){const[o,d,f]=C(this,$t,lC).call(this,t),[p,m]=C(this,$t,aC).call(this,o,d,f,Math.hypot(d,f)*u(this,So).sigmaSFactor,u(this,So).sigmaR,u(this,So).kernelSize),b=C(this,$t,Gv).call(this,m),v=C(this,$t,Iv).call(this,p,d,f,b);return this.processDrawnLines({lines:{curves:v,width:d,height:f},pageWidth:e,pageHeight:n,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:a,innerMargin:l,mustSmooth:o,areContours:d}){a%180!==0&&([e,n]=[n,e]);const{curves:f,width:p,height:m}=t,b=t.thickness??0,v=[],A=Math.min(e/p,n/m),E=A/e,w=A/n,T=[];for(const{points:O}of f){const D=o?C(this,$t,sC).call(this,O):O;if(!D)continue;T.push(D);const k=D.length,L=new Float32Array(k),U=new Float32Array(3*(k===2?2:k-2));if(v.push({line:U,points:L}),k===2){L[0]=D[0]*E,L[1]=D[1]*w,U.set([NaN,NaN,NaN,NaN,L[0],L[1]],0);continue}let[F,W,J,nt]=D;F*=E,W*=w,J*=E,nt*=w,L.set([F,W,J,nt],0),U.set([NaN,NaN,NaN,NaN,F,W],0);for(let st=4;st<k;st+=2){const St=L[st]=D[st]*E,zt=L[st+1]=D[st+1]*w;U.set(lt.createBezierPoints(F,W,J,nt,St,zt),(st-2)*3),[F,W,J,nt]=[J,nt,St,zt]}}if(v.length===0)return null;const R=d?new Uv:new Jf;return R.build(v,e,n,1,a,d?0:b,l),{outline:R,newCurves:T,areContours:d,thickness:b,width:p,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:a,height:l}){let o=1/0,d=-1/0,f=0;for(const D of t){f+=D.length;for(let k=2,L=D.length;k<L;k++){const U=D[k]-D[k-2];o=Math.min(o,U),d=Math.max(d,U)}}let p;o>=-128&&d<=127?p=Int8Array:o>=-32768&&d<=32767?p=Int16Array:p=Int32Array;const m=t.length,b=Sg+Wh*m,v=new Uint32Array(b);let A=0;v[A++]=b*Uint32Array.BYTES_PER_ELEMENT+(f-2*m)*p.BYTES_PER_ELEMENT,v[A++]=0,v[A++]=a,v[A++]=l,v[A++]=e?0:1,v[A++]=Math.max(0,Math.floor(n??0)),v[A++]=m,v[A++]=p.BYTES_PER_ELEMENT;for(const D of t)v[A++]=D.length-2,v[A++]=D[0],v[A++]=D[1];const E=new CompressionStream("deflate-raw"),w=E.writable.getWriter();await w.ready,w.write(v);const T=p.prototype.constructor;for(const D of t){const k=new T(D.length-2);for(let L=2,U=D.length;L<U;L++)k[L-2]=D[L]-D[L-2];w.write(k)}w.close();const R=await new Response(E.readable).arrayBuffer(),O=new Uint8Array(R);return cT(O)}static async decompressSignature(t){try{const e=oL(t),{readable:n,writable:a}=new DecompressionStream("deflate-raw"),l=a.getWriter();await l.ready,l.write(e).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let o=null,d=0;for await(const D of n)o||(o=new Uint8Array(new Uint32Array(D.buffer,0,4)[0])),o.set(D,d),d+=D.length;const f=new Uint32Array(o.buffer,0,o.length>>2),p=f[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const m=f[2],b=f[3],v=f[4]===0,A=f[5],E=f[6],w=f[7],T=[],R=(Sg+Wh*E)*Uint32Array.BYTES_PER_ELEMENT;let O;switch(w){case Int8Array.BYTES_PER_ELEMENT:O=new Int8Array(o.buffer,R);break;case Int16Array.BYTES_PER_ELEMENT:O=new Int16Array(o.buffer,R);break;case Int32Array.BYTES_PER_ELEMENT:O=new Int32Array(o.buffer,R);break}d=0;for(let D=0;D<E;D++){const k=f[Wh*D+Sg],L=new Float32Array(k+2);T.push(L);for(let U=0;U<Wh-1;U++)L[U]=f[Wh*D+Sg+U+1];for(let U=0;U<k;U++)L[U+2]=L[U]+O[d++]}return{areContours:v,thickness:A,outlines:T,width:m,height:b}}catch(e){return _t(`decompressSignature: ${e}`),null}}}So=new WeakMap,$t=new WeakSet,Fv=function(t,e,n,a){return n-=t,a-=e,n===0?a>0?0:4:n===1?a+6:2-a},Kn=new WeakMap,iC=function(t,e,n,a,l,o,d){const f=C(this,$t,Fv).call(this,n,a,l,o);for(let p=0;p<8;p++){const m=(-p+f-d+16)%8,b=u(this,Kn)[2*m],v=u(this,Kn)[2*m+1];if(t[(n+b)*e+(a+v)]!==0)return m}return-1},nC=function(t,e,n,a,l,o,d){const f=C(this,$t,Fv).call(this,n,a,l,o);for(let p=0;p<8;p++){const m=(p+f+d+16)%8,b=u(this,Kn)[2*m],v=u(this,Kn)[2*m+1];if(t[(n+b)*e+(a+v)]!==0)return m}return-1},Iv=function(t,e,n,a){const l=t.length,o=new Int32Array(l);for(let m=0;m<l;m++)o[m]=t[m]<=a?1:0;for(let m=1;m<n-1;m++)o[m*e]=o[m*e+e-1]=0;for(let m=0;m<e;m++)o[m]=o[e*n-1-m]=0;let d=1,f;const p=[];for(let m=1;m<n-1;m++){f=1;for(let b=1;b<e-1;b++){const v=m*e+b,A=o[v];if(A===0)continue;let E=m,w=b;if(A===1&&o[v-1]===0)d+=1,w-=1;else if(A>=1&&o[v+1]===0)d+=1,w+=1,A>1&&(f=A);else{A!==1&&(f=Math.abs(A));continue}const T=[b,m],R=w===b+1,O={isHole:R,points:T,id:d,parent:0};p.push(O);let D;for(const st of p)if(st.id===f){D=st;break}D?D.isHole?O.parent=R?D.parent:f:O.parent=R?f:D.parent:O.parent=R?f:0;const k=C(this,$t,iC).call(this,o,e,m,b,E,w,0);if(k===-1){o[v]=-d,o[v]!==1&&(f=Math.abs(o[v]));continue}let L=u(this,Kn)[2*k],U=u(this,Kn)[2*k+1];const F=m+L,W=b+U;E=F,w=W;let J=m,nt=b;for(;;){const st=C(this,$t,nC).call(this,o,e,J,nt,E,w,1);L=u(this,Kn)[2*st],U=u(this,Kn)[2*st+1];const St=J+L,zt=nt+U;T.push(zt,St);const Et=J*e+nt;if(o[Et+1]===0?o[Et]=-d:o[Et]===1&&(o[Et]=d),St===m&&zt===b&&J===F&&nt===W){o[v]!==1&&(f=Math.abs(o[v]));break}else E=J,w=nt,J=St,nt=zt}}}return p},Zg=function(t,e,n,a){if(n-e<=4){for(let F=e;F<n-2;F+=2)a.push(t[F],t[F+1]);return}const l=t[e],o=t[e+1],d=t[n-4]-l,f=t[n-3]-o,p=Math.hypot(d,f),m=d/p,b=f/p,v=m*o-b*l,A=f/d,E=1/p,w=Math.atan(A),T=Math.cos(w),R=Math.sin(w),O=E*(Math.abs(T)+Math.abs(R)),D=E*(1-O+O**2),k=Math.max(Math.atan(Math.abs(R+T)*D),Math.atan(Math.abs(R-T)*D));let L=0,U=e;for(let F=e+2;F<n-2;F+=2){const W=Math.abs(v-m*t[F+1]+b*t[F]);W>L&&(U=F,L=W)}L>(p*k)**2?(C(this,$t,Zg).call(this,t,e,U+2,a),C(this,$t,Zg).call(this,t,U,n,a)):a.push(l,o)},sC=function(t){const e=[],n=t.length;return C(this,$t,Zg).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},aC=function(t,e,n,a,l,o){const d=new Float32Array(o**2),f=-2*a**2,p=o>>1;for(let w=0;w<o;w++){const T=(w-p)**2;for(let R=0;R<o;R++)d[w*o+R]=Math.exp((T+(R-p)**2)/f)}const m=new Float32Array(256),b=-2*l**2;for(let w=0;w<256;w++)m[w]=Math.exp(w**2/b);const v=t.length,A=new Uint8Array(v),E=new Uint32Array(256);for(let w=0;w<n;w++)for(let T=0;T<e;T++){const R=w*e+T,O=t[R];let D=0,k=0;for(let U=0;U<o;U++){const F=w+U-p;if(!(F<0||F>=n))for(let W=0;W<o;W++){const J=T+W-p;if(J<0||J>=e)continue;const nt=t[F*e+J],st=d[U*o+W]*m[Math.abs(nt-O)];D+=nt*st,k+=st}}const L=A[R]=Math.round(D/k);E[L]++}return[A,E]},rC=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},jv=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let a=-1/0,l=1/0;for(let d=0,f=n.length;d<f;d++){if(t[(d<<2)+3]===0){a=n[d]=255;continue}const m=n[d]=t[d<<2];m>a&&(a=m),m<l&&(l=m)}const o=255/(a-l);for(let d=0;d<e;d++)n[d]=(n[d]-l)*o;return n},Gv=function(t){let e,n=-1/0,a=-1/0;const l=t.findIndex(f=>f!==0);let o=l,d=l;for(e=l;e<256;e++){const f=t[e];f>n&&(e-o>a&&(a=e-o,d=e-1),n=f,o=e)}for(e=d-1;e>=0&&!(t[e]>t[e+1]);e--);return e},lC=function(t){const e=t,{width:n,height:a}=t,{maxDim:l}=u(this,So);let o=n,d=a;if(n>l||a>l){let v=n,A=a,E=Math.log2(Math.max(n,a)/l);const w=Math.floor(E);E=E===w?w-1:w;for(let R=0;R<E;R++){o=v,d=A,o>l&&(o=Math.ceil(o/2)),d>l&&(d=Math.ceil(d/2));const O=new OffscreenCanvas(o,d);O.getContext("2d").drawImage(t,0,0,v,A,0,0,o,d),v=o,A=d,t!==e&&t.close(),t=O.transferToImageBitmap()}const T=Math.min(l/o,l/d);o=Math.round(o*T),d=Math.round(d*T)}const p=new OffscreenCanvas(o,d).getContext("2d",{willReadFrequently:!0});p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,o,d);const m=p.getImageData(0,0,o,d).data;return[C(this,$t,jv).call(this,m),o,d]},x(Ma,$t),x(Ma,So,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),x(Ma,Kn,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class bA extends Wx{constructor(){super(),super.updateProperties({fill:oe._defaultLineColor,"stroke-width":0})}clone(){const t=new bA;return t.updateAll(this),t}}class vA extends Km{constructor(t){super(t),super.updateProperties({stroke:oe._defaultLineColor,"stroke-width":1})}clone(){const t=new vA(this._viewParameters);return t.updateAll(this),t}}var Hr,un,Ur,Fr;const Qi=class Qi extends gm{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});x(this,Hr,!1);x(this,un,null);x(this,Ur,null);x(this,Fr,null);this._willKeepAspectRatio=!0,S(this,Ur,e.signatureData||null),S(this,un,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){oe.initialize(e,n),this._defaultDrawingOptions=new bA,this._defaultDrawnSignatureOptions=new vA(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Bt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,un)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:a}=this;if(a&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(u(this,Ur)){const{lines:l,mustSmooth:o,areContours:d,description:f,uuid:p,heightInPage:m}=u(this,Ur),{rawDims:{pageWidth:b,pageHeight:v},rotation:A}=this.parent.viewport,E=Ma.processDrawnLines({lines:l,pageWidth:b,pageHeight:v,rotation:A,innerMargin:Qi._INNER_MARGIN,mustSmooth:o,areContours:d});this.addSignature(E,m,f,p)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return a&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){S(this,Fr,e),this.addEditToolbar()}getUuid(){return u(this,Fr)}get description(){return u(this,un)}set description(e){S(this,un,e),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:a,width:l,height:o}=u(this,Ur),d=Math.max(l,o),f=Ma.processDrawnLines({lines:{curves:e.map(p=>({points:p})),thickness:a,width:l,height:o},pageWidth:d,pageHeight:d,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:f.outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&u(this,un)!==null&&(await e.addEditSignatureButton(this._uiManager.signatureManager,u(this,Fr),u(this,un)),e.show()),e):null}addSignature(e,n,a,l){const{x:o,y:d}=this,{outline:f}=S(this,Ur,e);S(this,Hr,f instanceof Uv),S(this,un,a),this.div.setAttribute("data-l10n-args",JSON.stringify({description:a}));let p;u(this,Hr)?p=Qi.getDefaultDrawingOptions():(p=Qi._defaultDrawnSignatureOptions.clone(),p.updateProperties({"stroke-width":f.thickness})),this._addOutlines({drawOutlines:f,drawingOptions:p});const[m,b]=this.parentDimensions,[,v]=this.pageDimensions;let A=n/v;A=A>=1?.5:A,this.width*=A/this.height,this.width>=1&&(A*=.9/this.width,this.width=.9),this.height=A,this.setDims(m*this.width,b*this.height),this.x=o,this.y=d,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(l),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!l,hasDescription:!!a}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:a},rotation:l}=this.parent.viewport;return Ma.process(e,n,a,l,Qi._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:a,pageHeight:l},rotation:o}=this.parent.viewport;return Ma.extractContoursFromText(e,n,a,l,o,Qi._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:a},rotation:l}=this.parent.viewport;return Ma.processDrawnLines({lines:e,pageWidth:n,pageHeight:a,rotation:l,innerMargin:Qi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=Qi.getDefaultDrawingOptions():(this._drawingOptions=Qi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:a,rect:l}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,d={annotationType:wt.SIGNATURE,isSignature:!0,areContours:u(this,Hr),color:[0,0,0],thickness:u(this,Hr)?0:o,pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(d.paths={lines:n,points:a},d.uuid=u(this,Fr),d.isCopy=!0):d.lines=n,u(this,un)&&(d.accessibilityData={type:"Figure",alt:u(this,un)}),d}static deserializeDraw(e,n,a,l,o,d){return d.areContours?Uv.deserialize(e,n,a,l,o,d):Jf.deserialize(e,n,a,l,o,d)}static async deserialize(e,n,a){var o;const l=await super.deserialize(e,n,a);return S(l,Hr,e.areContours),S(l,un,((o=e.accessibilityData)==null?void 0:o.alt)||""),S(l,Fr,e.uuid),l}};Hr=new WeakMap,un=new WeakMap,Ur=new WeakMap,Fr=new WeakMap,et(Qi,"_type","signature"),et(Qi,"_editorType",wt.SIGNATURE),et(Qi,"_defaultDrawingOptions",null);let qv=Qi;var de,We,Ir,wa,jr,Bu,_a,Eo,Rs,hn,zu,jt,dd,fd,Jg,tm,em,Xv,im,oC;class Vv extends oe{constructor(e){super({...e,name:"stampEditor"});x(this,jt);x(this,de,null);x(this,We,null);x(this,Ir,null);x(this,wa,null);x(this,jr,null);x(this,Bu,"");x(this,_a,null);x(this,Eo,!1);x(this,Rs,null);x(this,hn,!1);x(this,zu,!1);S(this,wa,e.bitmapUrl),S(this,jr,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){oe.initialize(e,n)}static isHandlingMimeForPasting(e){return H0.includes(e)}static paste(e,n){n.pasteEditor(wt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:a}=this._uiManager;if(!a)throw new Error("No ML.");if(!await a.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:l,width:o,height:d}=e||this.copyCanvas(null,null,!0).imageData,f=await a.guess({name:"altText",request:{data:l,width:o,height:d,channels:l.length/(o*d)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const p=f.output;return await this.setGuessedAltText(p),n&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var e;u(this,We)&&(S(this,de,null),this._uiManager.imageManager.deleteId(u(this,We)),(e=u(this,_a))==null||e.remove(),S(this,_a,null),u(this,Rs)&&(clearTimeout(u(this,Rs)),S(this,Rs,null))),super.remove()}rebuild(){if(!this.parent){u(this,We)&&C(this,jt,Jg).call(this);return}super.rebuild(),this.div!==null&&(u(this,We)&&u(this,_a)===null&&C(this,jt,Jg).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(u(this,Ir)||u(this,de)||u(this,wa)||u(this,jr)||u(this,We)||u(this,Eo))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),u(this,Eo)||(u(this,de)?C(this,jt,tm).call(this):C(this,jt,Jg).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:a,bitmap:l}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),a&&this._uiManager.imageManager.isValidId(a)&&(S(this,We,a),l&&S(this,de,l),S(this,Eo,!1),C(this,jt,tm).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,Rs)!==null&&clearTimeout(u(this,Rs)),S(this,Rs,setTimeout(()=>{S(this,Rs,null),C(this,jt,Xv).call(this)},200))}copyCanvas(e,n,a=!1){var A;e||(e=224);const{width:l,height:o}=u(this,de),d=new ka;let f=u(this,de),p=l,m=o,b=null;if(n){if(l>n||o>n){const W=Math.min(n/l,n/o);p=Math.floor(l*W),m=Math.floor(o*W)}b=document.createElement("canvas");const E=b.width=Math.ceil(p*d.sx),w=b.height=Math.ceil(m*d.sy);u(this,hn)||(f=C(this,jt,em).call(this,E,w));const T=b.getContext("2d");T.filter=this._uiManager.hcmFilter;let R="white",O="#cfcfd8";this._uiManager.hcmFilter!=="none"?O="black":(A=window.matchMedia)!=null&&A.call(window,"(prefers-color-scheme: dark)").matches&&(R="#8f8f9d",O="#42414d");const D=15,k=D*d.sx,L=D*d.sy,U=new OffscreenCanvas(k*2,L*2),F=U.getContext("2d");F.fillStyle=R,F.fillRect(0,0,k*2,L*2),F.fillStyle=O,F.fillRect(0,0,k,L),F.fillRect(k,L,k,L),T.fillStyle=T.createPattern(U,"repeat"),T.fillRect(0,0,E,w),T.drawImage(f,0,0,f.width,f.height,0,0,E,w)}let v=null;if(a){let E,w;if(d.symmetric&&f.width<e&&f.height<e)E=f.width,w=f.height;else if(f=u(this,de),l>e||o>e){const O=Math.min(e/l,e/o);E=Math.floor(l*O),w=Math.floor(o*O),u(this,hn)||(f=C(this,jt,em).call(this,E,w))}const R=new OffscreenCanvas(E,w).getContext("2d",{willReadFrequently:!0});R.drawImage(f,0,0,f.width,f.height,0,0,E,w),v={width:E,height:w,data:R.getImageData(0,0,E,w).data}}return{canvas:b,width:p,height:m,imageData:v}}static async deserialize(e,n,a){var T;let l=null,o=!1;if(e instanceof wx){const{data:{rect:R,rotation:O,id:D,structParent:k,popupRef:L},container:U,parent:{page:{pageNumber:F}},canvas:W}=e;let J,nt;W?(delete e.canvas,{id:J,bitmap:nt}=a.imageManager.getFromCanvas(U.id,W),W.remove()):(o=!0,e._hasNoCanvas=!0);const st=((T=await n._structTree.getAriaAttributes(`${oA}${D}`))==null?void 0:T.get("aria-label"))||"";l=e={annotationType:wt.STAMP,bitmapId:J,bitmap:nt,pageIndex:F-1,rect:R.slice(0),rotation:O,id:D,deleted:!1,accessibilityData:{decorative:!1,altText:st},isSvg:!1,structParent:k,popupRef:L}}const d=await super.deserialize(e,n,a),{rect:f,bitmap:p,bitmapUrl:m,bitmapId:b,isSvg:v,accessibilityData:A}=e;o?(a.addMissingCanvas(e.id,d),S(d,Eo,!0)):b&&a.imageManager.isValidId(b)?(S(d,We,b),p&&S(d,de,p)):S(d,wa,m),S(d,hn,v);const[E,w]=d.pageDimensions;return d.width=(f[2]-f[0])/E,d.height=(f[3]-f[1])/w,d.annotationElementId=e.id||null,A&&(d.altTextData=A),d._initialData=l,S(d,zu,!!l),d}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const a={annotationType:wt.STAMP,bitmapId:u(this,We),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,hn),structTreeParentId:this._structTreeParentId};if(e)return a.bitmapUrl=C(this,jt,im).call(this,!0),a.accessibilityData=this.serializeAltText(!0),a.isCopy=!0,a;const{decorative:l,altText:o}=this.serializeAltText(!1);if(!l&&o&&(a.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const f=C(this,jt,oC).call(this,a);if(f.isSame)return null;f.isSameAltText?delete a.accessibilityData:a.accessibilityData.structParent=this._initialData.structParent??-1}if(a.id=this.annotationElementId,n===null)return a;n.stamps||(n.stamps=new Map);const d=u(this,hn)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!n.stamps.has(u(this,We)))n.stamps.set(u(this,We),{area:d,serialized:a}),a.bitmap=C(this,jt,im).call(this,!1);else if(u(this,hn)){const f=n.stamps.get(u(this,We));d>f.area&&(f.area=d,f.serialized.bitmap.close(),f.serialized.bitmap=C(this,jt,im).call(this,!1))}return a}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}de=new WeakMap,We=new WeakMap,Ir=new WeakMap,wa=new WeakMap,jr=new WeakMap,Bu=new WeakMap,_a=new WeakMap,Eo=new WeakMap,Rs=new WeakMap,hn=new WeakMap,zu=new WeakMap,jt=new WeakSet,dd=function(e,n=!1){if(!e){this.remove();return}S(this,de,e.bitmap),n||(S(this,We,e.id),S(this,hn,e.isSvg)),e.file&&S(this,Bu,e.file.name),C(this,jt,tm).call(this)},fd=function(){if(S(this,Ir,null),this._uiManager.enableWaiting(!1),!!u(this,_a)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,de)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,de)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Jg=function(){if(u(this,We)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,We)).then(a=>C(this,jt,dd).call(this,a,!0)).finally(()=>C(this,jt,fd).call(this));return}if(u(this,wa)){const a=u(this,wa);S(this,wa,null),this._uiManager.enableWaiting(!0),S(this,Ir,this._uiManager.imageManager.getFromUrl(a).then(l=>C(this,jt,dd).call(this,l)).finally(()=>C(this,jt,fd).call(this)));return}if(u(this,jr)){const a=u(this,jr);S(this,jr,null),this._uiManager.enableWaiting(!0),S(this,Ir,this._uiManager.imageManager.getFromFile(a).then(l=>C(this,jt,dd).call(this,l)).finally(()=>C(this,jt,fd).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=H0.join(",");const n=this._uiManager._signal;S(this,Ir,new Promise(a=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const l=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),C(this,jt,dd).call(this,l)}a()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),a()},{signal:n})}).finally(()=>C(this,jt,fd).call(this))),e.click()},tm=function(){var b;const{div:e}=this;let{width:n,height:a}=u(this,de);const[l,o]=this.pageDimensions,d=.75;if(this.width)n=this.width*l,a=this.height*o;else if(n>d*l||a>d*o){const v=Math.min(d*l/n,d*o/a);n*=v,a*=v}const[f,p]=this.parentDimensions;this.setDims(n*f/l,a*p/o),this._uiManager.enableWaiting(!1);const m=S(this,_a,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),this.width=n/l,this.height=a/o,(b=this._initialOptions)!=null&&b.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),C(this,jt,Xv).call(this),u(this,zu)||(this.parent.addUndoableEditor(this),S(this,zu,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,Bu)&&this.div.setAttribute("aria-description",u(this,Bu))},em=function(e,n){const{width:a,height:l}=u(this,de);let o=a,d=l,f=u(this,de);for(;o>2*e||d>2*n;){const p=o,m=d;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),d>2*n&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const b=new OffscreenCanvas(o,d);b.getContext("2d").drawImage(f,0,0,p,m,0,0,o,d),f=b.transferToImageBitmap()}return f},Xv=function(){const[e,n]=this.parentDimensions,{width:a,height:l}=this,o=new ka,d=Math.ceil(a*e*o.sx),f=Math.ceil(l*n*o.sy),p=u(this,_a);if(!p||p.width===d&&p.height===f)return;p.width=d,p.height=f;const m=u(this,hn)?u(this,de):C(this,jt,em).call(this,d,f),b=p.getContext("2d");b.filter=this._uiManager.hcmFilter,b.drawImage(m,0,0,m.width,m.height,0,0,d,f)},im=function(e){if(e){if(u(this,hn)){const l=this._uiManager.imageManager.getSvgUrl(u(this,We));if(l)return l}const n=document.createElement("canvas");return{width:n.width,height:n.height}=u(this,de),n.getContext("2d").drawImage(u(this,de),0,0),n.toDataURL()}if(u(this,hn)){const[n,a]=this.pageDimensions,l=Math.round(this.width*n*Yr.PDF_TO_CSS_UNITS),o=Math.round(this.height*a*Yr.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(l,o);return d.getContext("2d").drawImage(u(this,de),0,0,u(this,de).width,u(this,de).height,0,0,l,o),d.transferToImageBitmap()}return structuredClone(u(this,de))},oC=function(e){var d;const{pageIndex:n,accessibilityData:{altText:a}}=this._initialData,l=e.pageIndex===n,o=(((d=e.accessibilityData)==null?void 0:d.alt)||"")===a;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&l&&o,isSameAltText:o}},et(Vv,"_type","stamp"),et(Vv,"_editorType",wt.STAMP);var wo,Hu,Ms,Gr,Ta,Nn,qr,Uu,_o,Wn,xa,yi,Ca,dt,Vr,fe,cC,fs,$v,Kv,nm;const Un=class Un{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:a,accessibilityManager:l,annotationLayer:o,drawLayer:d,textLayer:f,viewport:p,l10n:m}){x(this,fe);x(this,wo);x(this,Hu,!1);x(this,Ms,null);x(this,Gr,null);x(this,Ta,null);x(this,Nn,new Map);x(this,qr,!1);x(this,Uu,!1);x(this,_o,!1);x(this,Wn,null);x(this,xa,null);x(this,yi,null);x(this,Ca,null);x(this,dt);const b=[...u(Un,Vr).values()];if(!Un._initialized){Un._initialized=!0;for(const v of b)v.initialize(m,t)}t.registerEditorTypes(b),S(this,dt,t),this.pageIndex=e,this.div=n,S(this,wo,l),S(this,Ms,o),this.viewport=p,S(this,yi,f),this.drawLayer=d,this._structTree=a,u(this,dt).addLayer(this)}get isEmpty(){return u(this,Nn).size===0}get isInvisible(){return this.isEmpty&&u(this,dt).getMode()===wt.NONE}updateToolbar(t){u(this,dt).updateToolbar(t)}updateMode(t=u(this,dt).getMode()){switch(C(this,fe,nm).call(this),t){case wt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case wt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case wt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of u(Un,Vr).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=u(this,yi))==null?void 0:e.div)}setEditingState(t){u(this,dt).setEditingState(t)}addCommands(t){u(this,dt).addCommands(t)}cleanUndoStack(t){u(this,dt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=u(this,Ms))==null||e.div.classList.toggle("disabled",!t)}async enable(){S(this,_o,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of u(this,Nn).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(u(this,dt).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!u(this,Ms)){S(this,_o,!1);return}const e=u(this,Ms).getEditableAnnotations();for(const n of e){if(n.hide(),u(this,dt).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const a=await this.deserialize(n);a&&(this.addOrRebuild(a),a.enableEditing())}S(this,_o,!1)}disable(){var a;S(this,Uu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const l of u(this,Nn).values())if(l.disableEditing(),!!l.annotationElementId){if(l.serialize()!==null){t.set(l.annotationElementId,l);continue}else e.set(l.annotationElementId,l);(a=this.getEditableAnnotation(l.annotationElementId))==null||a.show(),l.remove()}if(u(this,Ms)){const l=u(this,Ms).getEditableAnnotations();for(const o of l){const{id:d}=o.data;if(u(this,dt).isDeletedAnnotationElement(d))continue;let f=e.get(d);if(f){f.resetAnnotationElement(o),f.show(!1),o.show();continue}f=t.get(d),f&&(u(this,dt).addChangedExistingAnnotation(f),f.renderAnnotationElement(o)&&f.show(!1)),o.show()}}C(this,fe,nm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const l of u(Un,Vr).values())n.remove(`${l._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),S(this,Uu,!1)}getEditableAnnotation(t){var e;return((e=u(this,Ms))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){u(this,dt).getActive()!==t&&u(this,dt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=u(this,yi))!=null&&t.div&&!u(this,Ca)){S(this,Ca,new AbortController);const e=u(this,dt).combinedSignal(u(this,Ca));u(this,yi).div.addEventListener("pointerdown",C(this,fe,cC).bind(this),{signal:e}),u(this,yi).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=u(this,yi))!=null&&t.div&&u(this,Ca)&&(u(this,Ca).abort(),S(this,Ca,null),u(this,yi).div.classList.remove("highlighting"))}enableClick(){if(u(this,Gr))return;S(this,Gr,new AbortController);const t=u(this,dt).combinedSignal(u(this,Gr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=u(this,Gr))==null||t.abort(),S(this,Gr,null)}attach(t){u(this,Nn).set(t.id,t);const{annotationElementId:e}=t;e&&u(this,dt).isDeletedAnnotationElement(e)&&u(this,dt).removeDeletedAnnotationElement(t)}detach(t){var e;u(this,Nn).delete(t.id),(e=u(this,wo))==null||e.removePointerInTextLayer(t.contentDiv),!u(this,Uu)&&t.annotationElementId&&u(this,dt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),u(this,dt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(u(this,dt).addDeletedAnnotationElement(t.annotationElementId),oe.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),u(this,dt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!u(this,_o)),u(this,dt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!u(this,Ta)&&(t._focusEventsAllowed=!1,S(this,Ta,setTimeout(()=>{S(this,Ta,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:u(this,dt)._signal}),e.focus())},0))),t._structTreeParentId=(n=u(this,wo))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return u(this,dt).getId()}combinedSignal(t){return u(this,dt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=u(this,fe,fs))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){u(this,dt).updateToolbar(t),await u(this,dt).updateMode(t);const{offsetX:n,offsetY:a}=C(this,fe,Kv).call(this),l=this.getNextId(),o=C(this,fe,$v).call(this,{parent:this,id:l,x:n,y:a,uiManager:u(this,dt),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=u(Un,Vr).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,u(this,dt)))||null}createAndAddNewEditor(t,e,n={}){const a=this.getNextId(),l=C(this,fe,$v).call(this,{parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:u(this,dt),isCentered:e,...n});return l&&this.add(l),l}addNewEditor(t={}){this.createAndAddNewEditor(C(this,fe,Kv).call(this),!0,t)}setSelected(t){u(this,dt).setSelected(t)}toggleSelected(t){u(this,dt).toggleSelected(t)}unselect(t){u(this,dt).unselect(t)}pointerup(t){var a;const{isMac:e}=oi.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!u(this,qr)||(S(this,qr,!1),(a=u(this,fe,fs))!=null&&a.isDrawer&&u(this,fe,fs).supportMultipleDrawings))return;if(!u(this,Hu)){S(this,Hu,!0);return}const n=u(this,dt).getMode();if(n===wt.STAMP||n===wt.SIGNATURE){u(this,dt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var a;if(u(this,dt).getMode()===wt.HIGHLIGHT&&this.enableTextSelection(),u(this,qr)){S(this,qr,!1);return}const{isMac:e}=oi.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(S(this,qr,!0),(a=u(this,fe,fs))!=null&&a.isDrawer){this.startDrawingSession(t);return}const n=u(this,dt).getActive();S(this,Hu,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),u(this,Wn)){u(this,fe,fs).startDrawing(this,u(this,dt),!1,t);return}u(this,dt).setCurrentDrawingSession(this),S(this,Wn,new AbortController);const e=u(this,dt).combinedSignal(u(this,Wn));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(S(this,xa,null),this.commitOrRemove())},{signal:e}),u(this,fe,fs).startDrawing(this,u(this,dt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&S(this,xa,e);return}u(this,xa)&&setTimeout(()=>{var e;(e=u(this,xa))==null||e.focus(),S(this,xa,null)},0)}endDrawingSession(t=!1){return u(this,Wn)?(u(this,dt).setCurrentDrawingSession(null),u(this,Wn).abort(),S(this,Wn,null),S(this,xa,null),u(this,fe,fs).endDrawing(t)):null}findNewParent(t,e,n){const a=u(this,dt).findParent(e,n);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return u(this,Wn)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,Wn)&&u(this,fe,fs).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=u(this,dt).getActive())==null?void 0:t.parent)===this&&(u(this,dt).commitOrRemove(),u(this,dt).setActiveEditor(null)),u(this,Ta)&&(clearTimeout(u(this,Ta)),S(this,Ta,null));for(const n of u(this,Nn).values())(e=u(this,wo))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,u(this,Nn).clear(),u(this,dt).removeLayer(this)}render({viewport:t}){this.viewport=t,Ro(this.div,t);for(const e of u(this,dt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){u(this,dt).commitOrRemove(),C(this,fe,nm).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Ro(this.div,{rotation:n}),e!==n)for(const a of u(this,Nn).values())a.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return u(this,dt).viewParameters.realScale}};wo=new WeakMap,Hu=new WeakMap,Ms=new WeakMap,Gr=new WeakMap,Ta=new WeakMap,Nn=new WeakMap,qr=new WeakMap,Uu=new WeakMap,_o=new WeakMap,Wn=new WeakMap,xa=new WeakMap,yi=new WeakMap,Ca=new WeakMap,dt=new WeakMap,Vr=new WeakMap,fe=new WeakSet,cC=function(t){u(this,dt).unselectAll();const{target:e}=t;if(e===u(this,yi).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&u(this,yi).div.contains(e)){const{isMac:n}=oi.platform;if(t.button!==0||t.ctrlKey&&n)return;u(this,dt).showAllEditors("highlight",!0,!0),u(this,yi).div.classList.add("free"),this.toggleDrawing(),pm.startHighlighting(this,u(this,dt).direction==="ltr",{target:u(this,yi).div,x:t.x,y:t.y}),u(this,yi).div.addEventListener("pointerup",()=>{u(this,yi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,dt)._signal}),t.preventDefault()}},fs=function(){return u(Un,Vr).get(u(this,dt).getMode())},$v=function(t){const e=u(this,fe,fs);return e?new e.prototype.constructor(t):null},Kv=function(){const{x:t,y:e,width:n,height:a}=this.div.getBoundingClientRect(),l=Math.max(0,t),o=Math.max(0,e),d=Math.min(window.innerWidth,t+n),f=Math.min(window.innerHeight,e+a),p=(l+d)/2-t,m=(o+f)/2-e,[b,v]=this.viewport.rotation%180===0?[p,m]:[m,p];return{offsetX:b,offsetY:v}},nm=function(){for(const t of u(this,Nn).values())t.isEmpty()&&t.remove()},et(Un,"_initialized",!1),x(Un,Vr,new Map([Tv,Hv,Vv,pm,qv].map(t=>[t._editorType,t])));let Yv=Un;var Qn,Ti,To,If,km,uC,Os,Qv,hC,Zv;const ze=class ze{constructor({pageIndex:t}){x(this,Os);x(this,Qn,null);x(this,Ti,new Map);x(this,To,new Map);this.pageIndex=t}setParent(t){if(!u(this,Qn)){S(this,Qn,t);return}if(u(this,Qn)!==t){if(u(this,Ti).size>0)for(const e of u(this,Ti).values())e.remove(),t.append(e);S(this,Qn,t)}}static get _svgFactory(){return Bt(this,"_svgFactory",new hm)}draw(t,e=!1,n=!1){const a=Ai(ze,If)._++,l=C(this,Os,Qv).call(this),o=ze._svgFactory.createElement("defs");l.append(o);const d=ze._svgFactory.createElement("path");o.append(d);const f=`path_p${this.pageIndex}_${a}`;d.setAttribute("id",f),d.setAttribute("vector-effect","non-scaling-stroke"),e&&u(this,To).set(a,d);const p=n?C(this,Os,hC).call(this,o,f):null,m=ze._svgFactory.createElement("use");return l.append(m),m.setAttribute("href",`#${f}`),this.updateProperties(l,t),u(this,Ti).set(a,l),{id:a,clipPathId:`url(#${p})`}}drawOutline(t,e){const n=Ai(ze,If)._++,a=C(this,Os,Qv).call(this),l=ze._svgFactory.createElement("defs");a.append(l);const o=ze._svgFactory.createElement("path");l.append(o);const d=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",d),o.setAttribute("vector-effect","non-scaling-stroke");let f;if(e){const b=ze._svgFactory.createElement("mask");l.append(b),f=`mask_p${this.pageIndex}_${n}`,b.setAttribute("id",f),b.setAttribute("maskUnits","objectBoundingBox");const v=ze._svgFactory.createElement("rect");b.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const A=ze._svgFactory.createElement("use");b.append(A),A.setAttribute("href",`#${d}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const p=ze._svgFactory.createElement("use");a.append(p),p.setAttribute("href",`#${d}`),f&&p.setAttribute("mask",`url(#${f})`);const m=p.cloneNode();return a.append(m),p.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(a,t),u(this,Ti).set(n,a),n}finalizeDraw(t,e){u(this,To).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var f;if(!e)return;const{root:n,bbox:a,rootClass:l,path:o}=e,d=typeof t=="number"?u(this,Ti).get(t):t;if(d){if(n&&C(this,Os,Zv).call(this,d,n),a&&C(f=ze,km,uC).call(f,d,a),l){const{classList:p}=d;for(const[m,b]of Object.entries(l))p.toggle(m,b)}if(o){const m=d.firstChild.firstChild;C(this,Os,Zv).call(this,m,o)}}}updateParent(t,e){if(e===this)return;const n=u(this,Ti).get(t);n&&(u(e,Qn).append(n),u(this,Ti).delete(t),u(e,Ti).set(t,n))}remove(t){u(this,To).delete(t),u(this,Qn)!==null&&(u(this,Ti).get(t).remove(),u(this,Ti).delete(t))}destroy(){S(this,Qn,null);for(const t of u(this,Ti).values())t.remove();u(this,Ti).clear(),u(this,To).clear()}};Qn=new WeakMap,Ti=new WeakMap,To=new WeakMap,If=new WeakMap,km=new WeakSet,uC=function(t,[e,n,a,l]){const{style:o}=t;o.top=`${100*n}%`,o.left=`${100*e}%`,o.width=`${100*a}%`,o.height=`${100*l}%`},Os=new WeakSet,Qv=function(){const t=ze._svgFactory.create(1,1,!0);return u(this,Qn).append(t),t.setAttribute("aria-hidden",!0),t},hC=function(t,e){const n=ze._svgFactory.createElement("clipPath");t.append(n);const a=`clip_${e}`;n.setAttribute("id",a),n.setAttribute("clipPathUnits","objectBoundingBox");const l=ze._svgFactory.createElement("use");return n.append(l),l.setAttribute("href",`#${e}`),l.classList.add("clip"),a},Zv=function(t,e){for(const[n,a]of Object.entries(e))a===null?t.removeAttribute(n):t.setAttribute(n,a)},x(ze,km),x(ze,If,0);let Wv=ze;globalThis.pdfjsTestingUtils={HighlightOutliner:Cv};globalThis.pdfjsLib={AbortException:Xr,AnnotationEditorLayer:Yv,AnnotationEditorParamsType:Ut,AnnotationEditorType:wt,AnnotationEditorUIManager:Mo,AnnotationLayer:Ev,AnnotationMode:cr,AnnotationType:De,build:mN,ColorPicker:fm,createValidAbsoluteUrl:aT,DOMSVGFactory:hm,DrawLayer:Wv,FeatureTest:oi,fetchData:$f,getDocument:ox,getFilenameFromUrl:cL,getPdfFilenameFromUrl:uL,getUuid:oT,getXfaPageViewport:hL,GlobalWorkerOptions:Ra,ImageKind:Cg,InvalidPDFException:B0,isDataScheme:Ym,isPdfFile:uA,isValidExplicitDest:cN,MathClamp:Ci,noContextMenu:Jn,normalizeUnicode:rL,OPS:lm,OutputScale:ka,PasswordResponses:QO,PDFDataRangeTransport:cx,PDFDateString:hA,PDFWorker:Lc,PermissionFlag:WO,PixelsPerInch:Yr,RenderingCancelledException:cA,ResponseException:om,setLayerDimensions:Ro,shadow:Bt,SignatureExtractor:Ma,stopEvent:Oe,SupportedImageMimeTypes:H0,TextLayer:md,TouchManager:um,updateUrlHash:rT,Util:ht,VerbosityLevel:qm,version:gN,XfaLayer:hx};const HN="https://your-ocr-api-url.com",UN=()=>{const[h,t]=K.useState(""),[e,n]=K.useState(""),[a,l]=K.useState(""),o=async A=>{if(A.type==="text/plain"){const E=new FileReader;return await new Promise(w=>{E.onload=T=>w(T.target.result),E.readAsText(A)})}else if(A.type==="application/pdf")if(window.confirm("是否使用 OCR 识别 PDF 内容？"))try{const w=new FormData;w.append("file",A);const T=await fetch(HN,{method:"POST",body:w});if(!T.ok)throw new Error("OCR 请求失败");return(await T.json()).text}catch(w){return console.error("OCR 错误:",w),"OCR 识别失败"}else{const T=await ox(URL.createObjectURL(A)).promise;let R="";for(let O=1;O<=T.numPages;O++){const k=await(await T.getPage(O)).getTextContent();R+=k.items.map(L=>L.str).join(" ")}return R}},d=async A=>{if(A){const E=await o(A);t(E)}},f=async A=>{if(A){const E=await o(A);n(E)}},p=async A=>{if(A){const E=await o(A);l(E)}},m=A=>{t(A)},b=A=>{n(A)},v=A=>{l(A)};return gt.jsxs("div",{children:[gt.jsx(mD,{onImportSanskrit:d,onImportTibetan:f,onImportChinese:p}),gt.jsx(YO,{sanskritText:h,tibetanText:e,chineseText:a,onSanskritChange:m,onTibetanChange:b,onChineseChange:v}),gt.jsx($O,{})]})},FN=()=>gt.jsx(rD,{children:gt.jsx(B2,{children:gt.jsx(C_,{path:"/",element:gt.jsx(UN,{})})})});VM.createRoot(document.getElementById("root")).render(gt.jsx(K.StrictMode,{children:gt.jsx(FN,{})}));
